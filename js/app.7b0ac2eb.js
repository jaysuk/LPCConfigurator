(function(e){function t(t){for(var a,o,n=t[0],l=t[1],p=t[2],m=0,u=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&u.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(u.length)u.shift()();return i.push.apply(i,p||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,n=1;n<r.length;n++){var l=r[n];0!==s[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/LPCConfigurator/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var p=0;p<n.length;p++)t(n[p]);var d=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),s=r.n(a);s.a},"0355":function(e,t,r){"use strict";var a=r("e92e"),s=r.n(a);s.a},"25d9":function(e,t,r){},"2fd9":function(e,t,r){"use strict";var a=r("8c8b"),s=r.n(a);s.a},"3f68":function(e,t,r){"use strict";var a=r("8309"),s=r.n(a);s.a},"450f":function(e,t,r){},4788:function(e,t,r){"use strict";var a=r("450f"),s=r.n(a);s.a},5642:function(e,t,r){"use strict";var a=r("d69d"),s=r.n(a);s.a},"56d7":function(e,t,r){"use strict";r.r(t);r("db4d"),r("54ba");var a=r("2b0e"),s=r("5f5b"),i=(r("f9e3"),r("2dd8"),r("ecee")),o=r("c074"),n=r("ad3d");i["c"].add(o["a"],o["i"],o["d"],o["h"],o["e"],o["j"],o["c"],o["l"],o["f"],o["k"],o["b"],o["g"]),a["default"].component("font-awesome-icon",n["a"]);var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-navbar",{staticClass:"mb-4",attrs:{toggleable:"md",variant:"light"}},[r("b-container",[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"Start",active:"/Start"===e.$route.path}},[e._v("Start")]),r("b-nav-item",{attrs:{to:"General",active:"/General"===e.$route.path}},[e._v("General")]),r("b-nav-item",{attrs:{to:"Mapping",active:"/Mapping"===e.$route.path}},[e._v("I/O Mapping")]),r("b-nav-item",{attrs:{to:"Motors",active:"/Motors"===e.$route.path}},[e._v("Motors")]),r("b-nav-item",{attrs:{to:"Endstops",active:"/Endstops"===e.$route.path}},[e._v("Endstops")]),r("b-nav-item",{attrs:{to:"Heaters",active:"/Heaters"===e.$route.path}},[e._v("Heaters")]),r("b-nav-item",{attrs:{to:"Fans",active:"/Fans"===e.$route.path}},[e._v("Fans")]),r("b-nav-item",{attrs:{to:"Tools",active:"/Tools"===e.$route.path}},[e._v("Tools")]),r("b-nav-item",{attrs:{to:"Compensation",active:"/Compensation"===e.$route.path}},[e._v("Compensation")]),r("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:"/Display"===e.$route.path||e.board.supportsDisplay,expression:"$route.path === '/Display' || board.supportsDisplay"}],attrs:{to:"Display",active:"/Display"===e.$route.path}},[e._v("Display")]),r("b-nav-item",{directives:[{name:"show",rawName:"v-show",value:"/Network"===e.$route.path||e.template.standalone,expression:"$route.path === '/Network' || template.standalone"}],attrs:{to:"Network",active:"/Network"===e.$route.path}},[e._v("Network")]),r("b-nav-item",{attrs:{to:"Finish",active:"/Finish"===e.$route.path}},[e._v("Finish")])],1)],1)],1),r("b-form",{ref:"mainForm"},[r("keep-alive",[r("router-view")],1)],1),r("b-container",{staticClass:"mt-3"},[r("ul",{staticClass:"pagination float-left"},[r("li",{staticClass:"page-item",class:{disabled:e.isFirstPage}},[r("b-link",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.goToPreviousPage(t)}}},[e._v(" « Back ")])],1)]),r("ul",{staticClass:"pagination float-right"},[r("li",{staticClass:"page-item"},[r("b-link",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.goToNextPage(t)}}},[e._v(" "+e._s(e.isLastPage?"Finish":"Next")+" » ")])],1)])]),r("b-modal",{ref:"errorModal",attrs:{"ok-only":!0,title:"Invalid input"},on:{hidden:e.highlightErrors}},[r("h4",[e._v("This page contains errors.")]),r("h5",[e._v("Please fix them before you continue.")])]),r("b-modal",{ref:"ioErrorModal",attrs:{"ok-only":!0,title:"Invalid I/O Mapping"}},[r("h4",[e._v("Your configuration contains errors.")]),r("h5",[e._v("Check the I/O Mapping page before you continue.")])]),r("b-modal",{ref:"finishModal",attrs:{size:"lg",title:"Configuration Ready"},on:{show:e.finishShow}},[e.dwcLink||e.iapLink||e.rrfLink?[r("p",[e._v("Put the RepRapFirmware files in the /sys directory and extract Duet Web Control bundle to the /www directory of your SD card. If you are using Duet Web Control, upload those files on the Settings page.")]),r("b-card",{staticClass:"mb-3",attrs:{"bg-variant":"light"}},[r("ul",{staticClass:"pl-4 mb-0"},[r("li",{directives:[{name:"show",rawName:"v-show",value:e.iapLink,expression:"iapLink"}]},[r("a",{attrs:{href:e.iapLink,target:"_blank"}},[e._v(" RepRapFirmware IAP utility for firmware updates ")])]),r("li",{directives:[{name:"show",rawName:"v-show",value:e.rrfLink,expression:"rrfLink"}]},[r("a",{attrs:{href:e.rrfLink,target:"_blank"}},[e._v(" RepRapFirmware "+e._s(e.rrfVersion)+" ")])]),r("li",{directives:[{name:"show",rawName:"v-show",value:e.dwcLink,expression:"dwcLink"}]},[r("a",{attrs:{href:e.dwcLink,target:"_blank"}},[e._v(" Duet Web Control "+e._s(e.dwcVersion)+" ")])])])])]:e._e(),r("p",[e._v("The following system files will be generated:")]),r("b-card",{ref:"finishFiles",staticClass:"mb-3",attrs:{"bg-variant":"light"}},[0==e.files.length?r("span",{domProps:{innerHTML:e._s(e.message)}}):r("ul",{staticClass:"pl-4 mb-0"},e._l(e.files,(function(t){return r("li",[r("b-link",{domProps:{textContent:e._s(t)},on:{click:function(r){return e.showFile(t)}}})],1)})),0)]),r("p",[e._v("If you are using Duet Web Control, you can upload the ZIP file(s) "),r("u",[e._v("without extracting")]),e._v(" on the Settings page. Otherwise you can extract the contents of this configuration bundle directly to the root of your SD card.")]),r("p",[e._v("See "),r("a",{attrs:{href:"https://duet3d.com/wiki/SD_card_folder_structure",target:"_blank"}},[e._v("this page")]),e._v(" for further information about the purpose of these files.")]),r("template",{slot:"modal-footer"},[r("a",{staticClass:"btn btn-secondary",attrs:{href:e.configLink,download:"config.json"}},[r("font-awesome-icon",{attrs:{icon:"save"}}),e._v(" Download JSON template ")],1),r("b-button",{attrs:{variant:"primary",disabled:e.generatingZIP||0==e.files.length},on:{click:e.generateZIP}},[r("font-awesome-icon",{attrs:{icon:e.generatingZIP?"hourglass":"download"}}),e._v(" "+e._s(e.generatingZIP?"Generating ZIP bundle...":"Download configuration bundle as ZIP file")+" ")],1)],1)],2)],1)},p=[],d=r("2f62"),m=r("5935"),u=r("21a6"),c=r.n(u),h=r("d491"),b=r("c4e3"),v=r.n(b),f={"Duex 2":{isToolBoard:!1,numDrives:2,heaterPorts:["duex.e2heat","duex.e3heat"],fanPorts:["duex.fan3","duex.fan4","duex.fan5","duex.fan6","duex.fan7","duex.fan8"],gpioPorts:["exp.e2stop","exp.e3stop","duex.gp1","duex.gp2","duex.gp3","duex.gp4"],analogPorts:["duex.e2temp","duex.e3temp"],pwmPorts:["duex.e2heat","duex.e3heat","duex.gp1","duex.gp2","duex.gp3","duex.gp4"],spiCsPorts:["duex.cs5"],blPorts:[],maxRtdBoards:2},"Duex 5":{isToolBoard:!1,numDrives:5,heaterPorts:["duex.e2heat","duex.e3heat","duex.e4heat","duex.e5heat","duex.e6heat"],fanPorts:["duex.fan3","duex.fan4","duex.fan5","duex.fan6","duex.fan7","duex.fan8"],gpioPorts:["exp.e2stop","exp.e3stop","exp.e4stop","exp.e5stop","exp.e6stop","duex.gp1","duex.gp2","duex.gp3","duex.gp4","duex.pwm1","duex.pwm2","duex.pwm3","duex.pwm4","duex.pwm5"],analogPorts:["duex.e2temp","duex.e3temp","duex.e4temp","duex.e5temp","duex.e6temp"],pwmPorts:["duex.e2heat","duex.e3heat","duex.e4heat","duex.e5heat","duex.e6heat","duex.gp1","duex.gp2","duex.gp3","duex.gp4","duex.pwm1","duex.pwm2","duex.pwm3","duex.pwm4","duex.pwm5"],spiCsPorts:["duex.cs5"],blPorts:[],maxRtdBoards:2},M5:{isToolBoard:!1,numDrives:5,heaterPorts:["e3heat","e4heat","e5heat","e6heat","e7heat"],fanPorts:["fan_M1","fan_M2","fan_M3","fan_M4","fan_M5"],gpioPorts:[,"e3stop","e4stop","e5stop","e6stop","e7stop"],analogPorts:["e3temp","e4temp","e5temp","e6temp","e7temp"],pwmPorts:["e3heat","e4heat","e5heat","e6heat","e7heat","fan_M1","fan_M2","fan_M3","fan_M4","fan_M5"],spiCsPorts:[],blPorts:[],maxRtdBoards:0},"BTT EXP-MOT":{isToolBoard:!1,numDrives:2,heaterPorts:[],fanPorts:[],gpioPorts:[],analogPorts:[],pwmPorts:[],spiCsPorts:[],blPorts:[],maxRtdBoards:2},EXP3HC:{isToolBoard:!1,numDrives:3,heaterPorts:["out0","out1","out2"],fanPorts:["out3","out4","out5","out6","out7","out8"],gpioPorts:["io1.out","io1.in","io2.out","io2.in","io3.out","io3.in","io4.out","io4.in","io5.out","io5.in","out3.tach","out4.tach","out5.tach"],analogPorts:["temp0","temp1","temp2","io1.in","io2.in","io5.in"],pwmPorts:["io1.out","io4.out"],spiCsPorts:[],blPorts:[],maxRtdBoards:2},TOOL1LC:{isToolBoard:!0,numDrives:1,heaterPorts:["out0"],fanPorts:["out1","out2"],gpioPorts:["io0.out","io0.in","io1.out","io1.in","io2.in","out1.tach","out2.tach"],analogPorts:["temp0","temp1","io0.in"],pwmPorts:["io0.out"],spiCsPorts:[],blPorts:[],maxRtdBoards:0}},g={getDefaultTemplate(){return{board:"smoothieboard",expansion_boards:[],firmware:3,standalone:!0,nvram:!1,auto_save:{enabled:!1,save_threshold:10,resume_threshold:11,gcodes_to_run:"M913 X0 Y0 G91 M83 G1 Z3 E-5 F1000"},display:{type:0,encoder_steps:4,spi_frequency:2e6,menus:[{name:"main",value:""}],images:[]},externalSDCard:{present:!1,spi_frequency:4e6},geometry:{type:"cartesian",mins:[0,0,0],maxes:[230,210,200],delta_radius:105.6,homed_height:250,low_dive_height:!1,max_carriage_travel:260,print_radius:85,rod_length:215,z_min:0},drives:[{direction:1,microstepping:16,microstepping_interpolation:!0,steps_per_mm:80,instant_dv:15,max_speed:100,acceleration:500,current:800,driver:0,driver_v3:"0.0",endstop_pin:"xstop",endstop_type:1,endstop_location:1,stepperDriver:"",stepperDriverTimings:""},{direction:1,microstepping:16,microstepping_interpolation:!0,steps_per_mm:80,instant_dv:15,max_speed:100,acceleration:500,current:800,driver:1,driver_v3:"0.1",endstop_pin:"ystop",endstop_type:1,endstop_location:1,stepperDriver:"",stepperDriverTimings:""},{direction:1,microstepping:16,microstepping_interpolation:!0,steps_per_mm:400,instant_dv:.2,max_speed:3,acceleration:20,current:800,driver:2,driver_v3:"0.2",endstop_pin:"zstop",endstop:null,endstop_type:3,endstop_location:1,stepperDriver:"",stepperDriverTimings:""},{direction:1,microstepping:16,microstepping_interpolation:!0,steps_per_mm:420,instant_dv:2,max_speed:20,acceleration:250,current:800,driver:3,driver_v3:"0.3",stepperDriver:"",stepperDriverTimings:""}],idle:{used:!0,factor:30,timeout:30},homing_speed_fast:30,homing_speed_slow:6,travel_speed:100,z_dive_height:5,slow_homing:!1,probe:{type:"unmodulated",recovery_time:.4,trigger_height:2.5,trigger_value:500,x_offset:0,y_offset:0,speed:2,deploy:!1,points:[],pwm_channel:3,pwm_inverted:!0,pwm_pin:null,input_pin:null},bed_is_nozzle:!1,bed:{present:!0,use_pid:!0,heater:0},chamber:{present:!1,use_pid:!1,heater:2},heaters:[{temp_limit:120,scale_factor:100,series:4700,thermistor:1e5,beta:4138,a:.0005717725,b:.0002416626,c:0,channel:0,sensor:0,output_pin:"bed",sensor_type:"thermistor",sensor_pin:"bedtemp"},{temp_limit:280,scale_factor:100,series:4700,thermistor:1e5,beta:4138,a:.0005717725,b:.0002416626,c:0,channel:1,sensor:1,output_pin:"e0heat",sensor_type:"thermistor",sensor_pin:"e0temp"}],num_nozzles:1,toolchange_wait_for_temperatures:!0,generate_t_code:!1,tools:[{mix_ratio:[],number:0,name:"",extruders:[0],heaters:[1],fans:[0],x_offset:0,y_offset:0,z_offset:0}],compensation_x_offset:15,compensation_y_offset:15,peripheral_points:3,halfway_points:3,calibration_factors:6,probe_radius:85,mesh:{x_min:15,x_max:215,y_min:15,y_max:195,radius:85,spacing:20},home_first:!1,orthogonal:{compensation:!1,height:50,deviations:[0,0,0]},network:{enabled:!1,mac_address:"",name:"My Printer",password:"",ssid:"",ssid_password:"",dhcp:!0,ip:"192.168.1.20",netmask:"255.255.255.0",gateway:"192.168.1.1",protocols:{http:!0,ftp:!1,telnet:!1},espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",espRXTX:!1,serialRxPin:"0.3",serialTxPin:"0.2",serialRxPinalt:"4.29",serialTxPinalt:"4.28"},fans:[{name:"",value:0,inverted:!1,frequency:500,thermostatic:!1,heaters:[],trigger_temperature:45,output_pin:"fan0"}],custom_settings:""}},isSamePin(e,t){let r="",a="";if(e)for(let s=0;s<e.length;s++)"!"!==e[s]&&"^"!==e[s]&&(r+=e[s]);if(t)for(let s=0;s<t.length;s++)"!"!==t[s]&&"^"!==t[s]&&(a+=t[s]);return r===a||"0."+r===a||r==="0."+a},isPinBlocked(e,t){const r=this.isSamePin;return e.drives.some(e=>e.endstop_pin&&r(e.endstop_pin,t))||e.fans.some(e=>r(e.output_pin,t))||e.heaters.some(e=>r(e.output_pin,t)||r(e.sensor_pin,t))||r(e.probe.input_pin,t)||r(e.probe.pwm_pin,t)},getPins(e,t,r,a,s,i){const o=[],n=t[r];s||o.push({text:"(not assigned)",value:null,disabled:!1});for(let d=0;d<n.length;d++)if((!e.board.startsWith("duet3")||void 0==i||-1!==n[d].indexOf(i?"in":"out"))&&("pwmPorts"!==r||-1===n[d].indexOf("exp")||0===e.expansion_boards.length)){const t=!this.isSamePin(a,n[d])&&this.isPinBlocked(e,n[d]);o.push({text:n[d],value:n[d],disabled:t}),i?(o.push({text:n[d]+" (active-low)",value:"!"+n[d],disabled:t}),o.push({text:n[d]+" (pull-up)",value:"^"+n[d],disabled:t}),o.push({text:n[d]+" (active-low, pull-up)",value:"!^"+n[d],disabled:t})):"pwmPorts"!==r&&o.push({text:n[d]+" (inverted)",value:"!"+n[d],disabled:t})}let l=1,p=121;for(let d=0;d<e.expansion_boards.length;d++){const t=f[e.expansion_boards[d]],s=t.isToolBoard?p++:l++,n=t[r];for(let r=0;r<n.length;r++)if(void 0===i||!e.board.startsWith("duet3")||-1!==n[r].indexOf(i?"in":"out")){const t=e.board.startsWith("duet3")?`Board ${s} - ${n[r]}`:n[r],l=e.board.startsWith("duet3")?`${s}.${n[r]}`:n[r],p=!this.isSamePin(a,l)&&this.isPinBlocked(e,l);o.push({text:t,value:l,disabled:p}),o.push({text:t+" (active-low)",value:"!"+l,disabled:p}),i&&(o.push({text:t+" (pull-up)",value:"^"+l,disabled:p}),o.push({text:t+" (active-low, pull-up)",value:"!^"+l,disabled:p}))}}return o},isValidPin(e,t,r){if(!t&&r)return!0;const a=_.getBoard(e.board);if(_.isValidPin(a,t,e.board.startsWith("duet3")?0:void 0))return!0;let s=1,i=121;return e.expansion_boards.some((function(r,a){const o=f[r],n=o.isToolBoard?i++:s++;return _.isValidPin(o,t,e.board.startsWith("duet3")?n:void 0)}))},validatePins(e){if(e.firmware<3)return!0;let t=!0;const r=this.isValidPin;return e.drives.forEach((function(a){a.hasOwnProperty("endstop_pin")&&!r(e,a.endstop_pin,!0)&&(a.endstop_pin=null,1!==a.endstop_type&&2!==a.endstop_type||(a.endstop_type=0),t=!1)})),e.fans.forEach((function(a){r(e,a.output_pin,!1)||(a.output_pin=null,t=!1)})),e.heaters.forEach((function(a){r(e,a.output_pin,!1)||(a.output_pin=null,t=!1),r(e,a.sensor_pin,!1)||(a.sensor_pin=null,a.sensor_type=null,t=!1)})),r(e,e.probe.input_pin,"noprobe"===e.probe.type)||(e.probe.input_pin=null,t=!1),r(e,e.probe.pwm_pin,"bltouch"!==e.probe.type)||(e.probe.pwm_pin=null,t=!0),(null===e.probe.input_pin||null===e.probe.pwm_pin&&"bltouch"===e.probe.type)&&(e.probe.type="noprobe",e.drives.forEach((function(e){3===e.endstop_type&&(e.endstop_type=0)}))),t},getMaxDrives(e){let t=_.getBoard(e.board).numDrives;return e.expansion_boards.forEach((function(e){const r=f[e];t+=r.numDrives})),t},getMaxHeaters(e){let t=_.getBoard(e.board).heaterPorts.length;return e.expansion_boards.forEach((function(e){const r=f[e];t+=r.heaterPorts.length})),t},getMaxFans(e){let t=_.getBoard(e.board).fanPorts.length;return e.expansion_boards.forEach((function(e){const r=f[e];t+=r.fanPorts.length})),t},fixFields(e,t){for(let r in t)if(t[r]instanceof Array)if(e.hasOwnProperty(r)){if(t[r].length>0)for(let a=0;a<e[r].length;a++)if(null!==e[r][a]){const s=t[r].length>a?t[r][a]:t[r][t[r].length-1];e[r][a]instanceof Object?this.fixFields(e[r][a],s):s instanceof Number&&e[r][a]instanceof String?e[r][a]=parseFloat(e[r][a]):s instanceof String&&e[r][a]instanceof Number&&(e[r][a]=e[r][a].toString())}}else e[r]=t[r].slice();else t[r]instanceof Object?e.hasOwnProperty(r)?this.fixFields(e[r],t[r]):e[r]=this.copy({},t[r]):e.hasOwnProperty(r)&&t[r]instanceof Number&&e[r]instanceof String?e[r]=parseFloat(e[r]):e.hasOwnProperty(r)&&t[r]instanceof String&&e[r]instanceof Number?e[r]=e[r].toString():e.hasOwnProperty(r)&&typeof t[r]===typeof e[r]||(e[r]=t[r]);for(let r in e)t.hasOwnProperty(r)||delete e[r]},update(e){e.drives&&e.drives.forEach((function(e,t){t<3&&!e.hasOwnProperty("endstop")&&(e.endstop=t)})),e.heaters&&e.heaters.forEach((function(e){e&&!e.hasOwnProperty("sensor")&&(e.sensor=e.channel)})),this.fixFields(e,this.getDefaultTemplate());const t=_.getBoard(e.board),r=this.getMaxDrives(e);if(e.drives.length>r)if(0===e.expansion_boards.length&&t.expansionBoards.length>0)e.expansion_boards.push(t.expansionBoards[t.expansionBoards.length-1]);else while(e.drives.length>r)e.drives.pop();e.firmware<1.21&&(e.firmware=1.21),e.auto_save.enabled=e.auto_save.enabled&&t.hasPowerFailureDetection,e.probe.deploy=e.probe.deploy||"bltouch"===e.probe.type,e.drives.forEach((function(r,a){(3==r.endstop_type&&"noprobe"===e.probe.type||4==r.endstop_type&&!t.hasMotorLoadDetection)&&(r.endstop_type=2)})),"delta"===e.geometry.type?(e.drives[0].endstop_location=2,e.drives[1].endstop_location=2,e.drives[2].endstop_location=2):e.slow_homing=!1,e.board.startsWith("duetm")&&(e.probe.pwm_channel=64,e.probe.pwm_inverted=!1),e.bed_is_nozzle&&(0==e.bed.heater&&(e.bed.heater=e.chamber.present&&1===e.chamber.heater?2:1),0==e.chamber.heater&&(e.chamber.heater=e.bed.present&&1===e.bed.heater?2:1)),e.heaters.forEach(e=>{null!=e&&(e.hasOwnProperty("a")&&delete e.a,e.hasOwnProperty("b")&&delete e.b)}),this.fixNozzles(e,this.getDefaultTemplate());while(e.fans.length>t.maxFans)e.fans.pop();e.tools.forEach((function(t){if(Math.max(t.mix_ratio.length,1)!==Math.max(t.extruders.length,1)&&(t.mix_ratio=[],t.extruders.length>1)){let e=1;for(let r=1;r<t.extruders.length;r++){const r=parseFloat((1/t.extruders.length).toFixed(2));e-=r,t.mix_ratio.push(r)}t.mix_ratio.push(parseFloat(e.toFixed(2)))}const r=t.extruders.filter(t=>t+3<e.drives.length);r.length!==t.extruders.length&&(t.extruders=r);const a=t.heaters.filter(t=>0===t&&e.bed_is_nozzle||t>0&&(!e.bed.present||e.bed.heater!==t)&&(!e.chamber.present||e.chamber.heater!==t)&&t<e.heaters.length&&null!==e.heaters[t]);a.length!==t.heaters.length&&(t.heaters=a)})),"delta"===e.geometry.type?(e.peripheral_points+e.halfway_points>16&&(e.halfway_points=3),e.calibration_factors>e.peripheral_points+e.halfway_points&&(e.calibration_factors=3),e.probe.points.length!==e.peripheral_points+e.halfway_points+1&&this.updateProbePoints(e)):e.probe.points=[]},copy(e,t=this.getDefaultTemplate()){let r={};for(let a in t)if(t[a]instanceof Array)if(e.hasOwnProperty(a)){r[a]=[];let s=void 0;for(let i=0;i<e[a].length;i++)t[a].length>i&&(s=t[a][i]),void 0!==s&&null!==e[a][i]&&e[a][i]instanceof Object?e[a][i]instanceof Array?r[a].push(e[a][i].slice()):r[a].push(this.copy(e[a][i],s)):r[a].push(e[a][i])}else r[a]=t[a].slice();else t[a]instanceof Object?e.hasOwnProperty(a)?r[a]=this.copy(e[a],t[a]):r[a]=this.copy({},t[a]):e.hasOwnProperty(a)&&typeof t[a]===typeof e[a]?r[a]=e[a]:e.hasOwnProperty(a)&&t[a].constructor instanceof Number&&e[a].constructor instanceof String?r[a]=parseFloat(e[a]):r[a]=t[a];return r},fixNozzles(e,t){const r=this.getMaxHeaters(e);while(e.heaters.length>r)e.heaters.pop();const a=this.getMaxDrives(e);while(e.drives.length>a)e.drives.pop();if(e.firmware<3){let a=0,s=0;for(let o=0;o<r;o++){const r=e.bed.present&&e.bed.heater===o||e.chamber.present&&e.chamber.heater===o,i=s>=e.num_nozzles&&!r||0===o&&!e.bed_is_nozzle&&!r||"bltouch"===e.probe.type&&e.probe.pwm_channel===o;let n;if(e.heaters.length<o+1||null===e.heaters[o]){if(i)n=null;else{if(r)n=Object.assign({},t.heaters[0]);else{const e=Math.min(t.heaters.length-1,1);n=Object.assign({},t.heaters[e])}n.channel=o,n.output_pin=null,n.sensor_pin=null,n.sensor_type=null}e.heaters.length<o+1?e.heaters.push(n):e.heaters[o]=n}else i?(e.heaters[o]=null,n=null):n=e.heaters[o];n&&(a++,e.bed.present&&e.bed.heater===o||e.chamber.present&&e.chamber.heater===o?e.bed.use_pid||(n.scale_factor=100):s++)}let i=e.heaters.length-1;while(i>0&&!e.heaters[i])e.heaters.pop(),i--}else{let r=e.num_nozzles;e.bed.present&&r++,e.chamber.present&&r++,r=Math.min(r,this.getMaxHeaters(e));for(let a=e.heaters.length;a<r;a++){let r;if(e.bed.present&&e.bed.heater===a||e.chamber.present&&e.chamber.heater===a)r=Object.assign({},t.heaters[0]);else{const e=Math.min(t.heaters.length-1,1);r=Object.assign({},t.heaters[e])}r.channel=a,r.output_pin=null,r.sensor_pin=null,r.sensor_type=null,e.heaters.push(r)}while(e.heaters.length>r)e.heaters.pop()}e.bed.present&&e.bed.heater>=e.heaters.length&&(e.bed.present=!1,this.fixNozzles(e)),e.chamber.present&&e.chamber.heater>=e.heaters.length&&(e.chamber.present=!1,this.fixNozzles(e)),e.tools.forEach((function(t){t.heaters=t.heaters.filter(t=>t>=0&&t<e.heaters.length&&null!==e.heaters[t])}))},updateProbePoints(e){if("delta"===e.geometry.type){if(!isNumber(e.probe_radius)||!isNumber(e.probe.x_offset)||!isNumber(e.probe.y_offset))return;const t=e.probe.points.slice();e.probe.points=[];for(let r=0;r<e.peripheral_points;r++){let a=e.probe_radius*Math.sin(2*Math.PI*r/e.peripheral_points),s=e.probe_radius*Math.cos(2*Math.PI*r/e.peripheral_points);const i=Math.sqrt(Math.pow(a+e.probe.x_offset,2)+Math.pow(s+e.probe.y_offset,2))+.1;if(i>e.probe_radius){const t=e.probe_radius/i;a*=t,s*=t}e.probe.points.push({x:a,y:s,z:t.length>r?t[r].z:0})}for(let r=0;r<e.halfway_points;r++){let a=e.probe_radius/2*Math.sin(2*Math.PI*r/e.halfway_points),s=e.probe_radius/2*Math.cos(2*Math.PI*r/e.halfway_points);const i=Math.sqrt(Math.pow(a+e.probe.x_offset,2)+Math.pow(s+e.probe.y_offset,2))+.1;if(i>e.probe_radius/2){const t=e.probe_radius/2/i;a*=t,s*=t}e.probe.points.push({x:a,y:s,z:t.length>e.peripheral_points+r?t[e.peripheral_points+r].z:0})}e.probe.points.push({x:0,y:0,z:0}),e.probe.points.forEach(e=>{e.x=parseFloat(e.x.toFixed(2)),e.y=parseFloat(e.y.toFixed(2))})}}},_={getBoards:()=>[{name:"smoothieboard",caption:"Smoothieboard",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!1,microsteppingInterpolation:!1,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["Q4","Q8","fan0"],pwmPorts:["Q4","bed","e0heat","e1heat","Q8","fan0"],gpioPorts:["xstop","xstopmax","ystop","ystopmax","zstop","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp","t3"],blPorts:[],spiCsPorts:[],hasEthernet:!0,hasWiFi:!1,hasESP:!1,hasPowerFailureDetection:!1,hasMotorLoadDetection:!1,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"A5984",stepperDriverTimings:"1.0:1.0:0.4:0.4",stepperDriverSmart:!1,serialRxPin:"",serialTxPin:"",espDataReadyPin:"",lpcTfrReadyPin:"",espResetPin:"",lpc:{externalSDCard:{csPin:"0.28",cardDetectPin:"0.27",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,lcd:{lcdCSPin:"0.16",lcdBeepPin:"1.31",encoderPinA:"3.25",encoderPinB:"3.26",encoderPinSw:"1.30",lcdDCPin:"NoPin",panelButtonPin:"2.11",spiChannel:0},diagnosticPin:"1.18"}},{name:"biquskr_1.1",caption:"SKR v1.1",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!1,microsteppingInterpolation:!1,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0"],pwmPorts:["bed","e0heat","e1heat","fan0"],gpioPorts:["xstop","xstopmax","ystop","ystopmax","zstop","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:[],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!1,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!1,serialRxPin:"0.3",serialTxPin:"0.2",espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",lpc:{externalSDCard:{csPin:"1.23",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["1.20","NoPin","1.18"]},lcd:{lcdCSPin:"0.16",lcdBeepPin:"1.30",encoderPinA:"3.26",encoderPinB:"3.25",encoderPinSw:"2.11",lcdDCPin:"0.18",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"biquskr_1.3",caption:"SKR v1.3",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0"],pwmPorts:["bed","e0heat","e1heat","fan0"],gpioPorts:["xstop","xstopmax","ystop","ystopmax","zstop","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:["servo0"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:["BTT EXP-MOT"],maxExpansionBoards:1,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"0.3",serialTxPin:"0.2",espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",lpc:{externalSDCard:{csPin:"0.16",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["1.20","NoPin","1.18"]},lcd:{lcdCSPin:"1.19",lcdBeepPin:"1.30",encoderPinA:"3.26",encoderPinB:"3.25",encoderPinSw:"0.28",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"biquskr_1.4",caption:"SKR v1.4",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0"],pwmPorts:["bed","e0heat","e1heat","fan0"],gpioPorts:["xstop","ystop","zstop","e0stop","e1stop","probe","pwrstop"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:["servo0"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:["BTT EXP-MOT"],maxExpansionBoards:1,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"4.29",serialTxPin:"4.28",espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",lpc:{externalSDCard:{csPin:"0.16",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["1.20","NoPin","1.18"]},lcd:{lcdCSPin:"1.19",lcdBeepPin:"1.30",encoderPinA:"3.26",encoderPinB:"3.25",encoderPinSw:"0.28",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"azsmz",caption:"Azsmz Mini",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!1,microsteppingInterpolation:!1,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0"],pwmPorts:["bed","e0heat","e1heat","fan0"],gpioPorts:["xstop","ystop","zstop","e0stop","e1stop","probe","servo0"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:[],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!1,hasPowerFailureDetection:!1,hasMotorLoadDetection:!1,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!1,serialRxPin:"0.3",serialTxPin:"0.2",espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",lpc:{externalSDCard:{csPin:"0.16",cardDetectPin:"3.25",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["NoPin","NoPin","NoPin"]},lcd:{lcdCSPin:"1.22",lcdBeepPin:"1.30",encoderPinA:"4.28",encoderPinB:"1.27",encoderPinSw:"3.26",lcdDCPin:"2.6",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"1.18"}},{name:"azteegX5_1.1",caption:"Azteeg X5 Mini v1.1",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!1,microsteppingInterpolation:!1,numDrives:4,heaterPorts:["bed","e0heat"],fanPorts:["fan0"],pwmPorts:["bed","e0heat","e1heat","fan0"],gpioPorts:["xstop","ystop","zstop","e0stop"],analogPorts:["bedtemp","e0temp"],blPorts:[],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!1,hasPowerFailureDetection:!1,hasMotorLoadDetection:!1,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!1,serialRxPin:"",serialTxPin:"",espDataReadyPin:"",lpcTfrReadyPin:"",espResetPin:"",lpc:{externalSDCard:{csPin:"1.23",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["NoPin","NoPin","NoPin"]},lcd:{lcdCSPin:"0.16",lcdBeepPin:"0.25",encoderPinA:"3.25",encoderPinB:"3.26",encoderPinSw:"2.11",lcdDCPin:"2.6",panelButtonPin:"1.22",spiChannel:2},diagnosticPin:"4.28"}},{name:"rearm",caption:"ReARM",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!1,microsteppingInterpolation:!1,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["e1heat"],pwmPorts:["bed","e0heat","e1heat","Servo0","Servo1","Servo3"],gpioPorts:["xstop","xstopmax","ystop","ystopmax","zstop","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:[],spiCsPorts:[],hasEthernet:!0,hasWiFi:!1,hasESP:!1,hasPowerFailureDetection:!1,hasMotorLoadDetection:!1,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!1,serialRxPin:"",serialTxPin:"",espDataReadyPin:"",lpcTfrReadyPin:"",espResetPin:"",lpc:{externalSDCard:{csPin:"1.23",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,lcd:{lcdCSPin:"0.16",lcdBeepPin:"1.30",encoderPinA:"3.25",encoderPinB:"3.26",encoderPinSw:"2.11",lcdDCPin:"2.6",panelButtonPin:"1.22",spiChannel:0},diagnosticPin:"4.28"}},{name:"mkssbase_1.3",caption:"MKS Sbase 1.3",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!1,microsteppingInterpolation:!1,numDrives:5,heaterPorts:["BED","E1","E2"],fanPorts:["FAN"],pwmPorts:["BED","E1","E2","FAN"],gpioPorts:["XMin","YMin","ZMin","XMax","YMax","ZMax"],analogPorts:["TH1","TH2","TH3","TH4"],blPorts:[],spiCsPorts:[],hasEthernet:!0,hasWiFi:!1,hasESP:!1,hasPowerFailureDetection:!1,hasMotorLoadDetection:!1,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"DRV8825",stepperDriverTimings:"1.9:1.9:0.65:0.65",stepperDriverSmart:!1,serialRxPin:"",serialTxPin:"",espDataReadyPin:"",lpcTfrReadyPin:"",espResetPin:"",lpc:{externalSDCard:{csPin:"0.28",cardDetectPin:"0.27",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,lcd:{lcdCSPin:"0.16",lcdBeepPin:"1.31",encoderPinA:"3.25",encoderPinB:"3.26",encoderPinSw:"1.30",lcdDCPin:"NoPin",panelButtonPin:"2.11",spiChannel:0},diagnosticPin:"1.18"}},{name:"mkssgenl_1.0",caption:"MKS SGen L v1.0",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0"],pwmPorts:["bed","e0heat","e1heat","fan0"],gpioPorts:["xstop","xstopmax","ystop","ystopmax","zstop","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:["servo0"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"0.3",serialTxPin:"0.2",espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",lpc:{externalSDCard:{csPin:"0.16",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["1.20","NoPin","1.18"]},lcd:{lcdCSPin:"1.19",lcdBeepPin:"1.30",encoderPinA:"3.26",encoderPinB:"3.25",encoderPinSw:"0.28",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"mkssgenl_2.0",caption:"MKS SGen L v2.0",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0","fan1"],pwmPorts:["bed","e0heat","e1heat","fan0","fan1"],gpioPorts:["xstop","xstopmax","ystop","ystopmax","zstop","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:["servo0","servo1"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"0.3",serialTxPin:"0.2",espDataReadyPin:"0.28",lpcTfrReadyPin:"1.30",espResetPin:"1.31",lpc:{externalSDCard:{csPin:"0.16",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["1.20","NoPin","1.18"]},lcd:{lcdCSPin:"1.19",lcdBeepPin:"1.30",encoderPinA:"3.26",encoderPinB:"3.25",encoderPinSw:"0.28",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"biquskr_e3t",caption:"SKR E3 Turbo",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:5,heaterPorts:["bed","e0heat","e1heat"],fanPorts:["fan0","fan1"],pwmPorts:["bed","e0heat","e1heat","fan0","fan1"],gpioPorts:["xstop","ystop","zstop","e0stop","e1stop","probe0","probe1","ptdet"],analogPorts:["bedtemp","e0temp","e1temp"],blPorts:["servo0","servo1"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!1,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"0.3",serialTxPin:"0.2",espDataReadyPin:"0.19",lpcTfrReadyPin:"0.20",espResetPin:"2.8",lpc:{externalSDCard:{csPin:"0.16",cardDetectPin:"1.31",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["1.20","NoPin","1.18"]},lcd:{lcdCSPin:"1.19",lcdBeepPin:"1.30",encoderPinA:"3.26",encoderPinB:"3.25",encoderPinSw:"0.28",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"biquskrpro_1.1",caption:"SKR Pro",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:6,heaterPorts:["bed","e0heat","e1heat","e2heat"],fanPorts:["fan0","fan1","fan2"],pwmPorts:["bed","e0heat","e1heat","e2heat","fan0","fan1","fan2"],gpioPorts:["xstop","ystop","zstop","e0stop","e1stop","e2stop","probe"],analogPorts:["bedtemp","e0temp","e1temp","e2temp"],blPorts:["servo0"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!1,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:["BTT EXP-MOT"],maxExpansionBoards:1,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"PD9",serialTxPin:"PD8",espDataReadyPin:"A.8",lpcTfrReadyPin:"G.4",espResetPin:"F.12",lpc:{externalSDCard:{csPin:"NoPin",cardDetectPin:"NoPin",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["NoPin","NoPin","NoPin"]},lcd:{lcdCSPin:"NoPin",lcdBeepPin:"NoPin",encoderPinA:"NoPin",encoderPinB:"NoPin",encoderPinSw:"NoPin",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"biqugtr_1.0",caption:"SKR GTR v1.0",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:6,heaterPorts:["bed","e0heat","e1heat","e2heat"],fanPorts:["fan0","fan1","fan2"],pwmPorts:["bed","e0heat","e1heat","e2heat","fan0","fan1","fan2"],gpioPorts:["xstop","ystop","zstop","e0stop","e1stop","e2stop","probe"],analogPorts:["bedtemp","e0temp","e1temp","e2temp"],blPorts:["servo0"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!1,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:["M5"],maxExpansionBoards:1,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"PC7",serialTxPin:"PC6",espDataReadyPin:"A.15",lpcTfrReadyPin:"C.11",espResetPin:"B.10",lpc:{externalSDCard:{csPin:"NoPin",cardDetectPin:"NoPin",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["NoPin","NoPin","NoPin"]},lcd:{lcdCSPin:"NoPin",lcdBeepPin:"NoPin",encoderPinA:"NoPin",encoderPinB:"NoPin",encoderPinSw:"NoPin",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}},{name:"fly_cdy",caption:"Fly-CDY",motorWarningCurrent:1200,motorLimitCurrent:2e3,seriesResistor:4700,microstepping:!0,microsteppingInterpolation:!0,numDrives:6,heaterPorts:["bed","e0heat","e1heat","e2heat"],fanPorts:["fan0","fan1","fan2"],pwmPorts:["bed","e0heat","e1heat","e2heat","fan0","fan1","fan2"],gpioPorts:["xstop","ystop","zstop","xstopmax","ystopmax","zstopmax"],analogPorts:["bedtemp","e0temp","e1temp","e2temp"],blPorts:["servo0"],spiCsPorts:[],hasEthernet:!1,hasWiFi:!1,hasESP:!0,hasPowerFailureDetection:!1,hasMotorLoadDetection:!0,supportsDisplay:!0,supports12864:!0,firmwareFile:"firmware.bin",iapFile:"",expansionBoards:[],maxExpansionBoards:0,stepperDriver:"",stepperDriverTimings:"",stepperDriverSmart:!0,serialRxPin:"0.1",serialTxPin:"0.0",espDataReadyPin:"0.28",lpcTfrReadyPin:"2.7",espResetPin:"2.6",lpc:{externalSDCard:{csPin:"NoPin",cardDetectPin:"NoPin",spiFrequencyHz:4e6,spiChannel:0},internalSDCardSPIFrequencyHz:25e6,softwareSPI:{pins:["NoPin","NoPin","NoPin"]},lcd:{lcdCSPin:"NoPin",lcdBeepPin:"NoPin",encoderPinA:"NoPin",encoderPinB:"NoPin",encoderPinSw:"NoPin",lcdDCPin:"NoPin",panelButtonPin:"NoPin",spiChannel:2},diagnosticPin:"NoPin"}}],getBoard(e){const t=this.getBoards();for(let r in t)if(t[r].name==e)return t[r];throw"Invalid board"},isValidPin(e,t,r){const a=["heaterPorts","fanPorts","pwmPorts","gpioPorts","analogPorts","spiCsPorts","blPorts"];return a.some((function(a){return e[a].some((function(e){return!r&&g.isSamePin(t,e)||void 0!==r&&g.isSamePin(t,`${r}.${e}`)}))}))}},x=r("9224"),w={alignComments(e){let t=e.split("\n"),r=0;t.forEach((function(e){var t=e.indexOf(";");1==t&&(t=e.substr(1).indexOf(";")-1),t>r&&(r=t)}));let a="";return t.forEach((function(e){let t=e.indexOf(";"),s=0==t;if(s&&(e=e.substr(1),t=e.indexOf(";")),-1==t)a+=(s?";":"")+e+"\n";else{let i=(s?";":"")+e.substr(0,t-1),o=e.substr(t);for(let e=i.length;e<r;e++)i+=" ";a+=i+o+"\n"}})),a},downloadFile(e,t,r){return new Promise((a,s)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=t,r&&i.setRequestHeader("Accept",r),i.onload=function(){i.status>=200&&i.status<300?a(i.response):s(`${i.status} ${i.statusText}`)},i.onerror=()=>s("Network error"),i.send(null)})},async compileFile(e,t){const r=await this.downloadFile(e,"text");return Object(h["render"])(r,t)},async compileTemplate(e,t,r){let a={template:t,board:r,util:this.util(t),version:x["a"]},s="templates/"+e.replace(".g",".ejs");if(e.startsWith("tfree"))s="templates/tfree.ejs",a.index=parseInt(e.match("tfree(\\d+).g")[1]);else if(e.startsWith("tpre"))s="templates/tpre.ejs",a.index=parseInt(e.match("tpre(\\d+).g")[1]);else if(e.startsWith("tpost"))s="templates/tpost.ejs",a.index=parseInt(e.match("tpost(\\d+).g")[1]);else if(e.startsWith("board")){s="templates/board.ejs";const e=await this.compileFile(s,a);return e}const i=await this.compileFile(s,a);return this.alignComments(i)},async compileZIP(e,t,r,a,s,i){let o=new v.a;o.file("sys/config.json",JSON.stringify(t)),t.display.type&&(t.display.menus.forEach((function(e){o.file("menu/"+e.name,e.value)})),t.display.images.forEach((function(e){o.file("menu/"+e.name,e.value)})));for(let l=0;l<e.length;l++)try{const a=await this.compileTemplate(e[l],t,r);o.file("sys/"+e[l],a)}catch(n){throw`Failed to create ${e[l]}: ${n}`}if(a)try{o.file("sys/"+a.name,a)}catch(n){throw`Failed to integrate ${a.name}: ${n}`}if(s)try{o.file("sys/"+s.name,s)}catch(n){throw`Failed to integrate ${a.name}: ${n}`}if(i)try{const e=new v.a,t=[];await e.loadAsync(i),e.forEach((function(e,r){t.push(r.async("blob").then(e=>o.file("www/"+r.name,e)))})),await Promise.all(t)}catch(n){throw"Failed to integrate DWC bundle: "+n}return await o.generateAsync({type:"blob"})},canDownloadFiles:v.a.support.blob,util(e){return{getFirmwareString(){switch(e.firmware){case 1.16:return"1.16 or older";case 1.17:return"1.17 to 1.19";case 1.2:return"1.20";case 1.21:return"1.21";case 2:return"2.00";case 2.03:return"2.03";case 3:return"3"}return e.firmware.toString()},formatValue(e,t,r){return isNumber(e)?(e*t).toFixed(r):e},makeDriveString(t,r,a=2,s){let i="";(void 0===s||s(e.drives[0],0))&&(i+=" X"+this.formatValue(e.drives[0][t],r,a)),(void 0===s||s(e.drives[1],1))&&(i+=" Y"+this.formatValue(e.drives[1][t],r,a)),(void 0===s||s(e.drives[2],2))&&(i+=" Z"+this.formatValue(e.drives[2][t],r,a));for(let o=3;o<e.drives.length;o++)(void 0===s||s(e.drives[o],o))&&(i+=3===o?" E"+this.formatValue(e.drives[o][t],r,a):":"+this.formatValue(e.drives[o][t],r,a));return i.substr(1)},formatDriver(t){if(e.firmware>=3){if(e.board.startsWith("duet3")||-1===t.driver_v3.indexOf("."))return t.driver_v3;const r=parseInt(t.driver_v3.split(".")[1]);return-1!==t.driver_v3.indexOf("1.")?r+_.getBoard(e.board).numDrives:r}return t.driver},makeDriverString(){let t="";t+=" X"+this.formatDriver(e.drives[0]),t+=" Y"+this.formatDriver(e.drives[1]),t+=" Z"+this.formatDriver(e.drives[2]);for(let r=3;r<e.drives.length;r++)t+=3===r?" E"+this.formatDriver(e.drives[3]):":"+this.formatDriver(e.drives[r]);return t.substr(1)},getFirstProbePoint(t){return 0==e.probe.points?0==t?e.mesh.x_min:e.mesh.y_min:0==t?e.probe.points[0].x:e.probe.points[0].y},makePlainArrayString(e){let t="";for(var r=0;r<e.length;r++)t+=e[r],r!=e.length-1&&(t+=", ");return t}}}},y=r("8c4f"),P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("div",{staticClass:"text-center"},[r("h2",{staticClass:"mb-4"},[e._v("Welcome to the RepRapFirmware Configuration Tool (for LPC1768/1769 based boards)")]),r("h4",{staticClass:"text-muted mb-5"},[e._v("Please follow this wizard to obtain an individual configuration bundle for your printer")])]),r("b-card",{staticClass:"mb-3",attrs:{"bg-variant":"light"}},[r("p",[e._v("If you are using a printer that was originally shipped with RepRapFirmware, you can select a predefined template here:")]),r("b-form-group",[r("p",[e._v("You can create your own individual configuration by creating a new one from scratch or by loading an existing JSON template:")]),r("b-form-radio-group",{attrs:{name:"machine",stacked:""},model:{value:e.selectedMachine,callback:function(t){e.selectedMachine=t},expression:"selectedMachine"}},[r("b-form-radio",{attrs:{value:"custom"}},[e._v("Custom configuration")]),r("b-form-radio",{attrs:{value:"existing"}},[e._v("Use existing configuration")])],1)],1)],1),r("div",{staticClass:"text-center mt-4"},[r("span",{staticClass:"text-muted"},[e._v("Note: If you encounter problems, please report your problems on "),r("a",{attrs:{href:"https://github.com/jaysuk/configtool",target:"_blank"}},[e._v("GitHub")]),e._v(". "),r("br"),e._v(" Some configuration options may not be available yet. In this case please refer to the "),r("a",{attrs:{href:"https://duet3d.dozuki.com",target:"_blank"}},[e._v("Duet3D wiki")]),e._v(".")]),r("br"),r("br"),r("span",{staticClass:"text-muted"},[e._v("This web app is fully open-source and licensed under the terms of the "),r("a",{attrs:{href:"https://www.gnu.org/licenses/gpl-3.0.html",target:"_blank"}},[e._v("GPLv3")]),e._v(". Version "+e._s(e.version))])]),r("input",{ref:"inputJsonFile",attrs:{type:"file",accept:"application/json",hidden:""},on:{change:e.fileSelected}})],1)},C=[],k={created(){this.machineSelection=this.machine},data(){return{machineSelection:"custom",version:x["a"]}},computed:{...Object(d["e"])(["machine"]),selectedMachine:{get(){return this.machineSelection},set(e){if(this.machineSelection!=e)if(this.machineSelection=e,"custom"===e)this.setTemplate({name:"custom"});else if("existing"===e)this.$refs.inputJsonFile.click(),this.$nextTick((function(){this.machineSelection=this.machine}));else{const t=new XMLHttpRequest,r=this;t.open("GET",`machines/${e}.json`,!0),t.responseType="json",t.onload=function(){t.status>=200&&t.status<300?r.setTemplate({name:e,data:t.response}):(this.setTemplate({name:"custom"}),alert(`Failed to load template from server:\n\n${t.status} ${t.statusText}`))},t.onerror=function(){this.setTemplate({name:"custom"}),alert("Failed to load template from server:\n\nNetwork error")},t.send(null)}}}},methods:{...Object(d["d"])(["setTemplate"]),fileSelected(e){if(e.target.files.length>0){const t=new FileReader,r=this;t.onload=function(e){try{r.setTemplate({name:"existing",data:JSON.parse(e.target.result)})}catch(e){console.log(e),alert("Error: The specified file could not be read!\n\n"+e)}},t.readAsText(e.target.files[0])}}},watch:{machine(e){this.machineSelection=e}}},D=k,S=r("2877"),T=Object(S["a"])(D,P,C,!1,null,null,null),M=T.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{attrs:{header:"General Preferences"}},[r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"Board:"}},[r("b-form-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.board,expression:"preset.board"}],attrs:{value:e.template.board,title:"Board on which the firmware runs"},on:{change:function(t){return e.setSelectedBoard(t)}}},[r("option",{attrs:{value:"smoothieboard"}},[e._v("Smoothieboard")]),r("option",{attrs:{value:"biquskr_1.1"}},[e._v("SKR v1.1")]),r("option",{attrs:{value:"biquskr_1.3"}},[e._v("SKR v1.3")]),r("option",{attrs:{value:"biquskr_1.4"}},[e._v("SKR v1.4")]),r("option",{attrs:{value:"azsmz"}},[e._v("Azsmz Mini")]),r("option",{attrs:{value:"azteegX5_1.1"}},[e._v("Azteeg X5 Mini v1.1")]),r("option",{attrs:{value:"mkssbase_1.3"}},[e._v("MKS SBase 1.3")]),r("option",{attrs:{value:"mkssgenl_1.0"}},[e._v("MKS SGen L v1.0")]),r("option",{attrs:{value:"mkssgenl_2.0"}},[e._v("MKS SGen L v2.0")]),r("option",{attrs:{value:"rearm"}},[e._v("ReArm")]),r("option",{attrs:{value:"biquskrpro_1.1"}},[e._v("SKR Pro v1.1 and 1.2")]),r("option",{attrs:{value:"biqugtr_1.0"}},[e._v("SKR GTR v1.0")]),r("option",{attrs:{value:"fly_cdy"}},[e._v("Fly-CDY")]),r("option",{attrs:{value:"biquskr_e3t"}},[e._v("SKR E3 Turbo")])])],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Firmware version:"}},[r("b-form-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.firmware,expression:"preset.firmware"}],attrs:{value:e.template.firmware,disabled:e.template.board.startsWith("duet3")||e.template.board.startsWith("duet0"),title:"Version of the firmware running on your board"},on:{change:function(t){return e.setFirmware(t)}}},[r("option",{domProps:{value:3}},[e._v("3.0 or later (stable)")])])],1)],1),e.template.standalone?r("b-col",[r("b-form-group",{attrs:{label:"Printer Name:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.name,expression:"preset.network.name"}],attrs:{title:"Name of your printer (M550). If you use mDNS, you can access your printer via Myprinter.local",maxlength:"40",type:"text",required:""},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1)],1):e._e()],1),"biquskr_1.1"===e.template.board||"biquskr_1.3"===e.template.board||"biquskr_1.4"===e.template.board||"mkssgenl_1.0"===e.template.board||"mkssgenl_2.0"===e.template.board||"biquskrpro_1.1"===e.template.board||"biqugtr_1.0"===e.template.board?r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",modifiers:{left:!0}}],attrs:{title:"Run RepRapFirmware in stand-alone mode without an attached single-board computer"},model:{value:e.standalone,callback:function(t){e.standalone=t},expression:"standalone"}},[e._v("Run in standalone mode without SBC")]):e._e(),r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",modifiers:{left:!0}}],attrs:{title:"Load saved configuration parameters on start-up (M501)"},model:{value:e.nvram,callback:function(t){e.nvram=t},expression:"nvram"}},[e._v("Read config-override.g file at end of startup process (provides similar functionality to the EEPROM option in Marlin)")]),e.board.hasPowerFailureDetection?r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.auto_save.enabled,expression:"preset.auto_save.enabled",modifiers:{left:!0}}],attrs:{title:"Store the last valid print parameters on the SD card when a power failure occurs (M911)"},model:{value:e.autoSaveEnabled,callback:function(t){e.autoSaveEnabled=t},expression:"autoSaveEnabled"}},[e._v("Save print state on power failure")]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:e.autoSaveEnabled,expression:"autoSaveEnabled"}],staticClass:"mt-3 pl-4"},[r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"Auto Save Threshold:"}},[r("b-input-group",{attrs:{append:"V"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.autoSaveThreshold,callback:function(t){e.autoSaveThreshold=e._n(t)},expression:"autoSaveThreshold"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Resume Threshold:"}},[r("b-input-group",{attrs:{append:"V"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.autoSaveResumeThreshold,callback:function(t){e.autoSaveResumeThreshold=e._n(t)},expression:"autoSaveResumeThreshold"}})],1)],1)],1),r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"G-Codes to run when Auto-Saving is performed:"}},[r("b-form-input",{attrs:{type:"text",required:""},model:{value:e.autoSaveGCodes,callback:function(t){e.autoSaveGCodes="string"===typeof t?t.trim():t},expression:"autoSaveGCodes"}})],1)],1)],1),r("span",[e._v("Important: The file /sys/resurrect-prologue.g must be set up manually for resume to work (see "),r("a",{attrs:{href:"https://duet3d.dozuki.com/Wiki/Setting_up_to_resume_a_print_after_a_power_failure#Section_Setting_up_the_sys_resurrect_prologue_g_file",target:"_blank"}},[e._v("Duet3D wiki")]),e._v(")")])],1)],1),r("b-card",{staticClass:"mt-3",attrs:{"no-body":"",header:"Printer Geometry"}},[r("b-tabs",{attrs:{card:"",pills:""},model:{value:e.geometry,callback:function(t){e.geometry=t},expression:"geometry"}},[r("b-tab",{attrs:{title:"Cartesian","title-link-class":{"font-weight-bold":"cartesian"===e.preset.geometry.type}}},[r("geometry-form"),r("span",[e._v("This machine uses individual motors to drives each axis")])],1),r("b-tab",{attrs:{title:"CoreXY","title-link-class":{"font-weight-bold":"corexy"===e.preset.geometry.type}}},[r("geometry-form"),r("span",[e._v("This machine uses coupled motors to position the nozzle on the XY plane")])],1),r("b-tab",{attrs:{title:"CoreXZ","title-link-class":{"font-weight-bold":"corexz"===e.preset.geometry.type}}},[r("geometry-form"),r("span",[e._v("This machine uses coupled motors to position the nozzle on the XZ plane")])],1),r("b-tab",{attrs:{title:"Delta","title-link-class":{"font-weight-bold":"delta"===e.preset.geometry.type}}},[r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"Delta radius:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.delta_radius,expression:"preset.geometry.delta_radius"}],attrs:{title:"Horizontal distance subtended by each rod, measured between joint centres, when the effector is in the centre",min:e.printRadius,type:"number",step:"any",required:""},model:{value:e.deltaRadius,callback:function(t){e.deltaRadius=e._n(t)},expression:"deltaRadius"}})],1)],1),r("b-form-group",{attrs:{label:"Printable radius:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.print_radius,expression:"preset.geometry.print_radius"}],attrs:{title:"Safe printing radius",min:"1",max:e.deltaRadius,type:"number",step:"any",required:""},model:{value:e.printRadius,callback:function(t){e.printRadius=e._n(t)},expression:"printRadius"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Minimum Z:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.z_min,expression:"preset.geometry.z_min"}],attrs:{title:"Minimum allowed Z travel",max:e.homedHeight,type:"number",step:"any",required:""},model:{value:e.zMin,callback:function(t){e.zMin=e._n(t)},expression:"zMin"}})],1)],1),r("b-form-group",{attrs:{label:"Diagonal rod length:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.rod_length,expression:"preset.geometry.rod_length"}],attrs:{title:"Distance between the centre of your towers and the joint at the effector",min:"1",type:"number",step:"any",required:""},model:{value:e.rodLength,callback:function(t){e.rodLength=e._n(t)},expression:"rodLength"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Homed height:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.homed_height,expression:"preset.geometry.homed_height"}],attrs:{title:"Maximum build height of your printer",min:e.homedHeight,min:"1",max:e.maxCarriageTravel,type:"number",step:"any",required:""},model:{value:e.homedHeight,callback:function(t){e.homedHeight=e._n(t)},expression:"homedHeight"}})],1)],1),r("b-form-group",{attrs:{label:"Maximum carriage travel:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.max_carriage_travel,expression:"preset.geometry.max_carriage_travel"}],attrs:{title:"Maximum travel length in Z direction",type:"number",required:""},model:{value:e.maxCarriageTravel,callback:function(t){e.maxCarriageTravel=e._n(t)},expression:"maxCarriageTravel"}})],1)],1)],1)],1),r("span",[e._v("This machine uses towers to position the nozzle")])],1)],1)],1),r("b-card",{staticClass:"mt-3",attrs:{header:"Homing Preferences"}},[r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"Homing Speed (First Pass):"}},[r("b-input-group",{attrs:{append:"mm/s"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.homing_speed_fast,expression:"preset.homing_speed_fast"}],attrs:{title:"Homing is performed in two stages. First pass means the initial homing run",type:"number",step:"any",required:""},model:{value:e.homingSpeedFast,callback:function(t){e.homingSpeedFast=e._n(t)},expression:"homingSpeedFast"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Homing Speed (Second Pass):"}},[r("b-input-group",{attrs:{append:"mm/s"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.homing_speed_slow,expression:"preset.homing_speed_slow"}],attrs:{title:"Second pass means the second homing run after the endstops were triggered for the first time",type:"number",step:"any",required:""},model:{value:e.homingSpeedSlow,callback:function(t){e.homingSpeedSlow=e._n(t)},expression:"homingSpeedSlow"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Travel Speed:"}},[r("b-input-group",{attrs:{append:"mm/s"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.travel_speed,expression:"preset.travel_speed"}],attrs:{title:"Speed for travel moves during homing",type:"number",step:"any",required:""},model:{value:e.travelSpeed,callback:function(t){e.travelSpeed=e._n(t)},expression:"travelSpeed"}})],1)],1)],1),r("b-col",{attrs:{"align-self":"center"}},[r("b-form-group",{attrs:{label:"Z Dive Height:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.z_dive_height,expression:"preset.z_dive_height"}],attrs:{title:"Z lift amount for bed probing and for cartesian homing files",type:"number",step:"any",required:""},model:{value:e.zDiveHeight,callback:function(t){e.zDiveHeight=e._n(t)},expression:"zDiveHeight"}})],1)],1)],1)],1),r("b-checkbox",{directives:[{name:"show",rawName:"v-show",value:"delta"===e.template.geometry.type,expression:"template.geometry.type === 'delta'"},{name:"preset",rawName:"v-preset.left",value:e.preset.slow_homing,expression:"preset.slow_homing",modifiers:{left:!0}}],staticClass:"mb-2",attrs:{title:"Reduce homing speed. Recommended for initial calibration"},model:{value:e.slowHoming,callback:function(t){e.slowHoming=t},expression:"slowHoming"}},[e._v("Set initial homing speed to 10% for calibration and add a note to homedelta.g")]),r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.geometry.low_dive_height,expression:"preset.geometry.low_dive_height",modifiers:{left:!0}}],attrs:{title:"Generate an extra M558 code in config.g that you can remove after initial calibration"},model:{value:e.lowDiveHeight,callback:function(t){e.lowDiveHeight=t},expression:"lowDiveHeight"}},[e._v("Set dive height to 30mm for initial calibration")])],1),r("b-modal",{ref:"modalDuet06",attrs:{title:"Check your board",size:"lg","cancel-title":"No","cancel-variant":"danger","ok-title":"Yes","ok-variant":"success"},on:{ok:function(t){return e.setBoardSeriesResistor(4700)},cancel:function(t){return e.setBoardSeriesResistor(1e3)}}},[r("h4",[e._v('Is your Duet 0.6 board marked with a note saying "4.7K" or was it shipped with an original RepRapPro Ormerod 2?')]),r("br"),r("span",{staticClass:"text-muted"},[e._v("Note: Older Duet 0.6 boards use 1 kΩ series resistors.")])])],1)},F=[],z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"X minimum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.mins[0],expression:"preset.geometry.mins[0]"}],attrs:{title:"Distance between the low X axis end and the bed corner",max:e.xMax,type:"number",step:"any",required:""},model:{value:e.xMin,callback:function(t){e.xMin=e._n(t)},expression:"xMin"}})],1)],1)],1),r("b-col",{staticClass:"mr-2"},[r("b-form-group",{attrs:{label:"X maximum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.maxes[0],expression:"preset.geometry.maxes[0]"}],attrs:{title:"Maximum length of the X axis plus X minimum",min:e.xMin,type:"number",step:"any",required:""},model:{value:e.xMax,callback:function(t){e.xMax=e._n(t)},expression:"xMax"}})],1)],1)],1),r("b-col",{staticClass:"ml-1"},[r("b-form-group",{attrs:{label:"Y minimum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.mins[1],expression:"preset.geometry.mins[1]"}],attrs:{title:"Distance between the low Y axis end and the bed corner",max:e.yMax,type:"number",step:"any",required:""},model:{value:e.yMin,callback:function(t){e.yMin=e._n(t)},expression:"yMin"}})],1)],1)],1),r("b-col",{staticClass:"mr-1"},[r("b-form-group",{attrs:{label:"Y maximum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.maxes[1],expression:"preset.geometry.maxes[1]"}],attrs:{title:"Maximum length of the Y axis plus Y minimum",min:e.yMin,type:"number",step:"any",required:""},model:{value:e.yMax,callback:function(t){e.yMax=e._n(t)},expression:"yMax"}})],1)],1)],1),r("b-col",{staticClass:"ml-2"},[r("b-form-group",{attrs:{label:"Z minimum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.mins[2],expression:"preset.geometry.mins[2]"}],attrs:{title:"Minimum allowed Z position",max:e.zMax,type:"number",step:"any",required:""},model:{value:e.zMin,callback:function(t){e.zMin=e._n(t)},expression:"zMin"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Z maximum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.geometry.maxes[2],expression:"preset.geometry.maxes[2]"}],attrs:{title:"Maximum allowed Z position",min:e.zMin,type:"number",step:"any",required:""},model:{value:e.zMax,callback:function(t){e.zMax=e._n(t)},expression:"zMax"}})],1)],1)],1)],1)},R=[],E={computed:{...Object(d["e"])(["preset","template"]),xMin:{get(){return this.template.geometry.mins[0]},set(e){this.setAxisMinimum({axis:0,value:e})}},yMin:{get(){return this.template.geometry.mins[1]},set(e){this.setAxisMinimum({axis:1,value:e})}},zMin:{get(){return this.template.geometry.mins[2]},set(e){this.setAxisMinimum({axis:2,value:e})}},xMax:{get(){return this.template.geometry.maxes[0]},set(e){this.setAxisMaximum({axis:0,value:e})}},yMax:{get(){return this.template.geometry.maxes[1]},set(e){this.setAxisMaximum({axis:1,value:e})}},zMax:{get(){return this.template.geometry.maxes[2]},set(e){this.setAxisMaximum({axis:2,value:e})}}},methods:Object(d["d"])(["setAxisMinimum","setAxisMaximum"])},O=E,B=Object(S["a"])(O,z,R,!1,null,null,null),A=B.exports;const H=["cartesian","corexy","corexz","delta"];var I={components:{"geometry-form":A},computed:{...Object(d["e"])(["board","preset","template"]),...Object(m["b"])({name:"template.network.name",standalone:"template.standalone",nvram:"template.nvram",autoSaveEnabled:"template.auto_save.enabled",autoSaveThreshold:"template.auto_save.save_threshold",autoSaveResumeThreshold:"template.auto_save.resume_threshold",autoSaveGCodes:"template.auto_save.gcodes_to_run",deltaRadius:"template.geometry.delta_radius",zMin:"template.geometry.z_min",homedHeight:"template.geometry.homed_height",rodLength:"template.geometry.rod_length",maxCarriageTravel:"template.geometry.max_carriage_travel",homingSpeedFast:"template.homing_speed_fast",homingSpeedSlow:"template.homing_speed_slow",travelSpeed:"template.travel_speed",zDiveHeight:"template.z_dive_height",slowHoming:"template.slow_homing",lowDiveHeight:"template.geometry.low_dive_height"}),geometry:{get(){const e=this.template.geometry.type;return H.findIndex(t=>t===e)},set(e){this.setGeometry(H[e])}},printRadius:{get(){return this.template.geometry.print_radius},set(e){this.setPrintRadius(e)}}},methods:{...Object(d["b"])(["setBoard"]),...Object(d["d"])(["setFirmware","setBoardSeriesResistor","setGeometry","setPrintRadius"]),setSelectedBoard(e){this.setBoard(e),"duet06"===e&&this.$refs.modalDuet06.show()}}},q=I,$=Object(S["a"])(q,N,F,!1,null,null,null),j=$.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Expansion Boards")]),r("b-button-group",{staticClass:"float-right"},e._l(e.board.expansionBoards,(function(t){return r("b-button",{key:t,attrs:{size:"sm",variant:"success",disabled:!e.canAddExpansionBoard},on:{click:function(r){return e.addExpansionBoard(t)}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add "+e._s(t)+" ")],1)})),1)]},proxy:!0}])},[r("b-table-simple",{directives:[{name:"show",rawName:"v-show",value:e.template.expansion_boards.length>0,expression:"template.expansion_boards.length > 0"}],staticClass:"mb-0",attrs:{striped:"",hover:""}},[r("b-thead",[e.template.board.startsWith("duet3")?r("b-th",{staticClass:"no-wrap"},[e._v("CAN Address")]):e._e(),r("b-th",[e._v("Board Name")]),r("b-th",[e._v("Drives")]),r("b-th",[e._v("Heaters")]),r("b-th",[e._v("Fans")]),r("b-th",[e._v("GPIO Pins")]),r("b-th",{attrs:{width:"1%"}})],1),r("b-tbody",e._l(e.template.expansion_boards,(function(t,a){return r("b-tr",{key:a},[e.template.board.startsWith("duet3")?r("b-td",{attrs:{width:"9%"}},[e._v(" "+e._s(e.getCanAddress(a))+" ")]):e._e(),r("b-td",{attrs:{width:"18%"}},[e._v(" "+e._s(t)+" ")]),r("b-td",{attrs:{width:"18%"}},[e._v(" "+e._s(e.getBoardProp(t,"numDrives"))+" ")]),r("b-td",{attrs:{width:"18%"}},[e._v(" "+e._s(e.getBoardProp(t,"heaterPorts"))+" ")]),r("b-td",{attrs:{width:"18%"}},[e._v(" "+e._s(e.getBoardProp(t,"fanPorts"))+" ")]),r("b-td",{attrs:{width:"18%"}},[e._v(" "+e._s(e.getBoardProp(t,"gpioPorts"))+" ")]),r("b-td",{attrs:{width:"1%"}},[r("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.removeExpansionBoard(a)}}},[r("font-awesome-icon",{attrs:{icon:"minus"}})],1)],1)],1)})),1)],1),r("h3",{directives:[{name:"show",rawName:"v-show",value:0===e.template.expansion_boards.length,expression:"template.expansion_boards.length === 0"}],staticClass:"m-4 text-center text-muted"},[e._v(" No Expansion Boards configured ")])],1),e.template.firmware>=3?r("b-row",[r("b-col",{attrs:{cols:"5"}},[r("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Drives")]),r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.canAddExtruder},on:{click:e.addExtruder}},[r("font-awesome-icon",{attrs:{icon:"plus"}})],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveExtruder},on:{click:e.removeExtruder}},[r("font-awesome-icon",{attrs:{icon:"minus"}})],1)],1)]},proxy:!0}],null,!1,3826650514)},[r("b-table-simple",{staticClass:"mb-0",attrs:{striped:"",hover:""}},[r("b-thead",[r("b-th",[e._v(" Drive ")]),r("b-th",[e._v(" Driver ")]),r("b-th",[e._v(" Endstop Pin ")])],1),r("b-tbody",e._l(e.drives,(function(t,a){return r("b-tr",{key:a},[r("b-td",[e._v(" "+e._s(e.getDriveCaption(a))+" ")]),r("b-td",[r("b-select",{attrs:{state:e.validateDriver(t.driver_v3),size:"sm",options:e.getDrivers(t.driver_v3)},model:{value:t.driver_v3,callback:function(r){e.$set(t,"driver_v3",r)},expression:"drive.driver_v3"}})],1),r("b-td",[a<3?r("b-select",{attrs:{value:t.endstop_pin,state:e.isValidPin(t.endstop_pin,!0)&&void 0,size:"sm",options:e.getPins("gpioPorts",t.endstop_pin,!1,!0)},on:{change:function(t){return e.updateDrive({drive:a,ep:t})}}}):e._e()],1)],1)})),1)],1)],1),r("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Fan Mapping")]),r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.canAddFan},on:{click:function(t){return e.addFan()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}})],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveFan},on:{click:function(t){return e.removeFan()}}},[r("font-awesome-icon",{attrs:{icon:"minus"}})],1)],1)]},proxy:!0}],null,!1,3794552200)},[r("b-table-simple",{staticClass:"mb-0",attrs:{striped:"",hover:""}},[r("b-thead",[r("b-th",[e._v(" Fan ")]),r("b-th",[e._v(" Output ")])],1),r("b-tbody",e._l(e.fans,(function(t,a){return r("b-tr",{key:a},[r("b-td",[e._v(" Fan "+e._s(a)+" ")]),r("b-td",[r("b-select",{attrs:{value:t.output_pin,state:null!==t.output_pin&&void 0,size:"sm",options:e.getPins("fanPorts",t.output_pin,!0)},on:{change:function(t){return e.updateFan({fan:a,output_pin:t})}}})],1)],1)})),1)],1)],1)],1),r("b-col",{attrs:{cols:"7"}},[r("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Heaters")]),r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.canAddNozzle},on:{click:function(t){return e.addNozzle()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}})],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveHeater},on:{click:function(t){return e.removeHeater()}}},[r("font-awesome-icon",{attrs:{icon:"minus"}})],1)],1)]},proxy:!0}],null,!1,1743127249)},[r("b-table-simple",{staticClass:"mb-0",attrs:{striped:"",hover:""}},[r("b-thead",[r("b-th",[e._v(" Index ")]),r("b-th",[e._v(" Type ")]),r("b-th",[e._v(" Output ")]),r("b-th",[e._v(" Sensor ")])],1),r("b-tbody",e._l(e.heaters,(function(t,a){return r("b-tr",{key:a},[r("b-td",[e._v(" "+e._s(a)+" ")]),r("b-td",[r("b-select",{attrs:{value:e.getHeaterType(a),size:"sm",options:e.heaterTypes},on:{change:function(t){return e.setHeaterType(a,t)}}})],1),r("b-td",[r("b-select",{attrs:{value:t.output_pin,state:null!==t.output_pin&&void 0,size:"sm",options:e.getPins("heaterPorts",t.output_pin,!0)},on:{change:function(t){return e.updateHeater({heater:a,output_pin:t})}}})],1),r("b-td",[r("sensor-input",{attrs:{index:a,size:"sm"}})],1)],1)})),1)],1)],1),r("b-card",{staticClass:"mt-3",attrs:{header:"Z-Probe","no-body":""}},[r("b-table-simple",{staticClass:"mb-0",attrs:{striped:"",hover:""}},[r("b-thead",[r("b-th",[e._v(" Pin ")]),r("b-th",[e._v(" Assignment ")])],1),r("b-tbody",[r("b-tr",[r("b-td",[e._v(" Input Pin ")]),r("b-td",[r("b-select",{attrs:{value:e.template.probe.input_pin,state:e.isValidPin(e.template.probe.input_pin,!0)&&void 0,size:"sm",options:e.getPins("gpioPorts",e.template.probe.input_pin,!1)},on:{change:function(t){return e.setProbePin({inputPin:t})}}})],1)],1),r("b-tr",[r("b-td",[e._v(" PWM Control Channel (BLTouch only) ")]),r("b-td",[r("b-select",{attrs:{value:e.template.probe.pwm_pin,state:e.isValidPin(e.template.probe.pwm_pin,!0)&&void 0,size:"sm",options:e.getPins("blPorts",e.template.probe.pwm_pin,!1)},on:{change:function(t){return e.setProbePin({pwmPin:t})}}})],1)],1)],1)],1)],1)],1)],1):e._e()],1)},W=[],V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-select",{attrs:{value:e.value,state:e.isValid,size:e.size,title:"Assigned sensor channel for this heater"},on:{change:e.setValue}},e._l(e.sensors,(function(t,a){return r("optgroup",{attrs:{label:a}},e._l(t,(function(t){return r("option",{attrs:{disabled:t.disabled},domProps:{value:t.value,textContent:e._s(t.text)}})})),0)})),0)},X=[],Z={props:{index:{type:Number,required:!0},size:String},computed:{...Object(d["e"])({board:e=>e.board,template:e=>e.template}),value(){return this.template.firmware<3?this.template.heaters[this.index].channel:`${this.template.heaters[this.index].sensor_type}/${this.template.heaters[this.index].sensor_pin}`},isValid(){if(this.template.firmware>=3&&(null===this.template.heaters[this.index].sensor_type||null===this.template.heaters[this.index].sensor_pin))return!1},sensors(){const e={Thermistors:[],PT1000:[],"MAX31855 (K-Type Thermocouple)":[],"MAX31856 (K-Type Thermocouple)":[],"MAX31865 (PT100)":[]};if(this.template.firmware>=3){const t=this.value?this.value.split("/")[1]:null;for(let s=0;s<this.board.analogPorts.length;s++){const r=this.board.analogPorts[s],a=!g.isSamePin(t,r)&&g.isPinBlocked(this.template,r);e.Thermistors.push({text:r,value:"thermistor/"+r,disabled:a}),e.PT1000.push({text:"PT1000 on "+r,value:"pt1000/"+r,disabled:a})}for(let s=0;s<this.board.spiCsPorts.length;s++){const r=this.board.spiCsPorts[s],a=!g.isSamePin(t,r)&&g.isPinBlocked(this.template,r);e["MAX31855 (K-Type Thermocouple)"].push({text:"MAX31855 on "+r,value:"thermocouple-max31855/"+r,disabled:a}),e["MAX31856 (K-Type Thermocouple)"].push({text:"MAX31856 on "+r,value:"thermocouple-max31856/"+r,disabled:a}),e["MAX31865 (PT100)"].push({text:"MAX31865 on "+r,value:"rtd-max31865/"+r,disabled:a})}let r=1,a=121;for(let s=0;s<this.template.expansion_boards.length;s++){const i=f[this.template.expansion_boards[s]],o=i.isToolBoard?a++:r++,n=this.template.board.startsWith("duet3")?`Board ${o} - `:"",l=this.template.board.startsWith("duet3")?o+".":"";for(let r=0;r<i.analogPorts.length;r++){const a=l+i.analogPorts[r],s=!g.isSamePin(t,a)&&g.isPinBlocked(this.template,a);e.Thermistors.push({text:n+i.analogPorts[r],value:"thermistor/"+a,disabled:s}),e.PT1000.push({text:n+"PT1000 on "+i.analogPorts[r],value:"pt1000/"+a,disabled:s})}for(let r=0;r<i.spiCsPorts.length;r++){const a=l+i.spiCsPorts[r],s=!g.isSamePin(t,a)&&g.isPinBlocked(this.template,a);e["MAX31855 (K-Type Thermocouple)"].push({text:n+"MAX31855 on "+i.spiCsPorts[r],value:"thermocouple-max31855/"+a,disabled:s}),e["MAX31856 (K-Type Thermocouple)"].push({text:n+"MAX31856 on "+i.spiCsPorts[r],value:"thermocouple-max31856/"+a,disabled:s}),e["MAX31865 (PT100)"].push({text:n+"MAX31865 on "+i.spiCsPorts[r],value:"rtd-max31865/"+a,disabled:s})}}}else{let t=0;for(let r=0;r<this.board.analogPorts.length;r++)-1===this.board.analogPorts[r].indexOf("zprobe")&&(0===r?(e.Thermistors.push({value:0,text:"Bed Thermistor"}),e.PT1000.push({value:500,text:"PT1000 on Bed Input"})):3===r&&"duetm10"===this.board.name?(e.Thermistors.push({value:3,text:"C Thermistor"}),e.PT1000.push({value:503,text:"PT1000 on C Input"}),t++):(e.Thermistors.push({value:r,text:`E${r-1} Thermistor`}),e.PT1000.push({value:500+r,text:`PT1000 on E${r-1} Input`}),t++));for(let r=0;r<this.board.spiCsPorts.length;r++)e["MAX31855 (K-Type Thermocouple)"].push({value:100+r,text:"MAX31855 on CS"+(r+1)}),e["MAX31856 (K-Type Thermocouple)"].push({value:150+r,text:"MAX31856 on CS"+(r+1)}),e["MAX31865 (PT100)"].push({value:200+r,text:"MAX31865 on CS"+(r+1)});for(let r=0;r<this.template.expansion_boards.length;r++){const a=f[this.template.expansion_boards[r]];for(let r=0;r<a.analogPorts.length;r++)e.Thermistors.push({value:t+1,text:`E${t} Thermistor`}),e.PT1000.push({value:501+t,text:`PT1000 on E${t} Input`}),t++}}return e}},methods:{...Object(d["d"])(["updateHeater"]),setValue(e){if(this.template.firmware<3)this.updateHeater({heater:this.index,channel:parseInt(e)});else if(e){const t=e.split("/");this.updateHeater({heater:this.index,sensor_type:t[0],sensor_pin:t[1]})}}}},G=Z,Y=Object(S["a"])(G,V,X,!1,null,null,null),K=Y.exports,U={components:{"sensor-input":K},computed:{...Object(d["e"])({board:e=>e.board,preset:e=>e.preset,template:e=>e.template}),...Object(d["c"])(["canAddExpansionBoard","canAddExtruder","canRemoveExtruder","canAddNozzle","canRemoveNozzle","canAddFan","canRemoveFan"]),...Object(m["c"])(["template.drives","template.heaters","template.fans"]),canRemoveHeater(){return this.canRemoveNozzle||this.template.bed.present||this.template.chamber.present},heaterTypes(){return[{text:"Bed",value:0},{text:"Chamber",value:1},{text:"Nozzle",value:2}]}},methods:{...Object(d["d"])(["addExpansionBoard","removeExpansionBoard","addExtruder","removeExtruder","updateDrive","addNozzle","removeNozzle","updateBed","updateChamber","updateHeater","addFan","removeFan","updateFan","setProbePin"]),getCanAddress(e){let t=1,r=121;for(let a=0;a<=e;a++){const s=f[this.template.expansion_boards[a]],i=s.isToolBoard?r++:t++;if(a===e)return i}return"n/a"},getBoardProp(e,t){const r=f[e];return r[t]instanceof Array?r[t].length:r[t]},getPins(e,t,r,a){return g.getPins(this.template,this.board,e,t,r,a)},isValidPin(e,t){return g.isValidPin(this.template,e,t)},getDriveCaption(e){switch(e){case 0:return"X";case 1:return"Y";case 2:return"Z";default:return"E"+(e-3)}},getDriverCaption(e){if(this.template.board.startsWith("duet3")){if(e<this.board.numDrives)return"Driver "+e;let t=e-this.board.numDrives,r=1;for(let e=0;e<this.template.expansion_boards.length;e++){const a=f[this.template.expansion_boards[e]],s=a.numDrives;if(t<s)break;r++,t-=s}return`Board ${r} - Driver ${t}`}return this.getDriveCaption(e)},getDrivers(e){const t=[];let r=0;for(let a=0;a<this.board.numDrives;a++){const a="0."+r;t.push({text:this.getDriverCaption(r),value:a,disabled:r!==e&&this.drives.some(e=>e.driver_v3===a)}),r++}for(let a=0;a<this.template.expansion_boards.length;a++){const s=f[this.template.expansion_boards[a]];for(let i=0;i<s.numDrives;i++){const s=`${a+1}.${i}`;t.push({text:this.getDriverCaption(r),value:s,disabled:r!==e&&this.drives.some(e=>e.driver_v3===s)}),r++}}return t},validateDriver(e){let t=!1;for(let r=0;r<this.drives.length;r++)if(this.drives[r].driver_v3===e){if(t)return!1;t=!0}},removeHeater(){this.template.bed.present&&this.template.bed.heater===this.template.heaters.length-1?this.updateBed({present:!1}):this.template.chamber.present&&this.template.chamber.heater===this.template.heaters.length-1?this.updateChamber({present:!1}):this.removeNozzle()},getHeaterType(e){return this.template.bed.present&&this.template.bed.heater===e?0:this.template.chamber.present&&this.template.chamber.heater===e?1:2},setHeaterType(e,t){0===t?this.template.bed.present?this.updateBed({heater:e}):this.updateBed({present:!0,heater:e,isNozzle:!1}):this.template.bed.present&&this.template.bed.heater===e&&this.updateBed({present:!1,isNozzle:2===t}),1===t?this.template.chamber.present?this.updateChamber({heater:e}):this.updateChamber({present:!0,heater:e,isNozzle:!1}):this.template.chamber.present&&this.template.chamber.heater===e&&this.updateChamber({present:!1,isNozzle:2===t})}}},J=U,Q=Object(S["a"])(J,L,W,!1,null,null,null),ee=Q.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{attrs:{"no-body":""}},[r("template",{slot:"header"},[e._v(" Axes ")]),r("table",{staticClass:"table mb-0"},[r("thead",[r("th",[e._v("Drive")]),r("th",[e._v("Direction")]),r("th",{directives:[{name:"show",rawName:"v-show",value:""==e.board.stepperDriver,expression:"board.stepperDriver==''"}]},[e._v("Driver")]),r("th",{directives:[{name:"show",rawName:"v-show",value:e.board.microstepping,expression:"board.microstepping"}]},[e._v("Microstepping (interpolation)")]),r("th",[e._v("Steps per mm")]),r("th",[e._v("Max. Speed Change (mm/s)")]),r("th",[e._v("Max. Speed (mm/s)")]),r("th",[e._v("Acceleration (mm/s²)")]),r("th",[e._v("Motor Current (mA)")]),r("th",{directives:[{name:"show",rawName:"v-show",value:e.template.firmware<3,expression:"template.firmware < 3"}]},[e._v("Motor Driver")])]),r("tbody",e._l([0,1,2],(function(t){return r("drive-row",{key:t,attrs:{index:t,drivers:e.drivers}})})),1)])],2),r("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Extruders")]),e.template.firmware<3?r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.canAddExtruder},on:{click:e.addExtruder}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add Extruder ")],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveExtruder},on:{click:e.removeExtruder}},[r("font-awesome-icon",{attrs:{icon:"minus"}}),e._v(" Remove Extruder ")],1)],1):e._e()]},proxy:!0}])},[r("table",{staticClass:"table mb-0"},[r("thead",[r("th",[e._v("Drive")]),r("th",[e._v("Direction")]),r("th",{directives:[{name:"show",rawName:"v-show",value:""==e.board.stepperDriver,expression:"board.stepperDriver==''"}]},[e._v("Driver")]),r("th",{directives:[{name:"show",rawName:"v-show",value:e.board.microstepping,expression:"board.microstepping"}]},[e._v("Microstepping (interpolation)")]),r("th",[e._v("Steps per mm")]),r("th",[e._v("Max. Speed Change (mm/s)")]),r("th",[e._v("Max. Speed (mm/s)")]),r("th",[e._v("Acceleration (mm/s²)")]),r("th",[e._v("Motor Current (mA)")]),e.template.firmware<3?r("th",[e._v("Motor Driver")]):e._e()]),r("tbody",e._l(e.template.drives.length-3,(function(t){return r("drive-row",{key:t,attrs:{index:t+2,drivers:e.drivers}})})),1)])]),r("b-card",{staticClass:"mt-3",attrs:{header:"Motor Current Reduction"}},[r("b-form-row",[r("b-col",{attrs:{"align-self":"center"}},[r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.idle.used,expression:"preset.idle.used",modifiers:{left:!0}}],attrs:{title:"Disable motors on inactivity"},model:{value:e.idleUsed,callback:function(t){e.idleUsed=t},expression:"idleUsed"}},[e._v("Reduce motor currents when idle")])],1),r("b-col",[r("label",{attrs:{for:"idleFactor"}},[e._v("Idle Current Percentage:")]),r("b-input-group",{attrs:{append:"%"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.idle.factor,expression:"preset.idle.factor"}],attrs:{id:"idleFactor",title:"Motor idle current reduction factor (M906)",disabled:!e.idleUsed,min:"0",max:"100",type:"number",step:"any",required:""},model:{value:e.idleFactor,callback:function(t){e.idleFactor=e._n(t)},expression:"idleFactor"}})],1)],1),r("b-col",[r("label",{attrs:{for:"idleTimeout"}},[e._v("Idle Timeout:")]),r("b-input-group",{attrs:{append:"s"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.idle.timeout,expression:"preset.idle.timeout"}],attrs:{id:"idleTimeout",title:"Motor idle timeout value (M84)",disabled:!e.idleUsed,min:"0",type:"number",step:"any",required:""},model:{value:e.idleTimeout,callback:function(t){e.idleTimeout=e._n(t)},expression:"idleTimeout"}})],1)],1)],1)],1)],1)},re=[],ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",{domProps:{textContent:e._s(e.getDriveCaption(e.index))}}),r("td",[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.presetDrive.direction,expression:"presetDrive.direction"}],attrs:{value:e.direction,title:"Direction of this drive"},on:{change:function(t){return e.updateDrive({drive:e.index,forwards:t})}}},[r("option",{domProps:{value:!1}},[e._v("Backwards")]),r("option",{domProps:{value:!0}},[e._v("Forwards")])])],1),r("td",{directives:[{name:"show",rawName:"v-show",value:""==e.board.stepperDriver,expression:"board.stepperDriver==''"}]},[r("b-select",{directives:[{name:"preset",rawName:"v-preset"}],attrs:{title:"Stepper Driver"},model:{value:e.driverOption,callback:function(t){e.driverOption=t},expression:"driverOption"}},e._l(e.stepperDriverTimings,(function(t,a){return r("option",{key:a,domProps:{value:a}},[e._v(e._s(a))])})),0),r("b-form-group",{directives:[{name:"show",rawName:"v-show",value:"Custom"==e.drive.stepperDriver,expression:"drive.stepperDriver == 'Custom'"}],attrs:{label:"Stepper Timings:"}},[r("timing-input",{attrs:{drive:e.drive,index:e.index}})],1)],1),r("td",{directives:[{name:"show",rawName:"v-show",value:e.board.microstepping,expression:"board.microstepping"}],class:{"reduce-padding":e.drive.microstepping_interpolation}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.presetMicrosteppingOption,expression:"presetMicrosteppingOption"}],attrs:{title:"Microstepping value (M350)",disabled:!e.board.microstepping},model:{value:e.microsteppingOption,callback:function(t){e.microsteppingOption=t},expression:"microsteppingOption"}},[r("option",{attrs:{value:"1"}},[e._v("x1")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"1_i"}},[e._v("x1 (on)")]):e._e(),r("option",{attrs:{value:"2"}},[e._v("x2")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"2_i"}},[e._v("x2 (on)")]):e._e(),r("option",{attrs:{value:"4"}},[e._v("x4")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"4_i"}},[e._v("x4 (on)")]):e._e(),r("option",{attrs:{value:"8"}},[e._v("x8")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"8_i"}},[e._v("x8 (on)")]):e._e(),r("option",{attrs:{value:"16"}},[e._v("x16")]),r("option",{attrs:{value:"16_i"}},[e._v("x16 (on)")]),r("option",{attrs:{value:"32"}},[e._v("x32")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"32_i"}},[e._v("x32 (on)")]):e._e(),r("option",{attrs:{value:"64"}},[e._v("x64")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"64_i"}},[e._v("x64 (on)")]):e._e(),r("option",{attrs:{value:"128"}},[e._v("x128")]),e.board.microsteppingInterpolation?r("option",{staticClass:"hidden",attrs:{value:"128_i"}},[e._v("x128 (on)")]):e._e(),r("option",{attrs:{value:"256"}},[e._v("x256")])]),r("br"),e.drive.microstepping_interpolation?r("span",{staticClass:"small-text"},[e._v("interpolated to x256")]):e._e()],1),r("td",[r("steps-per-mm-input",{attrs:{index:e.index,drive:e.drive,"preset-drive":e.presetDrive}})],1),r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetDrive.instant_dv,expression:"presetDrive.instant_dv"}],attrs:{title:"Maximum allowed instantenous speed change (M566)",min:"0.1",max:e.drive.max_speed,type:"number",step:"any",required:""},model:{value:e.instantDv,callback:function(t){e.instantDv=e._n(t)},expression:"instantDv"}})],1),r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetDrive.max_speed,expression:"presetDrive.max_speed"}],attrs:{title:"Maximum allowed speed (M203)",min:e.drive.instant_dv,type:"number",step:"any",required:""},model:{value:e.maxSpeed,callback:function(t){e.maxSpeed=e._n(t)},expression:"maxSpeed"}})],1),r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetDrive.acceleration,expression:"presetDrive.acceleration"}],attrs:{title:"Drive acceleration (M201)",min:"1",type:"number",step:"any",required:""},model:{value:e.acceleration,callback:function(t){e.acceleration=e._n(t)},expression:"acceleration"}})],1),r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetDrive.current,expression:"presetDrive.current"}],attrs:{title:"Motor current (M906)",min:"300",max:e.board.motorLimitCurrent,type:"number",step:"any",required:""},model:{value:e.current,callback:function(t){e.current=e._n(t)},expression:"current"}}),e.current>=e.board.motorWarningCurrent?r("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-warning small-text",attrs:{title:"Your specified motor current exceeds the safe range. You may have to use extra cooling to prevent damage of your stepper drivers!"}},[r("font-awesome-icon",{attrs:{icon:"exclamation-triangle"}}),e._v(" "),r("u",{staticClass:"ml-1"},[e._v("Warning!")])],1):e._e()],1),e.template.firmware<3?r("td",[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.index,expression:"index"}],attrs:{options:e.drivers,title:"Motor driver (M584)"},model:{value:e.driver,callback:function(t){e.driver=e._n(t)},expression:"driver"}})],1):e._e()])},se=[],ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetDrive.steps_per_mm,expression:"presetDrive.steps_per_mm"}],attrs:{id:e.id,title:"Motor steps per mm (M92)",min:"1",type:"number",step:"any",required:""},model:{value:e.stepsPerMm,callback:function(t){e.stepsPerMm=e._n(t)},expression:"stepsPerMm"}}),r("b-popover",{attrs:{target:e.id,show:e.popoverShown,placement:"right",title:"Calculate steps per mm",triggers:"focus"},on:{"update:show":function(t){e.popoverShown=t}}},[r("b-form",[r("b-form-group",{attrs:{label:"Motor step angle:"}},[r("b-select",{model:{value:e.stepAngle,callback:function(t){e.stepAngle=e._n(t)},expression:"stepAngle"}},[r("option",{attrs:{value:"0.9"}},[e._v("0.9° (400 steps per rev)")]),r("option",{attrs:{value:"1.8"}},[e._v("1.8° (200 steps per rev)")]),r("option",{attrs:{value:"7.5"}},[e._v("7.5° (48 steps per rev)")])])],1),"extruder"!=e.driveType?r("b-form-group",{attrs:{"label-cols":"5",label:"Drive type:"}},[r("b-select",{model:{value:e.driveType,callback:function(t){e.driveType=t},expression:"driveType"}},[r("option",{attrs:{value:"belt"}},[e._v("Belt")]),r("option",{attrs:{value:"leadscrew"}},[e._v("Leadscrew")])])],1):e._e(),"belt"==e.driveType?[r("b-form-group",{attrs:{"label-cols":"5",label:"Preset:"}},[r("b-select",{model:{value:e.beltPreset,callback:function(t){e.beltPreset=t},expression:"beltPreset"}},[e._l(e.belt.presets,(function(t){return r("option",{domProps:{value:t.value,textContent:e._s(t.text)}})})),r("option",{attrs:{value:"custom"}},[e._v("Custom")])],2)],1),r("b-form-group",{attrs:{"label-cols":"5",label:"Belt pitch:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{attrs:{min:"0.1",type:"number",step:"any",required:""},model:{value:e.belt.pitch,callback:function(t){e.$set(e.belt,"pitch",e._n(t))},expression:"belt.pitch"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"5",label:"Pulley teeth:"}},[r("b-form-input",{attrs:{min:"1",type:"number",step:"1",required:""},model:{value:e.belt.pulleyTeeth,callback:function(t){e.$set(e.belt,"pulleyTeeth",e._n(t))},expression:"belt.pulleyTeeth"}})],1)]:"leadscrew"==e.driveType?[r("b-form-group",{attrs:{"label-cols":"5",label:"Preset:"}},[r("b-select",{model:{value:e.leadscrewPreset,callback:function(t){e.leadscrewPreset=t},expression:"leadscrewPreset"}},[e._l(e.leadscrew.presets,(function(t,a){return r("optgroup",{attrs:{label:a}},e._l(t,(function(t){return r("option",{domProps:{value:t.value,textContent:e._s(t.text)}})})),0)})),r("option",{attrs:{value:"custom"}},[e._v("Custom")])],2)],1),r("b-form-group",{attrs:{"label-cols":"5",label:"Lead:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.leadscrew.lead,callback:function(t){e.$set(e.leadscrew,"lead",e._n(t))},expression:"leadscrew.lead"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"5",label:"Gear ratio:"}},[r("table",[r("tr",[r("td",[r("b-form-input",{staticClass:"no-spinners",attrs:{type:"number",step:"any",required:""},model:{value:e.leadscrew.ratio1,callback:function(t){e.$set(e.leadscrew,"ratio1",e._n(t))},expression:"leadscrew.ratio1"}})],1),r("td",[e._v(":")]),r("td",[r("b-form-input",{staticClass:"no-spinners",attrs:{type:"number",step:"any",required:""},model:{value:e.leadscrew.ratio2,callback:function(t){e.$set(e.leadscrew,"ratio2",e._n(t))},expression:"leadscrew.ratio2"}})],1)])])])]:[r("b-form-group",{attrs:{"label-cols":"5",label:"Hob diameter:"}},[r("b-input-group",{staticClass:"mt-2",attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.extruder.hob,callback:function(t){e.$set(e.extruder,"hob",e._n(t))},expression:"extruder.hob"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"5",label:"Gear ratio:"}},[r("table",[r("tr",[r("td",[r("b-form-input",{staticClass:"no-spinners",attrs:{type:"number",step:"any",required:""},model:{value:e.extruder.ratio1,callback:function(t){e.$set(e.extruder,"ratio1",e._n(t))},expression:"extruder.ratio1"}})],1),r("td",[e._v(":")]),r("td",[r("b-form-input",{staticClass:"no-spinners",attrs:{type:"number",step:"any",required:""},model:{value:e.extruder.ratio2,callback:function(t){e.$set(e.extruder,"ratio2",e._n(t))},expression:"extruder.ratio2"}})],1)])])]),r("b-form-group",{attrs:{"label-cols":"5",label:"Amount extruded:"}},[r("b-input-group",{staticClass:"mt-2",attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.extruder.amountExtruded,callback:function(t){e.$set(e.extruder,"amountExtruded",e._n(t))},expression:"extruder.amountExtruded"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"5",label:"Actually extruded:"}},[r("b-input-group",{staticClass:"mt-2",attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.extruder.actuallyExtruded,callback:function(t){e.$set(e.extruder,"actuallyExtruded",e._n(t))},expression:"extruder.actuallyExtruded"}})],1)],1)],r("b-card",{attrs:{"bg-variant":"light"}},[r("p",[e._v("Resulting steps per mm:")]),r("h3",{class:{"text-danger":!e.isValid}},[e._v(" "+e._s(e.isValid?e.calculatedSteps.toFixed(2):"error")+" "),r("b-button",{staticClass:"float-right set-button",attrs:{size:"sm",variant:"primary",disabled:!e.isValid},on:{click:e.apply}},[r("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" Set ")],1)],1),r("span",[e._v("at x"+e._s(e.drive.microstepping)+" microstepping")])])],2)],1)],1)},oe=[];let ne=0;var le={computed:{...Object(d["e"])(["preset","template"]),beltPreset:{get(){for(let e in this.belt.presets){const t=this.belt.presets[e];if(t.value==this.belt.pitch)return t.value}return"custom"},set(e){"custom"!==e&&(this.belt.pitch=e)}},leadscrewPreset:{get(){for(let e in this.leadscrew.presets)for(let t in this.leadscrew.presets[e]){const r=this.leadscrew.presets[e][t];if(r.value==this.leadscrew.lead)return r.value}return"custom"},set(e){"custom"!==e&&(this.leadscrew.lead=e)}},calculatedSteps(){switch(this.driveType){case"belt":return 360*this.drive.microstepping/(this.belt.pulleyTeeth*this.belt.pitch*this.stepAngle);case"leadscrew":let e=this.leadscrew.ratio2/this.leadscrew.ratio1;return 360*this.drive.microstepping*e/(this.leadscrew.lead*this.stepAngle);case"extruder":let t=this.extruder.ratio2/this.extruder.ratio1,r=this.extruder.amountExtruded/this.extruder.actuallyExtruded;return 360*this.drive.microstepping*t*r/(this.extruder.hob*this.stepAngle*Math.PI)}return 0},stepsPerMm:{get(){return this.drive.steps_per_mm},set(e){this.updateDrive({drive:this.index,stepsPerMm:e})}},isValid(){return isNumber(this.calculatedSteps)}},data(){return{id:"stepsPerMmInput"+ne++,popoverShown:!1,stepAngle:1.8,driveType:this.index<2?"belt":2===this.index?"leadscrew":"extruder",belt:{presets:[{text:"GT2",value:2},{text:"MXL",value:2.03},{text:"T2.5",value:2.5},{text:"T5",value:5}],pitch:2,pulleyTeeth:20},leadscrew:{presets:{Metric:[{text:"M5",value:.8},{text:"M6",value:1},{text:"M8",value:1.25}],Trapezoid:[{text:"TR1.5",value:1.5},{text:"TR3",value:3},{text:"TR4",value:4},{text:"TR6",value:6}]},lead:.8,ratio1:1,ratio2:1},extruder:{hob:7,ratio1:1,ratio2:3,amountExtruded:10,actuallyExtruded:10}}},methods:{...Object(d["d"])(["updateDrive"]),apply(){this.stepsPerMm=parseFloat(this.calculatedSteps.toFixed(2)),this.popoverShown=!1}},props:{index:{type:Number,required:!0},drive:{type:Object,required:!0},presetDrive:{type:Object,required:!0}}},pe=le,de=(r("d606"),Object(S["a"])(pe,ie,oe,!1,null,"78c03102",null)),me=de.exports,ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-form-input",{ref:"inputUnitless",attrs:{id:e.id,title:"Stepper Timings"},model:{value:e.drive.stepperDriverTimings,callback:function(t){e.$set(e.drive,"stepperDriverTimings",t)},expression:"drive.stepperDriverTimings"}}),r("b-popover",{attrs:{target:e.id,show:e.popoverShown,placement:"right",title:"Custom Stepper Timings",triggers:"focus"},on:{"update:show":function(t){e.popoverShown=t},show:e.onShow}},[r("b-form-group",{staticClass:"tlabel",attrs:{horizontal:"",label:"Step Pulse Width:","label-class":"text-left"}},[r("b-input-group",{staticClass:"tinput",attrs:{append:"μs"}},[r("b-input",{attrs:{min:"0",type:"number",step:"any"},model:{value:e.parameters.pWidth,callback:function(t){e.$set(e.parameters,"pWidth",e._n(t))},expression:"parameters.pWidth"}})],1)],1),r("b-form-group",{staticClass:"tlabel",attrs:{horizontal:"",label:"Step Pulse Interval:","label-class":"text-left"}},[r("b-input-group",{staticClass:"tinput",attrs:{append:"μs"}},[r("b-input",{attrs:{min:"0",type:"number",step:"any"},model:{value:e.parameters.pInterval,callback:function(t){e.$set(e.parameters,"pInterval",e._n(t))},expression:"parameters.pInterval"}})],1)],1),r("b-form-group",{staticClass:"tlabel",attrs:{horizontal:"",label:"Direction Setup Time:","label-class":"text-left"}},[r("b-input-group",{staticClass:"tinput",attrs:{append:"μs"}},[r("b-input",{attrs:{min:"0",type:"number",step:"any"},model:{value:e.parameters.dirSetup,callback:function(t){e.$set(e.parameters,"dirSetup",e._n(t))},expression:"parameters.dirSetup"}})],1)],1),r("b-form-group",{staticClass:"tlabel",attrs:{horizontal:"",label:"Direction Hold Time:","label-class":"text-left"}},[r("b-input-group",{staticClass:"tinput",attrs:{append:"μs"}},[r("b-input",{attrs:{min:"0",type:"number",step:"any"},model:{value:e.parameters.dirHold,callback:function(t){e.$set(e.parameters,"dirHold",e._n(t))},expression:"parameters.dirHold"}})],1)],1),r("b-button",{attrs:{size:"sm",variant:"primary",disabled:!e.isValid},on:{click:e.apply}},[r("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" Set ")],1)],1)],1)},ce=[];const he={pWidth:1,pInterval:1,dirSetup:.5,dirHold:.5};let be=!1,ve=0;var fe={computed:{...Object(d["e"])(["board","template"]),isValid(){return isNumber(this.parameters.pWidth)&&isNumber(this.parameters.pInterval)&&isNumber(this.parameters.dirSetup)&&isNumber(this.parameters.dirHold)}},data(){return{id:"driverTimings"+ve++,parameters:he,popoverShown:!1}},methods:{...Object(d["d"])(["updateDrive"]),apply(){var e=this.parameters.pWidth+":"+this.parameters.pInterval+":"+this.parameters.dirSetup+":"+this.parameters.dirHold;this.updateDrive({drive:this.index,stepperDriverTimings:e}),this.popoverShown=!1},onShow(e){if(!be){var t=this.drive.stepperDriverTimings.split(":",4);4==t.length&&(he.pWidth=Number(t[0]),he.pInterval=Number(t[1]),he.dirSetup=Number(t[2]),he.dirHold=Number(t[3]))}}},props:{index:{type:Number,required:!0},drive:{type:Object,required:!0}}},ge=fe,_e=(r("0355"),Object(S["a"])(ge,ue,ce,!1,null,"7ff9e223",null)),xe=_e.exports,we={data(){return{stepperDriverTimings:{DRV8825:"1.9:1.9:0.65:0.65",A4988:"1.0:1.0:0.2:0.2",A4982:"1.0:1.0:0.2:0.2",A5984:"1.0:1.0:0.4:0.4",TMC2208:"",TMC2209:"",TMC2225:"",TMC2226:"",THB6128:"0.5:0.5:0.5:0.5",LV8729:"0.5:0.5:0.5:0.5",Custom:"1.0:1.0:0.4:0.4"}}},components:{"steps-per-mm-input":me,"timing-input":xe},computed:{...Object(d["e"])(["board","preset","template"]),drive(){return this.template.drives[this.index]},presetDrive(){return this.preset.drives[Math.min(this.index,this.preset.drives.length-1)]},direction:{get(){return 1==this.drive.direction},set(e){this.updateDrive({drive:this.index,direction:e})}},driverOption:{get(){return this.drive.stepperDriver},set(e){this.updateDrive({drive:this.index,stepperDriver:e,stepperDriverTimings:this.stepperDriverTimings[e]})}},microsteppingOption:{get(){return this.drive.microstepping+(this.drive.microstepping_interpolation?"_i":"")},set(e){const t=e.split("_");this.updateDrive({drive:this.index,microstepping:parseInt(t[0]),interpolated:t.length>1})}},presetMicrosteppingOption(){return this.presetDrive.microstepping+(this.presetDrive.microstepping_interpolation?"_i":"")},instantDv:{get(){return this.drive.instant_dv},set(e){this.updateDrive({drive:this.index,instantDv:e})}},maxSpeed:{get(){return this.drive.max_speed},set(e){this.updateDrive({drive:this.index,maxSpeed:e})}},acceleration:{get(){return this.drive.acceleration},set(e){this.updateDrive({drive:this.index,acceleration:e})}},current:{get(){return this.drive.current},set(e){this.updateDrive({drive:this.index,current:e})}},driver:{get(){return this.drive.driver},set(e){this.updateDrive({drive:this.index,driver:e})}}},methods:{...Object(d["d"])(["updateDrive"]),getDriveCaption(e){switch(e){case 0:return"X";case 1:return"Y";case 2:return"Z";default:return"E"+(e-3)}}},props:{index:{type:Number,required:!0},drivers:{type:Array,required:!0}}},ye=we,Pe=(r("4788"),Object(S["a"])(ye,ae,se,!1,null,"23583dde",null)),Ce=Pe.exports,ke={components:{"drive-row":Ce},computed:{...Object(d["e"])(["board","preset","template"]),...Object(d["c"])(["canAddExtruder","canRemoveExtruder"]),...Object(m["b"])({board:"board",expansionBoards:"template.expansion_boards",idleUsed:"template.idle.used",idleFactor:"template.idle.factor",idleTimeout:"template.idle.timeout"}),drivers(){const e=[];let t=0;for(let r=0;r<this.board.numDrives;r++){switch(r){case 0:e.push({value:0,text:"0 (X)"});break;case 1:e.push({value:1,text:"1 (Y)"});break;case 2:e.push({value:2,text:"2 (Z)"});break;default:e.push({value:r,text:`${r} (E${r-3})`});break}t++}for(let r=0;r<this.expansionBoards.length;r++){const a=f[this.expansionBoards[r]];for(let r=0;r<a.numDrives;r++)e.push({value:t,text:`${t} (E${t-3})`}),t++}return e}},methods:Object(d["d"])(["addExtruder","removeExtruder"])},De=ke,Se=Object(S["a"])(De,te,re,!1,null,null,null),Te=Se.exports,Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{attrs:{"no-body":""}},[r("template",{slot:"header"},[r("span",{staticClass:"mt-2"},[e._v("Endstop Configuration")]),r("abbr",{staticClass:"float-right",attrs:{id:"endstop_note",title:"When an endstop is hit, the axis position will be set to the corresponding axis minimum/maximum. If your endstop switch is not mounted at the axis end, you will have to add an extra G92 code after the homing move (G1..S1) to your homing files in order to set the new axis position. When homing the Z axis using a Z probe, the firmware will set the new Z position to the specified trigger height"}},[e._v("Note")])]),r("table",{staticClass:"table mb-0"},[r("thead",[r("th",[e._v("Axis")]),r("th",[e._v("Endstop Type")]),r("th",[e._v("Endstop Location at")])]),r("tbody",e._l([0,1,2],(function(t){return r("tr",[r("td",{staticClass:"pl-4 pt-3"},[e._v(" "+e._s(["X","Y","Z"][t])+" ")]),r("td",[r("b-form-radio-group",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.drives[t].endstop_type,expression:"preset.drives[i].endstop_type",modifiers:{left:!0}}],staticClass:"w-100",attrs:{buttons:"","button-variant":"outline-primary",checked:e.template.drives[t].endstop_type,title:"Endstop type of this axis",name:"endstopType"+t},on:{change:function(r){return e.updateDrive({drive:t,et:r})}}},[r("b-form-radio",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"w-100",attrs:{value:0,title:"Manual homing via G92"}},[e._v("None")]),r("b-form-radio",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"w-100",attrs:{value:1,disabled:e.template.firmware>=3&&!e.template.drives[t].endstop_pin,title:"Endstop switch pulls signal from GND to +3.3V when triggered (normally-closed switch)"}},[e._v(" "+e._s(e.template.firmware>=3?"Switch":"Active high (NC)")+" ")]),r("b-form-radio",{directives:[{name:"show",rawName:"v-show",value:e.template.firmware<3,expression:"template.firmware < 3"},{name:"b-tooltip",rawName:"v-b-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"w-100",attrs:{value:2,title:"Endstop switch pulls signal from +3.3V to GND when triggered (normally-open switch)"}},[e._v("Active low (NO)")]),r("b-form-radio",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"w-100",attrs:{value:3,disabled:"noprobe"===e.template.probe.type,title:"Z-Probe is used"}},[e._v("Z-Probe")]),r("b-form-radio",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.bottom",modifiers:{bottom:!0}}],staticClass:"w-100",attrs:{value:4,disabled:!e.board.hasMotorLoadDetection||"TMC2209"!==e.template.drives[t].stepperDriver||"TMC2226"!==e.template.drives[t].stepperDriver,title:"Motor stall detection of the stepper drivers"}},[e._v("Sensorless")])],1)],1),r("td",[r("b-form-radio-group",{directives:[{name:"preset",rawName:"v-preset.right",value:e.preset.drives[t].endstop_location,expression:"preset.drives[i].endstop_location",modifiers:{right:!0}}],staticClass:"w-100",attrs:{buttons:"","button-variant":"outline-primary",checked:e.template.drives[t].endstop_location,title:"Endstop location of this axis",name:"endstopLocation"+t},on:{change:function(r){return e.updateDrive({drive:t,el:r})}}},[r("b-form-radio",{staticClass:"w-100",attrs:{value:1,disabled:"delta"==e.template.geometry.type}},[e._v("Low end")]),r("b-form-radio",{staticClass:"w-100",attrs:{value:2}},[e._v("High end")])],1)],1)])})),0)])],2),r("b-alert",{attrs:{show:-1!==e.template.drives.findIndex((function(e){return 4===e.endstop_type}))}},[r("strong",[e._v("Note:")]),e._v(" Sensorless homing via motor stall detection requires extra configuration steps. See "),r("a",{attrs:{href:"https://duet3d.dozuki.com/Wiki/Stall_detection_and_sensorless_homing",target:"_blank"}},[e._v("Duet3D Wiki")]),e._v(" for further information. ")]),r("b-card",{staticClass:"mt-3",attrs:{header:"Z-Probe"}},[r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"Probe X Offset:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe.x_offset,expression:"preset.probe.x_offset"}],attrs:{title:"Offset of the Z-probe in X direction",disabled:"noprobe"==e.template.probe.type,type:"number",step:"any",required:""},model:{value:e.probeXOffset,callback:function(t){e.probeXOffset=e._n(t)},expression:"probeXOffset"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Probe Y Offset:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe.y_offset,expression:"preset.probe.y_offset"}],attrs:{title:"Offset of the Z-probe in Y direction",disabled:"noprobe"==e.template.probe.type,type:"number",step:"any",required:""},model:{value:e.probeYOffset,callback:function(t){e.probeYOffset=e._n(t)},expression:"probeYOffset"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Probing Speed:"}},[r("b-input-group",{attrs:{append:"mm/s"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe.speed,expression:"preset.probe.speed"}],attrs:{title:"Speed at which bed points are probed",type:"number",step:"any",required:""},model:{value:e.probeSpeed,callback:function(t){e.probeSpeed=e._n(t)},expression:"probeSpeed"}})],1)],1)],1),r("b-col",{attrs:{"align-self":"center"}},[r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe.deploy,expression:"preset.probe.deploy"}],attrs:{title:"Deploy or retract a mechanical probe by running macro files",disabled:"bltouch"==e.template.probe.type},model:{value:e.probeDeploy,callback:function(t){e.probeDeploy=t},expression:"probeDeploy"}},[e._v("Deploy/Retract Probe")])],1)],1),r("b-card",{attrs:{"no-body":"",header:"Probe Type"}},[r("b-tabs",{attrs:{card:"",pills:""},model:{value:e.probeType,callback:function(t){e.probeType=t},expression:"probeType"}},[r("b-tab",{attrs:{title:"No Z Probe","title-link-class":{"font-weight-bold":"noprobe"===e.preset.probe.type},value:"noprobe"}},[e._v(" No Z-probe is installed. The distance between the nozzle and the bed must be manually determined. ")]),r("b-tab",{attrs:{title:"Switch",disabled:e.template.firmware>=3&&!e.template.probe.input_pin,"title-link-class":{"font-weight-bold":"switch"===e.preset.probe.type},value:"switch"}},[r("z-probe-values"),e._v(" A switch is used to determine the distance between nozzle and bed. "),e.template.firmware>=3?[r("br"),e._v(" If you are not using an active-high switch, you have to invert the Z-probe port on the "),r("router-link",{attrs:{to:"Mapping"}},[e._v("I/O Mapping")]),e._v(" page. ")]:e._e(),"delta"===e.template.geometry.type?[r("br"),r("br"),r("span",[e._v("This switch must be connected to the E0 endstop terminal!")])]:[r("br"),r("br"),r("span",[e._v("This switch must be connected to the Z probe terminal and "),r("strong",[e._v("not")]),e._v(" to the Z endstop switch terminal!")])]],2),r("b-tab",{attrs:{title:"Unmodulated or Smart IR Probe",disabled:e.template.firmware>=3&&!e.template.probe.input_pin,"title-link-class":{"font-weight-bold":"unmodulated"===e.preset.probe.type},value:"unmodulated"}},[r("z-probe-values"),e._v(" An umodulated Z-probe is used to determine the distance between nozzle and bed (without trigger signal) ")],1),r("b-tab",{attrs:{title:"Simple Modulated IR Probe",disabled:e.template.firmware>=3&&!e.template.probe.input_pin,"title-link-class":{"font-weight-bold":"modulated"===e.preset.probe.type},value:"modulated"}},[r("z-probe-values"),e._v(" A modulated Z-probe is used to determine the distance between nozzle and bed (with trigger signal) ")],1),r("b-tab",{attrs:{title:"Smart Effector or Piezo",disabled:e.template.firmware>=3&&!e.template.probe.input_pin,"title-link-class":{"font-weight-bold":"effector"===e.preset.probe.type},value:"effector"}},[r("z-probe-values",[r("b-col",[r("b-form-group",{attrs:{label:"Recovery Time"}},[r("b-input-group",{attrs:{append:"s"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset"}],attrs:{title:"Recovery time of the smart effector/piezo",type:"number",step:"any",required:""},model:{value:e.template.probe.recovery_time,callback:function(t){e.$set(e.template.probe,"recovery_time",e._n(t))},expression:"template.probe.recovery_time"}})],1)],1)],1)],1),e._v(" Official "),r("a",{attrs:{href:"https://www.duet3d.com/DeltaSmartEffector",target:"_blank"}},[e._v("Duet3D Smart Effector")]),e._v(" for Delta printers (also see "),r("a",{attrs:{href:"https://www.duet3d.com/wiki/Smart_effector_and_carriage_adapters_for_delta_printer",target:"_blank"}},[e._v("Duet3D Wiki")]),e._v(") ")],1),r("b-tab",{attrs:{title:"BLTouch",disabled:e.template.firmware>=3&&(!e.template.probe.input_pin||!e.template.probe.pwm_pin),"title-link-class":{"font-weight-bold":"bltouch"===e.preset.probe.type},value:"bltouch"}},[r("z-probe-values",{attrs:{"hide-value":!0}},[e.template.firmware<3?r("b-col",[r("b-form-group",{attrs:{label:"Servo Control Channel:"}},[r("b-select",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"PWM channel to control the BLTouch probe with"},model:{value:e.pwmChannel,callback:function(t){e.pwmChannel=t},expression:"pwmChannel"}},[e._l(e.pwmChannels,(function(t,a){return e.pwmChannels.constructor===Object?r("optgroup",{key:a,attrs:{label:a}},e._l(t,(function(t,a){return r("option",{key:a,domProps:{value:t.value,textContent:e._s(t.text)}})})),0):e._e()})),e._l(e.pwmChannels,(function(t,a){return e.pwmChannels.constructor===Array?r("option",{key:a,domProps:{value:t.value,textContent:e._s(t.text)}}):e._e()}))],2)],1)],1):e._e()],1),r("span",[e._v("Use a BLTouch for Z-probing (also see "),r("a",{attrs:{href:"https://duet3d.dozuki.com/Wiki/Connecting_a_Z_probe#Section_BLTouch",target:"_blank"}},[e._v("Duet3D wiki")]),e._v(")")]),r("br"),r("br"),r("span",[e._v("Make sure you change it to use +3.3V instead of +5V before you connect it or you risk damaging your board!")])],1)],1),r("b-alert",{staticClass:"mb-0",attrs:{show:e.template.firmware>=3&&(!e.template.probe.input_pin||!e.template.probe.pwm_pin)}},[r("strong",[e._v("Note:")]),e._v(" You must specify an input and a PWM control pin on the "),r("router-link",{attrs:{to:"/Mapping"}},[e._v("I/O Mapping")]),e._v(" page if you want to configure a BLTouch probe. ")],1)],1)],1)],1)},Ne=[],Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-row",[e.hideHeight?e._e():r("b-col",[r("b-form-group",{attrs:{label:"Trigger Height:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe.trigger_height,expression:"preset.probe.trigger_height"}],attrs:{title:"Height of the nozzle(s) when the probe is triggered",type:"number",step:"any",required:""},model:{value:e.probeTriggerHeight,callback:function(t){e.probeTriggerHeight=e._n(t)},expression:"probeTriggerHeight"}})],1)],1)],1),e.hideValue?e._e():r("b-col",[r("b-form-group",{attrs:{label:"Trigger Value:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe.trigger_value,expression:"preset.probe.trigger_value"}],attrs:{title:"Trigger threshold for the probe",type:"number",min:"0",max:"1023",step:"any",required:""},model:{value:e.probeTriggerValue,callback:function(t){e.probeTriggerValue=e._n(t)},expression:"probeTriggerValue"}})],1)],1),e._t("default")],2)},ze=[],Re={computed:{...Object(d["e"])(["preset"]),...Object(m["b"])({probeTriggerHeight:"template.probe.trigger_height",probeTriggerValue:"template.probe.trigger_value"})},props:{hideHeight:{type:Boolean,default:!1},hideValue:{type:Boolean,default:!1}}},Ee=Re,Oe=Object(S["a"])(Ee,Fe,ze,!1,null,null,null),Be=Oe.exports;const Ae=["noprobe","switch","unmodulated","modulated","effector","bltouch"];var He={components:{"z-probe-values":Be},computed:{...Object(d["e"])(["board","preset","template"]),...Object(m["b"])({probeXOffset:"template.probe.x_offset",probeYOffset:"template.probe.y_offset",probeSpeed:"template.probe.speed",probeDeploy:"template.probe.deploy",probePwmChannel:"template.probe.pwm_channel",probePwmInverted:"template.probe.pwm_inverted"}),pwmChannel:{get(){return(this.probePwmInverted?"!":"")+this.probePwmChannel},set(e){console.log(e);let t=!1;e.startsWith("!")&&(t=!0,e=e.substring(1)),this.probePwmChannel=e,this.probePwmInverted=t}},pwmChannels(){const e=[],t=[];if(this.template.board.startsWith("duetm"))e.push({text:"Z Probe MOD",value:"64"});else for(let r=0;r<8;r++){const a=this.template.heaters.length>r&&null!==this.template.heaters[r];e.push({text:0==r?"Bed Channel":`E${r-1} Channel`,value:"!"+r,disabled:a}),(this.template.board.startsWith("duetethernet")||this.template.board.startsWith("duetwifi"))&&r>2&&t.push({text:"PWM"+(r-2),value:r.toString(),disabled:a})}return t.length>0?{"Heater Channels":e,"PWM Channels on DueX Expansion Board":t}:e},probeType:{get(){const e=this.template.probe.type;return Ae.findIndex(t=>t==e)},set(e){this.setProbeType(Ae[e])}}},methods:Object(d["d"])(["updateDrive","setProbeType"])},Ie=He,qe=(r("c79f"),Object(S["a"])(Ie,Me,Ne,!1,null,"603fb07a",null)),$e=qe.exports,je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{attrs:{header:"General Heater Settings"}},[r("b-row",[r("b-col",{attrs:{cols:e.template.firmware<3?12:6}},[r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.bed.present,expression:"preset.bed.present",modifiers:{left:!0}}],attrs:{disabled:e.template.firmware>=3,title:"Enable the heated bed"},model:{value:e.bedPresent,callback:function(t){e.bedPresent=t},expression:"bedPresent"}},[e._v("Heated Bed")]),r("b-form-row",{directives:[{name:"show",rawName:"v-show",value:e.bedPresent,expression:"bedPresent"}],staticClass:"mt-3 pl-4"},[e.template.firmware<3?r("b-col",[r("b-form-group",{attrs:{label:"Bed Heater Output:"}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.bed.heater,expression:"preset.bed.heater"}],attrs:{title:"Output channel for the heated bed",options:e.bedHeaters},model:{value:e.bedHeater,callback:function(t){e.bedHeater=e._n(t)},expression:"bedHeater"}})],1)],1):e._e(),r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"Control Method:"}},[r("b-form-radio-group",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.bed.use_pid,expression:"preset.bed.use_pid"}],attrs:{buttons:"","button-variant":"outline-primary",title:"Control method for the bed heater",name:"bedPid"},model:{value:e.bedPid,callback:function(t){e.bedPid=t},expression:"bedPid"}},[r("b-form-radio",{attrs:{value:!0}},[e._v("PID")]),r("b-form-radio",{attrs:{value:!1}},[e._v("Bang-Bang")])],1)],1)],1)],1)],1),e.template.firmware<3?r("b-col",{attrs:{cols:"12"}},[r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.bed_is_nozzle,expression:"preset.bed_is_nozzle",modifiers:{left:!0}}],attrs:{title:"Check this if you want to connect the first nozzle heater to the hot bed terminal"},model:{value:e.bedIsNozzle,callback:function(t){e.bedIsNozzle=t},expression:"bedIsNozzle"}},[e._v("Assign Bed Heater to First Nozzle")])],1):e._e(),r("b-col",{attrs:{cols:e.template.firmware<3?12:6}},[r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.chamber.present,expression:"preset.chamber.present",modifiers:{left:!0}}],attrs:{disabled:e.template.firmware>=3,title:"Enable a heated chamber"},model:{value:e.chamberPresent,callback:function(t){e.chamberPresent=t},expression:"chamberPresent"}},[e._v("Heated Chamber")]),r("b-form-row",{directives:[{name:"show",rawName:"v-show",value:e.chamberPresent,expression:"chamberPresent"}],staticClass:"mt-3 pl-4"},[e.template.firmware<3?r("b-col",[r("b-form-group",{attrs:{label:"Chamber Heater Output:"}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset"}],attrs:{title:"Output channel for the heated chamber",options:e.chamberHeaters},model:{value:e.chamberHeater,callback:function(t){e.chamberHeater=e._n(t)},expression:"chamberHeater"}})],1)],1):e._e(),r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"Control Method:"}},[r("b-form-radio-group",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.chamber.use_pid,expression:"preset.chamber.use_pid"}],attrs:{buttons:"","button-variant":"outline-primary",title:"Control method for the chamber heater",name:"chamberPid"},model:{value:e.chamberPid,callback:function(t){e.chamberPid=t},expression:"chamberPid"}},[r("b-form-radio",{attrs:{value:!0}},[e._v("PID")]),r("b-form-radio",{attrs:{value:!1}},[e._v("Bang-Bang")])],1)],1)],1)],1)],1)],1)],1),r("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Heater Configuration")]),e.template.firmware<3?r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.canAddNozzle},on:{click:function(t){return e.addNozzle()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add Nozzle ")],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveNozzle},on:{click:function(t){return e.removeNozzle()}}},[r("font-awesome-icon",{attrs:{icon:"minus"}}),e._v(" Remove Nozzle ")],1)],1):e._e()]},proxy:!0}])},[r("table",{staticClass:"table mb-0 table-heaters"},[r("thead",[r("th",[e._v("Heater")]),r("th",[e._v("Type")]),r("th",[e._v("Temp. Limit")]),r("th",[e._v("PWM Limit")]),r("th",[e._v("R25")]),r("th",[e._v("β")]),r("th",[e._v("C")]),e.template.firmware<3?r("th",[e._v("Sensor Channel")]):e._e()]),r("tbody",e._l(e.template.heaters,(function(t,a){return null!=t?r("tr",{key:a},[r("td",[e._v(" "+e._s(e.template.firmware<3?0===a?"Bed":"E"+(a-1):a)+" ")]),r("td",[e._v(" "+e._s(e.template.bed.present&&e.template.bed.heater===a?"Heated Bed":e.template.chamber.present&&e.template.chamber.heater===a?"Chamber":"Nozzle")+" ")]),r("td",{staticClass:"limit"},[r("b-input-group",{attrs:{append:"C"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.getPresetHeater(a).temp_limit,expression:"getPresetHeater(index).temp_limit"}],attrs:{value:t.temp_limit,title:"Maximum allowed temperature of this heater before a temperature fault is raised",min:"-273",max:"1999",type:"number",step:"any",required:""},on:{input:function(t){e.updateHeater({heater:a,tempLimit:parseFloat(t)})}}})],1)],1),r("td",{staticClass:"pwm"},[r("b-input-group",{attrs:{append:"%"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.getPresetHeater(a).scale_factor,expression:"getPresetHeater(index).scale_factor"}],attrs:{value:t.scale_factor,title:"Final PID heater scale factor. You can change this to compensate voltage and heater resistance parameters",disabled:e.isPwmLimitDisabled(a),min:"0",max:"100",type:"number",step:"any",required:""},on:{input:function(t){e.updateHeater({heater:a,pwmLimit:parseFloat(t)})}}})],1)],1),r("td",{staticClass:"thermistor"},[r("thermistor-input",{attrs:{index:a,"preset-heater":e.getPresetHeater(a),title:"Heater thermistor resistance at 25C",parameter:"thermistor",unit:"Ω",min:"1"}})],1),r("td",{staticClass:"beta"},[r("thermistor-input",{attrs:{index:a,"preset-heater":e.getPresetHeater(a),title:"β model coefficient",parameter:"beta",unit:"K",min:"1"}})],1),r("td",[r("thermistor-input",{attrs:{index:a,"preset-heater":e.getPresetHeater(a),title:"C coefficient of the Steinhart-Hart equation. May be used to improve the β model parameters too",parameter:"c"}})],1),e.template.firmware<3?r("td",[r("sensor-input",{directives:[{name:"preset",rawName:"v-preset",value:a,expression:"index"}],attrs:{index:a}})],1):e._e()]):e._e()})),0)])])],1)},Le=[],We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[void 0!==e.unit?r("b-input-group",{attrs:{append:e.unit}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetHeater[e.parameter],expression:"presetHeater[parameter]"}],attrs:{id:e.id,title:e.title,disabled:e.heater.channel>=100,min:e.min,max:e.max,type:"number",step:"any",required:""},model:{value:e.value,callback:function(t){e.value=e._n(t)},expression:"value"}})],1):r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.presetHeater[e.parameter],expression:"presetHeater[parameter]"}],attrs:{id:e.id,title:e.title,disabled:e.heater.channel>=100,min:e.min,max:e.max,type:"number",step:"any",required:""},model:{value:e.value,callback:function(t){e.value=e._n(t)},expression:"value"}}),r("b-popover",{attrs:{target:e.id,show:e.popoverShown,placement:"right",title:"Calculate Heater Parameters","custom-class":"min-popover-width",triggers:"focus"},on:{"update:show":function(t){e.popoverShown=t},show:e.onShow}},[r("b-form-group",{attrs:{label:"Thermistor Preset:"}},[r("b-select",{attrs:{options:e.sensorPresets},model:{value:e.sensorPreset,callback:function(t){e.sensorPreset=t},expression:"sensorPreset"}})],1),"custom"==e.sensorPreset?r("b-card",{attrs:{"bg-variant":"light"}},[r("p",[e._v("Measure the resistances of your thermistor at three different temperatures and enter your values below:")]),r("b-form-row",[r("b-col",{attrs:{cols:"5"}},[r("b-form-group",{attrs:{"label-cols":"3",label:"T1:"}},[r("b-input-group",{attrs:{append:"C"}},[r("b-input",{attrs:{min:"-273",max:"1999",type:"number",step:"any",required:""},model:{value:e.parameters.t1,callback:function(t){e.$set(e.parameters,"t1",e._n(t))},expression:"parameters.t1"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"3",label:"T2:"}},[r("b-input-group",{attrs:{append:"C"}},[r("b-input",{attrs:{min:"-273",max:"1999",type:"number",step:"any",required:""},model:{value:e.parameters.t2,callback:function(t){e.$set(e.parameters,"t2",e._n(t))},expression:"parameters.t2"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"3",label:"T3:"}},[r("b-input-group",{attrs:{append:"C"}},[r("b-input",{attrs:{min:"-273",max:"1999",type:"number",step:"any"},model:{value:e.parameters.t3,callback:function(t){e.$set(e.parameters,"t3",e._n(t))},expression:"parameters.t3"}})],1)],1)],1),r("b-col",{attrs:{cols:"7"}},[r("b-form-group",{attrs:{"label-cols":"3",label:"R1:","label-class":"text-right"}},[r("b-input-group",{attrs:{append:"Ω"}},[r("b-input",{attrs:{min:"1",type:"number",step:"any",required:""},model:{value:e.parameters.r1,callback:function(t){e.$set(e.parameters,"r1",e._n(t))},expression:"parameters.r1"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"3",label:"R2:","label-class":"text-right"}},[r("b-input-group",{attrs:{append:"Ω"}},[r("b-input",{attrs:{min:"1",type:"number",step:"any",required:""},model:{value:e.parameters.r2,callback:function(t){e.$set(e.parameters,"r2",e._n(t))},expression:"parameters.r2"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"3",label:"R3:","label-class":"text-right"}},[r("b-input-group",{attrs:{append:"Ω"}},[r("b-input",{attrs:{min:"1",type:"number",step:"any"},model:{value:e.parameters.r3,callback:function(t){e.$set(e.parameters,"r3",e._n(t))},expression:"parameters.r3"}})],1)],1)],1)],1),r("span",[e._v("The third pair is optional.")])],1):e._e(),r("b-card",{staticClass:"mt-3"},[r("h3",{staticClass:"mb-3"},[e._v("Resulting Coefficients:")]),r("b-form-row",{staticClass:"mb-0"},[r("b-col",[r("h4",{class:{"text-danger":!e.isValid}},[e._v("R25: "+e._s(e.isValid?Math.round(e.calculatedParameters.thermistor)+" Ω":"error")+" ")]),r("h4",{class:{"text-danger":!e.isValid}},[e._v("β: "+e._s(e.isValid?(e.calculatedParameters.b&&e.isThirdPairValid?Math.round(1/e.calculatedParameters.b):e.calculatedParameters.beta)+" K":"error")+" ")]),r("h4",{directives:[{name:"show",rawName:"v-show",value:e.template.firmware>1.16,expression:"template.firmware > 1.16"}],staticClass:"mb-0",class:{"text-danger":!e.isValid}},[e._v("C: "+e._s(e.isValid?"custom"==e.sensorPreset&&!e.isThirdPairValid||0==e.calculatedParameters.c?"0":e.calculatedParameters.c.toExponential(6):"error"))])]),r("b-col",{attrs:{cols:"auto","align-self":"center"}},[r("b-button",{attrs:{size:"sm",variant:"primary",disabled:!e.isValid},on:{click:e.apply}},[r("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" Set ")],1)],1)],1)],1)],1)],1)},Ve=[];const Xe={t1:25,t2:220,t3:"",r1:1e4,r2:1360,r3:""};let Ze=!1,Ge=0;var Ye={computed:{...Object(d["e"])(["template"]),calculatedParameters(){if(this.sensorPreset.constructor===String){let e,t,r,a=Math.log(this.parameters.r2/this.parameters.r1)/(1/(this.parameters.t2+273.15)-1/(this.parameters.t1+273.15)),s=this.parameters.r1*Math.exp(a*(1/298.15-1/(this.parameters.t1+273.15)));if(this.isThirdPairValid){const i=Math.log(this.parameters.r1),o=Math.log(this.parameters.r2),n=Math.log(this.parameters.r3),l=(1/(this.parameters.t2+273.15)-1/(this.parameters.t1+273.15))/(o-i),p=(1/(this.parameters.t3+273.15)-1/(this.parameters.t1+273.15))/(n-i);r=(p-l)/(n-o)/(i+o+n),isNumber(r)?(t=l-r*(i*i+i*o+o*o),e=1/(this.parameters.t1+273.15)-(t+i*i*r)*i):e=t=r=0;const d=1/(2*r)*(e-1/298.15),m=Math.sqrt(Math.pow(t/(3*r),3)+Math.pow(d,2));s=Math.exp(Math.pow(m-d,1/3)-Math.pow(m+d,1/3)),a=Math.round(1/t),r>-1e-16&&r<1e-16&&(r=0)}else a=Math.round(a),r=0;return{thermistor:s,beta:a,c:r}}return this.sensorPreset},heater(){return this.template.heaters[this.index]},isValid(){return isNumber(this.parameters.r1)&&isNumber(this.parameters.r2)&&isNumber(this.parameters.t1)&&isNumber(this.parameters.t2)},isThirdPairValid(){return("custom"!==this.sensorPreset||isNumber(this.parameters.r3)&&isNumber(this.parameters.t3))&&this.template.firmware>1.16},value:{get(){return this.heater[this.parameter]},set(e){const t={heater:this.index};t[this.parameter]=e,this.updateHeater(t)}}},data(){return{id:"thermistorInput"+Ge++,parameters:Xe,sensorPreset:"custom",sensorPresets:[{text:"EPCOS B57863S0103F040 (10k, RepRapPro beds)",value:{thermistor:1e4,beta:3988,c:0}},{text:"EPCOS B57560G1104F (100k)",value:{thermistor:1e5,beta:4092,c:0}},{text:"Hisens 3950 1% up to 300°C (Simple ONE and All In ONE hot ends)",value:{thermistor:1e4,beta:4100,c:0}},{text:"Honeywell 135-104QAD-J01 (RepRapPro hot ends)",value:{thermistor:1e5,beta:4138,c:0}},{text:"QWG-104F-3950 (QU-BD silicone bed)",value:{thermistor:1e5,beta:3950,c:0}},{text:"Semitec 104-GT2 (E3D hot ends)",value:{thermistor:1e5,b:.00021164021164021165,beta:4388,c:7.06e-8}},{text:"Slice Engineering High-Temperature Thermistor",value:{thermistor:5e5,beta:4723,c:1.19622e-7}},{text:"Custom",value:"custom"}],popoverShown:!1}},methods:{...Object(d["d"])(["updateHeater"]),apply(){const e=this.calculatedParameters;this.updateHeater({heater:this.index,thermistor:Math.round(e.thermistor),beta:this.isThirdPairValid&&e.b?Math.round(1/e.b):e.beta,c:this.isThirdPairValid?parseFloat(e.c.toExponential(6)):0}),this.popoverShown=!1},onShow(e){if(!Ze){this.sensorPreset="custom";for(let e=0;e<this.sensorPresets.length;e++){const t=this.sensorPresets[e].value,r=this.isThirdPairValid&&t.b?Math.round(1/t.b):t.beta;if(this.heater.thermistor===t.thermistor&&this.heater.beta===r&&this.heater.c===t.c){this.sensorPreset=t;break}}}}},props:{index:{type:Number,required:!0},presetHeater:{type:Object,required:!0},min:String,max:String,parameter:{type:String,required:!0},title:String,unit:String},watch:{parameters:{deep:!0,handler:()=>Ze=!0}}},Ke=Ye,Ue=(r("5642"),Object(S["a"])(Ke,We,Ve,!1,null,"3ae6348a",null)),Je=Ue.exports,Qe={components:{"thermistor-input":Je,"sensor-input":K},computed:{...Object(d["e"])(["board","preset","template"]),...Object(d["c"])(["canAddNozzle","canRemoveNozzle"]),...Object(m["b"])({bedPid:"template.bed.use_pid",chamberPid:"template.chamber.use_pid"}),...Object(m["c"])(["template.heaters"]),bedHeaters(){const e=[];for(let t=0;t<g.getMaxHeaters(this.template);t++){const r=0===t&&this.template.bed_is_nozzle||this.template.chamber.present&&this.template.chamber.heater===t||"bltouch"===this.template.probe.type&&this.template.probe.pwm_channel===t;e.push({text:0===t?"Bed Heater":`E${t-1} Heater`,value:t,disabled:r})}return e},bedPresent:{get(){return this.template.bed.present},set(e){this.updateBed({present:e})}},bedHeater:{get(){return this.template.bed.heater},set(e){this.updateBed({heater:e})}},bedIsNozzle:{get(){return this.template.bed_is_nozzle},set(e){this.updateBed({isNozzle:e})}},chamberHeaters(){const e=[];for(let t=0;t<g.getMaxHeaters(this.template);t++){const r=0===t&&this.template.bed_is_nozzle||this.template.bed.present&&this.template.bed.heater===t||"bltouch"===this.template.probe.type&&this.template.probe.pwm_channel===t;e.push({text:0===t?"Bed Heater":`E${t-1} Heater`,value:t,disabled:r})}return e},chamberPresent:{get(){return this.template.chamber.present},set(e){this.updateChamber({present:e})}},chamberHeater:{get(){return this.template.chamber.heater},set(e){this.updateChamber({heater:e})}}},methods:{...Object(d["d"])(["addNozzle","removeNozzle","updateBed","updateChamber","updateHeater"]),getPresetHeaterIndex(e){return e>=this.preset.heaters.length?this.preset.heaters.length-1:e},getPresetHeater(e){return this.preset.heaters[this.getPresetHeaterIndex(e)]},isPwmLimitDisabled(e){return this.template.bed.present&&!this.template.bed.use_pid&&this.template.bed.heater===e||this.template.chamber.present&&!this.template.chamber.use_pid&&this.template.chamber.heater==e}}},et=Qe,tt=(r("dd4c"),Object(S["a"])(et,je,Le,!1,null,"ee67c124",null)),rt=tt.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{staticClass:"mt-3",attrs:{"no-body":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("span",{staticClass:"mt-2"},[e._v("Cooling Fans")]),e.template.firmware<3?r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success",disabled:!e.canAddFan},on:{click:function(t){return e.addFan()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add Fan ")],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveFan},on:{click:function(t){return e.removeFan()}}},[r("font-awesome-icon",{attrs:{icon:"minus"}}),e._v(" Remove Fan ")],1)],1):e._e()]},proxy:!0}])},[r("table",{staticClass:"table mb-0"},[r("thead",[r("th",[e._v("Name")]),r("th",[e._v("Speed (%)")]),e.template.firmware<3?r("th",[e._v("Inverted")]):e._e(),r("th",[e._v("Frequency (Hz)")]),r("th",[e._v("Thermostatic Control")]),r("th",[e._v("Monitored Heaters")]),r("th",[e._v("Thermostatic Mode Trigger Temperature")])]),r("tbody",e._l(e.fans,(function(t,a){return r("tr",{key:a},[r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).name,expression:"getFanPreset(index).name"}],attrs:{placeholder:"FAN"+a,title:"Custom label for this fan",type:"text",disabled:e.template.firmware<2.01},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"fan.name"}})],1),r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).value,expression:"getFanPreset(index).value"}],staticClass:"fan-value",attrs:{title:"Initial value of this fan when turned on",min:"0",max:"100",type:"number",step:"any",required:""},model:{value:t.value,callback:function(r){e.$set(t,"value",e._n(r))},expression:"fan.value"}})],1),e.template.firmware<3?r("td",[r("b-form-radio-group",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).inverted,expression:"getFanPreset(index).inverted"}],attrs:{buttons:"","button-variant":"outline-primary",title:"Invert fan PWM signal (required for 4-pin PWM cooling fans)",name:"fan-inverted-"+a},model:{value:t.inverted,callback:function(r){e.$set(t,"inverted",r)},expression:"fan.inverted"}},[r("b-form-radio",{attrs:{value:!0}},[e._v("Yes")]),r("b-form-radio",{attrs:{value:!1}},[e._v("No")])],1)],1):e._e(),r("td",[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).frequency,expression:"getFanPreset(index).frequency"}],attrs:{title:"PWM frequency of this fan. 500Hz works well for normal fans, use 25kHz for 4-pin PWM cooling fans",type:"number",min:"0",max:"65535",step:"any",required:""},model:{value:t.frequency,callback:function(r){e.$set(t,"frequency",e._n(r))},expression:"fan.frequency"}})],1),r("td",[r("b-form-radio-group",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).thermostatic,expression:"getFanPreset(index).thermostatic"}],attrs:{buttons:"","button-variant":"outline-primary",title:"Enable thermostatic control for this fan",name:"fan-thermostatic-"+a},model:{value:t.thermostatic,callback:function(r){e.$set(t,"thermostatic",r)},expression:"fan.thermostatic"}},[r("b-form-radio",{attrs:{value:!0}},[e._v("Yes")]),r("b-form-radio",{attrs:{value:!1}},[e._v("No")])],1)],1),r("td",[r("b-form-checkbox-group",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).heaters,expression:"getFanPreset(index).heaters"}],attrs:{buttons:"","button-variant":"outline-primary",title:"Heaters to monitor for thermostatic control",disabled:!t.thermostatic,name:"fan-heaters-"+a,options:e.heaters},model:{value:t.heaters,callback:function(r){e.$set(t,"heaters",r)},expression:"fan.heaters"}}),0==e.heaters.length?r("span",{staticClass:"text-muted"},[e._v("n/a")]):e._e()],1),r("td",[r("b-input-group",{attrs:{append:"C"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.getFanPreset(a).trigger_temperature,expression:"getFanPreset(index).trigger_temperature"}],attrs:{title:"Temperature at which the thermostatically-controlled fan is activated",disabled:!t.thermostatic,type:"number",min:"-273",max:"1999",step:"any",required:""},model:{value:t.trigger_temperature,callback:function(r){e.$set(t,"trigger_temperature",e._n(r))},expression:"fan.trigger_temperature"}})],1)],1)])})),0)])])],1)},st=[],it={computed:{...Object(d["e"])(["preset","template"]),...Object(d["c"])(["canAddFan","canRemoveFan"]),...Object(m["c"])(["template.fans"]),heaters(){const e=[];return this.template.heaters.forEach((function(t,r){null!=t&&e.push({text:0==r?"Bed":"E"+(r-1),value:r})})),e}},methods:{...Object(d["d"])(["addFan","removeFan"]),getFanPreset(e){return e<this.preset.fans.length?this.preset.fans[e]:this.preset.fans[this.preset.fans.length-1]}}},ot=it,nt=(r("2fd9"),Object(S["a"])(ot,at,st,!1,null,"0f0c01dc",null)),lt=nt.exports,pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{attrs:{header:"Tool Preferences"}},[r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.toolchange_wait_for_temperatures,expression:"preset.toolchange_wait_for_temperatures",modifiers:{left:!0}}],attrs:{title:"Generate an M116 code in the tpost macros"},model:{value:e.toolchangeWaitForTemperatures,callback:function(t){e.toolchangeWaitForTemperatures=t},expression:"toolchangeWaitForTemperatures"}},[e._v("Wait for Temperatures to be Reached on Tool Change")]),r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.generate_t_code,expression:"preset.generate_t_code",modifiers:{left:!0}}],attrs:{title:"A T-code with the first tool number is generated at the end of config.g"},model:{value:e.generateTCode,callback:function(t){e.generateTCode=t},expression:"generateTCode"}},[e._v("Select the First Tool on Start-Up")])],1),r("b-card",{staticClass:"mt-3",attrs:{"no-body":""}},[r("template",{slot:"header"},[r("span",{staticClass:"mt-2"},[e._v("Tools")]),r("b-button-group",{staticClass:"float-right"},[r("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return e.addTool()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add Tool ")],1),r("b-button",{attrs:{size:"sm",variant:"danger",disabled:!e.canRemoveTool},on:{click:function(t){return e.removeTool()}}},[r("font-awesome-icon",{attrs:{icon:"minus"}}),e._v(" Remove Tool ")],1)],1)],1),r("table",{staticClass:"table mb-0"},[r("thead",[r("tr",[r("th",[e._v("Number")]),r("th",[e._v("Name")]),r("th",[e._v("Extruders")]),r("th",{directives:[{name:"show",rawName:"v-show",value:e.mixingToolsConfigured,expression:"mixingToolsConfigured"}]},[e._v("Mixing Ratio")]),r("th",[e._v("Heaters")]),r("th",[e._v("Fans")]),r("th",[e._v("XYZ Offsets")])])]),r("tbody",e._l(e.tools,(function(t,a){return r("tr",{key:a},[r("td",[r("b-form-input",{attrs:{state:e.isToolNumberUnique(t.number),type:"number",min:"0",step:"1",required:""},model:{value:t.number,callback:function(r){e.$set(t,"number",e._n(r))},expression:"tool.number"}})],1),r("td",[r("b-form-input",{attrs:{placeholder:"optional",type:"text"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"tool.name"}})],1),r("td",{staticClass:"pt-3"},[0!==e.extruders.length?r("b-form-checkbox-group",{attrs:{buttons:"","button-variant":"outline-primary",size:"sm",name:"tool-extruders-"+a,checked:t.extruders,options:e.extruders},on:{input:function(t){return e.setToolExtruders({index:a,extruders:t})}}}):r("span",{staticClass:"text-muted"},[e._v("n/a")])],1),r("td",{directives:[{name:"show",rawName:"v-show",value:e.mixingToolsConfigured,expression:"mixingToolsConfigured"}],staticClass:"pt-3"},[r("mix-ratio",{directives:[{name:"show",rawName:"v-show",value:0!==t.mix_ratio.length,expression:"tool.mix_ratio.length !== 0"}],attrs:{tool:t,index:a}}),r("span",{directives:[{name:"show",rawName:"v-show",value:0===t.mix_ratio.length,expression:"tool.mix_ratio.length === 0"}],staticClass:"text-muted"},[e._v("n/a")])],1),r("td",{staticClass:"pt-3"},[0!==e.heaters.length?r("b-form-checkbox-group",{attrs:{buttons:"","button-variant":"outline-primary",size:"sm",name:"tool-heaters-"+a,options:e.heaters},model:{value:t.heaters,callback:function(r){e.$set(t,"heaters",r)},expression:"tool.heaters"}}):r("span",{staticClass:"text-muted"},[e._v("n/a")])],1),r("td",{staticClass:"pt-3"},[0!==e.fans.length?r("b-form-checkbox-group",{attrs:{buttons:"","button-variant":"outline-primary",size:"sm",name:"tool-fans-"+a,options:e.fans},model:{value:t.fans,callback:function(r){e.$set(t,"fans",r)},expression:"tool.fans"}}):r("span",{staticClass:"text-muted"},[e._v("n/a")])],1),r("td",[r("offset-button",{attrs:{tool:t,index:a}})],1)])})),0)])],2),r("b-alert",{attrs:{show:e.hasDuplicateToolNumbers,variant:"danger"}},[r("strong",[e._v("Error:")]),e._v(" Tool numbers must be unique ")])],1)},dt=[],mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-button",{attrs:{id:e.id,size:"sm",variant:"primary"}},[e._v(e._s(e.tool.mix_ratio.join(":")))]),r("b-popover",{attrs:{target:e.id,placement:"topleft",show:e.popoverShown,title:"Set Mix Ratio",triggers:"click"},on:{"update:show":function(t){e.popoverShown=t}}},[r("b-row",{attrs:{"align-v":"center"}},[r("b-col",{attrs:{cols:"8"}},e._l(e.tool.mix_ratio,(function(t,a){return r("b-row",{key:a,staticClass:"mb-2"},[r("b-col",{staticClass:"pt-2 pr-1",attrs:{cols:"auto"}},[e._v(" "+e._s("E"+a+":")+" ")]),r("b-col",[r("b-input",{attrs:{type:"number",step:"any"},model:{value:e.mixRatio[a],callback:function(t){e.$set(e.mixRatio,a,e._n(t))},expression:"mixRatio[idx]"}})],1)],1)})),1),r("b-col",{attrs:{cols:"4"}},[r("h4",[e._v("Sum:")]),r("h4",{class:{"text-success":e.mixValid,"text-danger":!e.mixValid}},[e._v(e._s(e.mixSum.toFixed(2)))])])],1),r("b-row",{staticClass:"mt-2"},[r("b-col",{staticClass:"text-center"},[r("b-button",{attrs:{variant:"primary",disabled:!e.mixValid},on:{click:e.setMix}},[r("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" Set Mix ")],1)],1)],1)],1)],1)},ut=[];let ct=0;var ht={computed:{mixSum(){let e=0;return this.mixRatio.forEach((function(t){e+=t})),parseFloat(e.toFixed(2))},mixValid(){return 1==this.mixSum}},data(){return{id:"mixRatioInput"+ct++,popoverShown:!1,mixRatio:[]}},methods:{setMix(){this.tool.mix_ratio=this.mixRatio.slice(),this.popoverShown=!1}},beforeMount(){this.mixRatio=this.tool.mix_ratio.slice()},props:{index:{type:Number,required:!0},tool:{type:Object,required:!0}},watch:{"tool.mix_ratio":function(e,t){this.mixRatio=e.slice()}}},bt=ht,vt=Object(S["a"])(bt,mt,ut,!1,null,null,null),ft=vt.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-button",{staticClass:"mt-1",attrs:{id:"offset"+e.index,size:"sm",variant:"primary"}},[r("font-awesome-icon",{attrs:{icon:"edit"}}),e._v(" Edit ")],1),r("b-popover",{ref:"popover",attrs:{target:"offset"+e.index,placement:"topleft",show:e.popoverShown,title:"Edit Tool Offsets",triggers:"click"},on:{"update:show":function(t){e.popoverShown=t}}},[r("b-form-group",{attrs:{"label-cols":"3",label:"X Offset:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.xOffset,callback:function(t){e.xOffset=e._n(t)},expression:"xOffset"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"3",label:"Y Offset:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.yOffset,callback:function(t){e.yOffset=e._n(t)},expression:"yOffset"}})],1)],1),r("b-form-group",{attrs:{"label-cols":"3",label:"Z Offset:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{attrs:{type:"number",step:"any",required:""},model:{value:e.zOffset,callback:function(t){e.zOffset=e._n(t)},expression:"zOffset"}})],1)],1),r("b-row",{staticClass:"mt-2"},[r("b-col",{staticClass:"text-center"},[r("b-button",{attrs:{variant:"primary",disabled:!e.offsetsValid},on:{click:e.setOffsets}},[r("font-awesome-icon",{attrs:{icon:"check"}}),e._v(" Apply ")],1)],1)],1)],1)],1)},_t=[],xt={computed:{offsetsValid(){return isNumber(this.xOffset)&&isNumber(this.yOffset)&&isNumber(this.zOffset)}},data(){return{popoverShown:!1,xOffset:0,yOffset:0,zOffset:0}},methods:{setOffsets(){this.tool.x_offsets=this.xOffset,this.tool.y_offsets=this.yOffset,this.tool.z_offsets=this.zOffset,this.popoverShown=!1}},beforeMount(){this.xOffset=this.tool.x_offset,this.yOffset=this.tool.y_offset,this.zOffset=this.tool.z_offset},props:{index:{type:Number,required:!0},tool:{type:Object,required:!0}},watch:{"tool.x_offset"(e){this.x_offset=e},"tool.y_offset"(e){this.y_offset=e},"tool.z_offset"(e){this.z_offset=e}}},wt=xt,yt=Object(S["a"])(wt,gt,_t,!1,null,null,null),Pt=yt.exports,Ct={components:{"mix-ratio":ft,"offset-button":Pt},computed:{...Object(d["e"])(["preset","template"]),...Object(d["c"])(["canRemoveTool"]),...Object(m["b"])({toolchangeWaitForTemperatures:"template.toolchange_wait_for_temperatures",generateTCode:"template.generate_t_code"}),...Object(m["c"])(["template.tools"]),extruders(){const e=[];for(let t=3;t<this.template.drives.length;t++)e.push({text:"E"+(t-3),value:t-3});return e},heaters(){const e=[];return this.template.heaters.forEach((function(t,r){0===r&&!this.template.bed_is_nozzle||this.template.bed.present&&this.template.bed.heater===r||this.template.chamber.present&&this.template.chamber.heater===r||"bltouch"===this.template.probe.type&&this.template.probe.pwm_channel===r||e.push({text:this.template.firmware>=3?"H"+r:0===r?"Bed":"E"+(r-1),value:r})}),this),e},fans(){const e=[];return this.template.fans.forEach((function(t,r){t.thermostatic||e.push({text:"FAN"+r,value:r})})),e},mixingToolsConfigured(){return-1!==this.tools.findIndex(e=>e.extruders.length>1)},hasDuplicateToolNumbers(){return-1!==this.tools.findIndex((function(e,t){return-1!==this.tools.findIndex((function(r,a){if(t!==a&&isNumber(e.number)&&isNumber(r.number)&&e.number==r.number)return!0}))}),this)}},methods:{...Object(d["d"])(["addTool","removeTool","setToolExtruders"]),isToolNumberUnique(e){let t=0;for(let r=0;r<this.tools.length;r++)this.tools[r].number===e&&t++;return t<=1}}},kt=Ct,Dt=(r("5e6e"),Object(S["a"])(kt,pt,dt,!1,null,"0d7a13a3",null)),St=Dt.exports,Tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-alert",{attrs:{show:"delta"!==e.template.geometry.type}},[r("strong",[e._v("Note:")]),e._v(" 3/4/5 Point Bed Compensation is deprecated. It has been replaced with the new Mesh Bed Compensation. ")]),r("b-card",{directives:[{name:"show",rawName:"v-show",value:"delta"===e.template.geometry.type,expression:"template.geometry.type === 'delta'"}],attrs:{"no-body":"",header:"Bed Probing for Delta Calibration"}},[r("div",{staticClass:"card-body"},[r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"Number of Peripheral Points:"}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.peripheral_points,expression:"preset.peripheral_points"}],attrs:{title:"Number of outer probe points"},on:{change:e.updateProbePoints},model:{value:e.peripheralPoints,callback:function(t){e.peripheralPoints=e._n(t)},expression:"peripheralPoints"}},[r("option",{attrs:{value:"3"}},[e._v("3")]),r("option",{attrs:{value:"6"}},[e._v("6")]),r("option",{attrs:{value:"10"}},[e._v("10")]),r("option",{attrs:{value:"12"}},[e._v("12")])])],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Number of Halfway Points:"}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.halfway_points,expression:"preset.halfway_points"}],attrs:{title:"Number of inner probe points"},on:{change:e.updateProbePoints},model:{value:e.halfwayPoints,callback:function(t){e.halfwayPoints=e._n(t)},expression:"halfwayPoints"}},[r("option",{attrs:{value:"0"}},[e._v("0")]),r("option",{attrs:{value:"3"}},[e._v("3")]),r("option",{attrs:{value:"6",disabled:e.template.peripheral_points+6>16}},[e._v("6")])])],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Number of Calibration Factors:"}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.calibration_factors,expression:"preset.calibration_factors"}],attrs:{title:"Number of adjustment factors used for auto-calibration"},model:{value:e.calibrationFactors,callback:function(t){e.calibrationFactors=e._n(t)},expression:"calibrationFactors"}},[r("option",{attrs:{value:"4"}},[e._v("4")]),r("option",{attrs:{value:"6"}},[e._v("6")]),r("option",{attrs:{value:"7"}},[e._v("7")]),r("option",{attrs:{value:"8"}},[e._v("8")]),r("option",{attrs:{value:"9"}},[e._v("9")])])],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Probing Radius:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.probe_radius,expression:"preset.probe_radius"}],attrs:{title:"Radius of the outer probe points",max:e.template.geometry.delta_radius,type:"number",step:"any",required:""},on:{change:e.updateProbePoints},model:{value:e.probeRadius,callback:function(t){e.probeRadius=e._n(t)},expression:"probeRadius"}})],1)],1)],1)],1),r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.home_first,expression:"preset.home_first",modifiers:{left:!0}}],attrs:{title:"Home all towers in bed.g before any points are probed"},model:{value:e.homeFirst,callback:function(t){e.homeFirst=t},expression:"homeFirst"}},[e._v("Home Towers before Auto-Calibration")])],1),r("points-table",{attrs:{minX:-e.template.probe_radius,minY:-e.template.probe_radius,maxX:e.template.probe_radius,maxY:e.template.probe_radius,disableLastZ:!0},model:{value:e.probePoints,callback:function(t){e.probePoints=t},expression:"probePoints"}})],1),r("b-card",{staticClass:"mt-3",attrs:{header:"Bed Probing for Mesh Bed Compensation"}},[r("b-form-row",{staticClass:"grid-compensation"},["delta"!==e.template.geometry.type?[r("b-col",[r("b-form-group",{attrs:{label:"X Minimum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.mesh.x_min,expression:"preset.mesh.x_min"}],attrs:{title:"Minimum X coordinate of the probe points",min:e.template.geometry.mins[0],max:e.template.geometry.maxes[0],type:"number",step:"any",required:""},model:{value:e.xMin,callback:function(t){e.xMin=e._n(t)},expression:"xMin"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"X Maximum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.mesh.x_max,expression:"preset.mesh.x_max"}],attrs:{title:"Maximum X coordinate of the probe points",min:e.template.geometry.mins[0],max:e.template.geometry.maxes[0],type:"number",step:"any",required:""},model:{value:e.xMax,callback:function(t){e.xMax=e._n(t)},expression:"xMax"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Y Minimum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.mesh.y_min,expression:"preset.mesh.y_min"}],attrs:{title:"Minimum Y coordinate of the probe points",min:e.template.geometry.mins[1],max:e.template.geometry.maxes[1],type:"number",step:"any",required:""},model:{value:e.yMin,callback:function(t){e.yMin=e._n(t)},expression:"yMin"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Y Maximum:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.mesh.y_max,expression:"preset.mesh.y_max"}],attrs:{title:"Maximum Y coordinate of the probe points",min:e.template.geometry.mins[1],max:e.template.geometry.maxes[1],type:"number",step:"any",required:""},model:{value:e.yMax,callback:function(t){e.yMax=e._n(t)},expression:"yMax"}})],1)],1)],1)]:r("b-col",[r("b-form-group",{attrs:{label:"Probing Radius:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.mesh.radius,expression:"preset.mesh.radius"}],attrs:{title:"Radius of the probe points",min:1,max:e.template.geometry.delta_radius,type:"number",step:"any",required:""},model:{value:e.radius,callback:function(t){e.radius=e._n(t)},expression:"radius"}})],1)],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Grid Spacing:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.mesh.spacing,expression:"preset.mesh.spacing"}],attrs:{title:"Spacing between the probe points",min:1,max:e.maxGridSpacing,type:"number",step:"any",required:""},model:{value:e.spacing,callback:function(t){e.spacing=e._n(t)},expression:"spacing"}})],1)],1)],1)],2)],1),r("b-card",{staticClass:"mt-3",attrs:{header:"Orthogonal Axis Compensation"}},[r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.orthogonal.compensation,expression:"preset.orthogonal.compensation",modifiers:{left:!0}}],attrs:{title:"Check this to enable orthogonal axis compensation via M556"},model:{value:e.orthogonalCompensation,callback:function(t){e.orthogonalCompensation=t},expression:"orthogonalCompensation"}},[e._v("Enable Orthogonal Axis Compensation")]),r("b-form-row",{directives:[{name:"show",rawName:"v-show",value:e.orthogonalCompensation,expression:"orthogonalCompensation"}],staticClass:"mt-3 pl-4"},[r("b-col",[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Measured Height:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.orthogonal.height,expression:"preset.orthogonal.height"}],attrs:{title:"Height of the deviations measured for orthogonal axis compensation",min:"1",type:"number",step:"any",required:""},model:{value:e.orthogonalHeight,callback:function(t){e.orthogonalHeight=e._n(t)},expression:"orthogonalHeight"}})],1)],1)],1),r("b-col",[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Deviation in X:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.orthogonal.deviations[0],expression:"preset.orthogonal.deviations[0]"}],attrs:{title:"Deviation in XY direction",type:"number",step:"any",required:""},model:{value:e.xDeviation,callback:function(t){e.xDeviation=e._n(t)},expression:"xDeviation"}})],1)],1)],1),r("b-col",[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Deviation in Y:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.orthogonal.deviations[1],expression:"preset.orthogonal.deviations[1]"}],attrs:{title:"Deviation in YZ direction",type:"number",step:"any",required:""},model:{value:e.yDeviation,callback:function(t){e.yDeviation=e._n(t)},expression:"yDeviation"}})],1)],1)],1),r("b-col",[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Deviation in Z:"}},[r("b-input-group",{attrs:{append:"mm"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.orthogonal.deviations[2],expression:"preset.orthogonal.deviations[2]"}],attrs:{title:"Deviation in XZ direction",type:"number",step:"any",required:""},model:{value:e.zDeviation,callback:function(t){e.zDeviation=e._n(t)},expression:"zDeviation"}})],1)],1)],1)],1)],1)],1)},Mt=[],Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("table",{staticClass:"table table-sm mb-0"},[e._m(0),r("tbody",e._l(e.value,(function(t,a){return r("tr",{key:a},[r("td",{staticClass:"text-center pt-2"},[e._v(e._s(a+1))]),r("td",[r("b-input-group",{attrs:{append:"mm",size:"sm"}},[r("b-form-input",{attrs:{min:e.minX,max:e.maxX,type:"number",step:"any",required:""},model:{value:t.x,callback:function(r){e.$set(t,"x",e._n(r))},expression:"point.x"}})],1)],1),r("td",[r("b-input-group",{attrs:{append:"mm",size:"sm"}},[r("b-form-input",{attrs:{min:e.minY,max:e.maxY,type:"number",step:"any",required:""},model:{value:t.y,callback:function(r){e.$set(t,"y",e._n(r))},expression:"point.y"}})],1)],1),r("td",[r("b-input-group",{attrs:{append:"mm",size:"sm"}},[r("b-form-input",{attrs:{disabled:e.disableLastZ&&a==e.value.length-1,type:"number",step:"any",required:""},model:{value:t.z,callback:function(r){e.$set(t,"z",e._n(r))},expression:"point.z"}})],1)],1)])})),0)])},Ft=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("th",{staticClass:"text-center"},[e._v("Probe Point")]),r("th",[e._v("X Coordinate")]),r("th",[e._v("Y Coordinate")]),r("th",[e._v("Height Correction")])])}],zt={props:{value:{type:Array,required:!0},minX:Number,minY:Number,maxX:Number,maxY:Number,disableLastZ:Boolean}},Rt=zt,Et=Object(S["a"])(Rt,Nt,Ft,!1,null,null,null),Ot=Et.exports,Bt={components:{"points-table":Ot},computed:{...Object(d["e"])(["preset","template"]),...Object(m["b"])({peripheralPoints:"template.peripheral_points",halfwayPoints:"template.halfway_points",calibrationFactors:"template.calibration_factors",probeRadius:"template.probe_radius",homeFirst:"template.home_first",xMin:"template.mesh.x_min",xMax:"template.mesh.x_max",yMin:"template.mesh.y_min",yMax:"template.mesh.y_max",radius:"template.mesh.radius",spacing:"template.mesh.spacing",orthogonalCompensation:"template.orthogonal.compensation",orthogonalHeight:"template.orthogonal.height"}),...Object(m["c"])({probePoints:"template.probe.points"}),maxGridSpacing(){return"delta"===this.template.geometry?this.template.mesh.radius/2:this.template.bed.width/2},xDeviation:{get(){return this.template.orthogonal.deviations[0]},set(e){this.setOrthogonalDeviation({axis:0,value:e})}},yDeviation:{get(){return this.template.orthogonal.deviations[1]},set(e){this.setOrthogonalDeviation({axis:1,value:e})}},zDeviation:{get(){return this.template.orthogonal.deviations[2]},set(e){this.setOrthogonalDeviation({axis:2,value:e})}}},methods:Object(d["d"])(["updateProbePoints","setOrthogonalDeviation"])},At=Bt,Ht=(r("85e1"),Object(S["a"])(At,Tt,Mt,!1,null,"7fa1f91d",null)),It=Ht.exports,qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-row",[r("b-col",[r("b-card",{attrs:{header:"Direct-Connect Display"}},[r("b-form-row",[r("b-col",[r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:1===e.preset.display.type,expression:"preset.display.type === 1",modifiers:{left:!0}}],staticClass:"mt-1",attrs:{title:"Check this to enable support for an external 12864 display",disabled:!e.board.supports12864},model:{value:e.is12864,callback:function(t){e.is12864=t},expression:"is12864"}},[e._v("12864 Display present")])],1),r("b-col",{directives:[{name:"show",rawName:"v-show",value:e.is12864,expression:"is12864"}]},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Encoder Steps:"}},[r("b-select",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.display.encoder_steps,expression:"preset.display.encoder_steps"}],attrs:{title:"Number of pulses generated by the rotary encoder per detent"},model:{value:e.encoderSteps,callback:function(t){e.encoderSteps=e._n(t)},expression:"encoderSteps"}},[r("option",{attrs:{value:"-4"}},[e._v("-4")]),r("option",{attrs:{value:"-2"}},[e._v("-2")]),r("option",{attrs:{value:"-1"}},[e._v("-1")]),r("option",{attrs:{value:"1"}},[e._v("1")]),r("option",{attrs:{value:"2"}},[e._v("2")]),r("option",{attrs:{value:"4"}},[e._v("4")])])],1)],1),r("b-col",{directives:[{name:"show",rawName:"v-show",value:e.is12864&&e.template.firmware>=2,expression:"is12864 && template.firmware >= 2"}]},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"SPI Frequency:"}},[r("b-input-group",{attrs:{append:"Hz"}},[r("b-form-input",{attrs:{type:"number",step:"1",required:""},model:{value:e.spiFrequency,callback:function(t){e.spiFrequency=e._n(t)},expression:"spiFrequency"}})],1)],1)],1)],1)],1)],1),r("b-col",{directives:[{name:"show",rawName:"v-show",value:e.is12864,expression:"is12864"}],attrs:{cols:"4"}},[r("b-card",{attrs:{"no-body":""}},[r("template",{slot:"header"},[r("span",[e._v("128x64 Display Preview")]),r("a",{staticClass:"float-right",attrs:{href:"#",id:"visibility"},on:{click:function(e){e.preventDefault()}}},[r("font-awesome-icon",{attrs:{icon:"eye"}}),e._v(" Visibility ")],1),r("b-popover",{attrs:{target:"visibility",placement:"right",triggers:"click blur"}},[r("b-form-radio-group",{staticClass:"w-100",attrs:{name:"machineState",buttons:"",stacked:""},model:{value:e.machineState,callback:function(t){e.machineState=e._n(t)},expression:"machineState"}},[r("b-form-radio",{attrs:{value:"0"}},[e._v("Not Printing")]),r("b-form-radio",{attrs:{value:"1","button-variant":"success"}},[e._v("Printing")]),r("b-form-radio",{attrs:{value:"2","button-variant":"warning"}},[e._v("Paused or Pausing")]),r("b-form-radio",{attrs:{value:"3","button-variant":"warning"}},[e._v("Resuming")])],1),r("b-form-radio-group",{staticClass:"mt-2 w-100",attrs:{name:"sdMounted",buttons:"",stacked:"",block:""},model:{value:e.sdMounted,callback:function(t){e.sdMounted=t},expression:"sdMounted"}},[r("b-form-radio",{attrs:{value:!0,"button-variant":"success"}},[e._v("SD Card 0 is mounted")]),r("b-form-radio",{attrs:{value:!1,"button-variant":"danger"}},[e._v("SD Card 0 is NOT mounted")])],1),r("b-form-checkbox",{staticClass:"mt-2 w-100-checkbox",attrs:{name:"toolHeaterFault",button:"","button-variant":"danger"},model:{value:e.toolHeaterFault,callback:function(t){e.toolHeaterFault=t},expression:"toolHeaterFault"}},[e._v("Tool or Heater Fault")]),r("b-form-checkbox",{staticClass:"mt-1 w-100-checkbox",attrs:{name:"bedFault",button:"","button-variant":"danger"},model:{value:e.bedFault,callback:function(t){e.bedFault=t},expression:"bedFault"}},[e._v("Heated Bed Fault")])],1)],1),r("display-preview",{attrs:{value:e.fileContent,"current-line":e.currentLine,"machine-state":e.machineState,"sd-mounted":e.sdMounted,"toolHeater-fault":e.toolHeaterFault,"bed-fault":e.bedFault}})],2)],1)],1),r("b-row",{directives:[{name:"show",rawName:"v-show",value:0!==e.displayType,expression:"displayType !== 0"}],staticClass:"mt-3"},[r("b-col",{attrs:{cols:"4"}},[r("b-card",{attrs:{"no-body":""}},[r("template",{slot:"header"},[r("span",{staticClass:"mt-2"},[e._v("Menus")]),r("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"success"},on:{click:function(t){return e.$refs.modalAddMenu.show()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add ")],1)],1),r("b-list-group",e._l(e.menus,(function(t){return r("b-list-group-item",{key:t.name,staticClass:"d-flex justify-content-between align-items-center",attrs:{button:"",active:t===e.selectedMenu},on:{click:function(r){e.selectedMenu=t}}},[e._v(" "+e._s(t.name)+" "),"main"!==t.name?r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return r.stopPropagation(),e.removeMenu(t.name)}}},[r("font-awesome-icon",{attrs:{icon:"trash"}})],1):e._e()],1)})),1)],2),r("b-card",{staticClass:"mt-3",attrs:{"no-body":""}},[r("template",{slot:"header"},[r("span",{staticClass:"mt-2"},[e._v("Images")]),r("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:"success"},on:{click:function(t){return e.$refs.inputImage.click()}}},[r("font-awesome-icon",{attrs:{icon:"plus"}}),e._v(" Add ")],1)],1),r("b-list-group",e._l(e.images,(function(t){return r("b-list-group-item",{key:t.name,staticClass:"d-flex justify-content-between align-items-center",attrs:{button:""},on:{click:function(r){return e.insertImage(t.name)}}},[e._v(" "+e._s(t.name)+" "),r("b-button-group",[r("b-button",{attrs:{size:"sm",variant:"secondary"},on:{click:function(r){return r.stopPropagation(),e.invertImage(t)}}},[r("font-awesome-icon",{attrs:{icon:"dot-circle"}})],1),r("b-button",{attrs:{href:e.getDataURL(t.value),download:t.name,size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation()}}},[r("font-awesome-icon",{attrs:{icon:"download"}})],1),r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return r.stopPropagation(),e.removeDisplayImage(t.name)}}},[r("font-awesome-icon",{attrs:{icon:"trash"}})],1)],1)],1)})),1)],2)],1),r("b-col",{attrs:{cols:"8"}},[r("b-card",{attrs:{"no-body":""}},[r("template",{slot:"header"},[r("span",[e._v("Menu Editor")]),r("a",{staticClass:"float-right",attrs:{href:"https://duet3d.dozuki.com/Wiki/Duet_2_Maestro_12864_display_menu_system#Section_Menu_files",target:"_blank"}},[e._v("List of Supported Commands")])]),r("b-form-textarea",{attrs:{disabled:!e.selectedMenu,id:"editor",rows:"4","max-rows":"8"},on:{mouseup:e.updateLineNumber,keyup:e.updateLineNumber,blur:function(t){e.currentLine=-1}},model:{value:e.fileContent,callback:function(t){e.fileContent=t},expression:"fileContent"}})],2)],1)],1),r("b-modal",{ref:"modalAddMenu",attrs:{title:"Enter a Name",size:"md","cancel-variant":"danger","ok-variant":"success","ok-disabled":!e.canAddMenu},on:{ok:e.addMenu}},[r("form",{ref:"formAddMenu",on:{submit:function(t){return t.preventDefault(),e.submitAddMenu(t)}}},[r("b-form-group",{attrs:{label:"Please enter the Name for the new Menu:"}},[r("b-form-input",{attrs:{type:"text",required:"",maxlength:"250",autofocus:""},model:{value:e.menuToAdd,callback:function(t){e.menuToAdd=t},expression:"menuToAdd"}})],1)],1)]),r("input",{ref:"inputImage",attrs:{type:"file",accept:".img,image/*",hidden:""},on:{change:e.imageSelected}})],1)},$t=[];function jt(e){for(var t,r,a,s,i,o="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=new Uint8Array(e),p=l.byteLength,d=p%3,m=p-d,u=0;u<m;u+=3)i=l[u]<<16|l[u+1]<<8|l[u+2],t=(16515072&i)>>18,r=(258048&i)>>12,a=(4032&i)>>6,s=63&i,o+=n[t]+n[r]+n[a]+n[s];return 1==d?(i=l[m],t=(252&i)>>2,r=(3&i)<<4,o+=n[t]+n[r]+"=="):2==d&&(i=l[m]<<8|l[m+1],t=(64512&i)>>10,r=(1008&i)>>4,a=(15&i)<<2,o+=n[t]+n[r]+n[a]+"="),o}var Lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("canvas",{ref:"canvas",attrs:{width:e.width,height:e.height}})])},Wt=[];let Vt,Xt,Zt;var Gt={computed:Object(d["e"])(["template"]),mounted(){this.draw()},methods:{draw(){const e=this.$refs.canvas.getContext("2d");e.fillStyle="rgb(0, 0, 255)",e.fillRect(0,0,128,64),Vt=Xt=Zt=0,this.value.split("\n").forEach((function(t,r){this.renderLine(e,t,r===this.currentLine)}),this)},renderLine(e,t,r){const a={};let s=null,i="",o=!0,n=!1,l=!1;for(let p=0;p<t.length;p++){let e=p===t.length-1;const r=t[p];if(o){if(" "===r||"\t"===r)o=!1;else if(";"===r)break}else n?'"'===r?(n=!1,e=l=!0):i+=r:('"'===r?(l&&(i+='"'),n=!0):" "===r||"\t"===r||";"===r?e=!0:null===s?s=r.toUpperCase():i+=r,l=!1);if(e&&(""!==i&&(null!==s?a[s]=i:this.template.firmware>=2.02&&(a.T=i),i=""),s=null,";"===r))break}a.hasOwnProperty("R")&&(Vt=parseInt(a.R)),a.hasOwnProperty("C")&&(Xt=parseInt(a.C)),a.hasOwnProperty("F")&&(Zt=parseInt(a.F)),isNumber(Vt)&&isNumber(Xt)&&this.checkVisibility(a.V||0)&&(t.startsWith("image")?this.drawImage(e,a.L,r):t.startsWith("text")?Xt+=this.drawText(e,a.T||"",Vt,Xt,a,r?2:0):t.startsWith("button")?(a.H="1",Xt+=this.drawText(e,a.T||"",Vt,Xt,a,r?1:0)):t.startsWith("value")||t.startsWith("alter")?Xt+=this.drawText(e,(0).toFixed(a.D||0),Vt,Xt,a,r?1:0):t.startsWith("files"))},checkVisibility(e){const t=parseInt(e);switch(t){case 2:return 1===this.machineState;case 3:return 1!==this.machineState;case 4:return 0!==this.machineState;case 5:return 0===this.machineState;case 6:return 2===this.machineState;case 7:return 1===this.machineState||3===this.machineState;case 10:return this.sdMounted;case 11:return!this.sdMounted;case 20:return this.toolHeaterFault;case 28:return this.bedFault}return!0},drawText(e,t,r,a,s,i){const o=1===Zt?11:9;let n;if(e.font=o+"px Liberation Sans",s.hasOwnProperty("W")){n=parseInt(s.W);while(""!==t&&e.measureText(t).width>n)t=t.substr(0,t.length-1)}else n=e.measureText(t).width;switch(1===i?(e.fillStyle="rgb(255, 255, 255)",e.fillRect(a,r,n,o),e.fillStyle="rgb(0, 0, 255)"):(2===i&&(e.fillStyle="rgb(64, 64, 255)",e.fillRect(a,r,n,o)),e.fillStyle="rgb(255, 255, 255)"),s.H){case"1":e.textAlign="center",e.fillText(t,a+n/2,r+o-1,n);break;case"2":e.textAlign="right",e.fillText(t,a+n,r+o-1,n);break;default:e.textAlign="left",e.fillText(t,a,r+o-1,n);break}return n},drawImage(e,t,r){for(let a=0;a<this.template.display.images.length;a++){const s=this.template.display.images[a];if(t===s.name&&s.value.length>2){const t=s.value[0],a=Math.ceil(t/8),i=s.value[1];if(s.value.length>=a*i+2){const o=e.getImageData(Xt,Vt,t,i),n=o.data;let l=0;for(let e=0;e<i;e++)for(let i=0;i<t;i++){const t=s.value[a*e+Math.trunc(i/8)+2],o=t&128>>i%8;0!==o?(n[4*l+0]=255,n[4*l+1]=255,n[4*l+2]=255):r?(n[4*l+0]=64,n[4*l+1]=64,n[4*l+2]=255):(n[4*l+0]=0,n[4*l+1]=0,n[4*l+2]=255),l++}e.putImageData(o,Xt,Vt)}}}}},props:{width:{type:Number,default:128},height:{type:Number,default:64},value:{type:String,required:!0},currentLine:{type:Number,default:-1},machineState:{type:Number,default:0},sdMounted:{type:Boolean,default:!0},toolHeaterFault:{type:Boolean,default:!1},bedFault:{type:Boolean,default:!1}},watch:{value(){this.draw()},currentLine(){this.draw()},machineState(){this.draw()},sdMounted(){this.draw()},toolHeaterFault(){this.draw()},bedFault(){this.draw()},"template.display.images":{deep:!0,handler(){this.draw()}}}},Yt=Gt,Kt=(r("3f68"),Object(S["a"])(Yt,Lt,Wt,!1,null,"5d76dd06",null)),Ut=Kt.exports,Jt={components:{"display-preview":Ut},computed:{...Object(d["e"])(["board","preset","template"]),...Object(m["b"])({displayType:"template.display.type",encoderSteps:"template.display.encoder_steps",spiFrequency:"template.display.spi_frequency"}),...Object(m["c"])({menus:"template.display.menus",images:"template.display.images"}),is12864:{get(){return 1===this.displayType},set(e){this.displayType=e?1:0}},fileContent:{get(){return this.selectedMenu?this.selectedMenu.value:""},set(e){this.selectedMenu.value=e}},canAddMenu(){return""!==this.menuToAdd.trim()}},data(){return{machineState:0,sdMounted:!0,toolHeaterFault:!1,bedFault:!1,currentLine:-1,selectedMenu:null,menuToAdd:""}},mounted(){this.menus.length>0&&(this.selectedMenu=this.menus[0])},methods:{...Object(d["d"])(["setDisplayMenu","removeDisplayMenu","setDisplayImage","removeDisplayImage"]),updateLineNumber(e){let t=0;for(let r=0;r<e.target.selectionStart;r++)"\n"===e.target.value[r]&&t++;this.currentLine=t},submitAddMenu(){this.$refs.modalAddMenu.hide(),this.canAddMenu&&this.addMenu()},addMenu(){this.setDisplayMenu({name:this.menuToAdd,value:""});for(let e=0;e<this.menus.length;e++)if(this.menus[e].name===this.menuToAdd){this.selectedMenu=this.menus[e];break}this.menuToAdd=""},removeMenu(e){this.selectedMenu&&this.selectedMenu.name==e&&(this.selectedMenu=null),this.removeDisplayMenu(e)},imageSelected(e){const t=this;for(let r=0;r<e.target.files.length;r++){let a=e.target.files[r].name;const s=new FileReader;if(a.toLowerCase().endsWith(".img"))s.onload=function(e){const r=Array.from(new Uint8Array(e.target.result));t.setDisplayImage({name:a,value:r})},s.readAsArrayBuffer(e.target.files[r]);else{const i=this.convertImageData;s.onload=function(e){const r=new Image;r.src=e.target.result,r.onload=function(){const e=document.createElement("canvas"),s=e.getContext("2d");e.width=r.width,e.height=r.height,s.drawImage(r,0,0);const o=s.getImageData(0,0,r.width,r.height),n=i(o.data,r.width,r.height);for(let t=a.length-1;t>0;t--)"."===a[t]&&(a=a.substr(0,t));t.setDisplayImage({name:a+".img",value:n}),e.remove(),r.remove()}},s.readAsDataURL(e.target.files[r])}}},convertImageData(e,t,r){const a=Math.ceil(t/8),s=new Array(a*r+2);s.fill(0),s[0]=t,s[1]=r;let i=0;for(let o=0;o<r;o++)for(let r=0;r<t;r++){const t=.3*e[4*i]+.59*e[4*i+1]+.11*e[4*i+2];t<128&&(s[o*a+Math.trunc(r/8)+2]|=128>>r%8),i++}return s},insertImage(e){this.selectedMenu&&(""===this.fileContent.trim()||this.fileContent.endsWith("\n")||this.fileContent.endsWith("\r")||(this.fileContent+="\n"),this.fileContent+=`image R4 C4 L"${e}"`)},invertImage(e){const t=e.value.slice();for(let r=2;r<e.value.length;r++)t[r]=~e.value[r];e.value=t},getDataURL(e){return"data:application/octet-stream;base64,"+encodeURIComponent(jt(e))}},watch:{menus(){this.selectedMenu?-1===this.menus.indexOf(this.selectedMenu)&&(this.selectedMenu=null):this.menus.length>0&&(this.selectedMenu=this.menus[0])}}},Qt=Jt,er=(r("f80c"),Object(S["a"])(Qt,qt,$t,!1,null,null,null)),tr=er.exports,rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[e.template.standalone?r("b-card",{attrs:{header:"Network Settings"}},[r("b-form-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.network.enabled,expression:"preset.network.enabled",modifiers:{left:!0}}],attrs:{title:"Check this to enable networking features (M552 S1)"},model:{value:e.networkEnabled,callback:function(t){e.networkEnabled=t},expression:"networkEnabled"}},[e._v("Enable Network via Ethernet or ESP8266")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.networkEnabled,expression:"networkEnabled"}],staticClass:"pl-4"},[r("b-form-row",{staticClass:"mt-3"},[r("b-col",[r("b-form-group",{attrs:{label:"Password for the web interface (HTTP), FTP, and Telnet:"}},[r("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Optional password to protect your printer from others on your local network (M551)",maxlength:"64",placeholder:"reprap",type:"text"},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}})],1)],1),e.board.hasESP&&e.template.firmware>=3?[r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"Your WiFi Network Name:"}},[r("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Name of the SSID to connect to. Alternatively, you can connect manually via M587",maxlength:"32",placeholder:"configure manually",type:"text"},model:{value:e.ssid,callback:function(t){e.ssid="string"===typeof t?t.trim():t},expression:"ssid"}})],1)],1),r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"WiFi Password:"}},[r("b-form-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"Corresponding password of your SSID",maxlength:"64",placeholder:"none",type:"text"},model:{value:e.ssidPassword,callback:function(t){e.ssidPassword="string"===typeof t?t.trim():t},expression:"ssidPassword"}})],1)],1)]:e._e()],2),r("b-form-row",{staticClass:"mt-3"},[e.board.hasESP&&e.template.firmware>=3?[r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"espDataReadyPin:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.espDataReadyPin,expression:"preset.network.espDataReadyPin"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This is the pin to be used in board.txt for 8266wifi.espDataReadyPin",maxlength:"4",type:"text",required:""},model:{value:e.espDataReadyPin,callback:function(t){e.espDataReadyPin="string"===typeof t?t.trim():t},expression:"espDataReadyPin"}})],1)],1),r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"lpcTfrReadyPin:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.lpcTfrReadyPin,expression:"preset.network.lpcTfrReadyPin"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This is the pin to be used in board.txt for 8266wifi.lpcTfrReadyPin",maxlength:"4",type:"text",required:""},model:{value:e.lpcTfrReadyPin,callback:function(t){e.lpcTfrReadyPin="string"===typeof t?t.trim():t},expression:"lpcTfrReadyPin"}})],1)],1),r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"espResetPin:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.espResetPin,expression:"preset.network.espResetPin"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This is the pin to be used in board.txt for 8266wifi.espResetPin",maxlength:"4",type:"text",required:""},model:{value:e.espResetPin,callback:function(t){e.espResetPin="string"===typeof t?t.trim():t},expression:"espResetPin"}})],1)],1)]:e._e()],2),e.board.hasESP&&e.template.firmware?r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.network.espRXTX,expression:"preset.network.espRXTX",modifiers:{left:!0}}],attrs:{title:"Use RX/TX to update ESP8266 via DWC"},model:{value:e.espRXTX,callback:function(t){e.espRXTX=t},expression:"espRXTX"}},[e._v("Use RX/TX to update ESP8266 via DWC")]):e._e(),e.espRXTX?r("b-form-row",{staticClass:"mt-3"},[r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"serialRxPin:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.serialRxPin,expression:"preset.network.serialRxPin"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This is the pin to be used in board.txt for 8266wifi.serialRxPin",maxlength:"4",type:"text",required:""},model:{value:e.serialRxPin,callback:function(t){e.serialRxPin="string"===typeof t?t.trim():t},expression:"serialRxPin"}})],1)],1),r("b-col",{attrs:{cols:"auto"}},[r("b-form-group",{attrs:{label:"serialTxPin:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.serialTxPin,expression:"preset.network.serialTxPin"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:"This is the pin to be used in board.txt for 8266wifi.serialTxPin",maxlength:"4",type:"text",required:""},model:{value:e.serialTxPin,callback:function(t){e.serialTxPin="string"===typeof t?t.trim():t},expression:"serialTxPin"}})],1)],1)],1):e._e(),e.board.hasEthernet?r("b-col",[r("b-form-group",{attrs:{label:"MAC Address:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.mac_address,expression:"preset.network.mac_address"}],attrs:{title:"MAC address of your machine. This is normally auto-generated",formatter:e.formatMAC,state:e.isValidMAC(e.template.network.mac_address),maxlength:"17",placeholder:"automatically generated",type:"text"},model:{value:e.macAddress,callback:function(t){e.macAddress="string"===typeof t?t.trim():t},expression:"macAddress"}})],1)],1):e._e(),r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.network.dhcp,expression:"preset.network.dhcp",modifiers:{left:!0}}],attrs:{title:"Use DHCP to acquire a dynamic IP configuration from your router (M552)"},model:{value:e.dhcp,callback:function(t){e.dhcp=t},expression:"dhcp"}},[e._v("Acquire Dynamic IP Address via DHCP")]),r("b-form-row",{directives:[{name:"show",rawName:"v-show",value:!e.dhcp,expression:"!dhcp"}],staticClass:"pl-4 mt-3"},[r("b-col",[r("b-form-group",{attrs:{label:"IP Address:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.ip,expression:"preset.network.ip"}],attrs:{title:"Static IP address of your printer (M552). This value should be unique on your local network",state:e.isValidIP(this.template.network.ip),maxlength:"15",type:"text",required:""},model:{value:e.ipAddress,callback:function(t){e.ipAddress="string"===typeof t?t.trim():t},expression:"ipAddress"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Subnet Mask:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.netmask,expression:"preset.network.netmask"}],attrs:{title:"Netmask of your local network (M553)",state:e.isValidNetmask(this.template.network.netmask),maxlength:"15",type:"text",required:""},model:{value:e.netmask,callback:function(t){e.netmask="string"===typeof t?t.trim():t},expression:"netmask"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Gateway:"}},[r("b-form-input",{directives:[{name:"preset",rawName:"v-preset",value:e.preset.network.ip,expression:"preset.network.ip"}],attrs:{title:"This should be the router's IP address on your local network (M554)",state:e.isValidIP(this.template.network.gateway),maxlength:"15",type:"text",required:""},model:{value:e.gateway,callback:function(t){e.gateway="string"===typeof t?t.trim():t},expression:"gateway"}})],1)],1)],1),r("b-checkbox",{directives:[{name:"preset",rawName:"v-preset.left",value:e.preset.network.protocols.http,expression:"preset.network.protocols.http",modifiers:{left:!0}}],staticClass:"mt-3",attrs:{title:"Enable HyperText Transmission Protocol to provide access to the web interface"},model:{value:e.http,callback:function(t){e.http=t},expression:"http"}},[e._v("Enable HTTP (required for the web interface)")])],1)],1):e._e()],1)},ar=[],sr={computed:{...Object(d["e"])(["board","preset","template"]),...Object(m["b"])({networkEnabled:"template.network.enabled",password:"template.network.password",ssid:"template.network.ssid",ssidPassword:"template.network.ssid_password",macAddress:"template.network.mac_address",dhcp:"template.network.dhcp",ipAddress:"template.network.ip",netmask:"template.network.netmask",gateway:"template.network.gateway",http:"template.network.protocols.http",ftp:"template.network.protocols.ftp",telnet:"template.network.protocols.telnet",espDataReadyPin:"board.espDataReadyPin",lpcTfrReadyPin:"board.lpcTfrReadyPin",espResetPin:"board.espResetPin",espRXTX:"template.network.espRXTX",serialRxPin:"board.serialRxPin",serialTxPin:"board.serialTxPin"})},methods:{formatMAC(e,t){return e.toUpperCase()},isValidIP(e){let t=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(e);return!!t&&(t[1]<255&&t[2]<255&&t[3]<255&&t[4]<255)},isValidNetmask(e){let t=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/.exec(e);return!!t&&(t[1]<256&&t[2]<256&&t[3]<256&&t[4]<256)},isValidMAC(e){return""===e||/^[\dA-F][\dA-F]:[\dA-F][\dA-F]:[\dA-F][\dA-F]:[\dA-F][\dA-F]:[\dA-F][\dA-F]:[\dA-F][\dA-F]$/.test(e)}}},ir=sr,or=Object(S["a"])(ir,rr,ar,!1,null,null,null),nr=or.exports,lr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-card",{directives:[{name:"show",rawName:"v-show",value:e.standalone,expression:"standalone"}],staticClass:"mt-3",attrs:{header:"Extra Files"}},[r("b-checkbox",{model:{value:e.addDWC,callback:function(t){e.addDWC=t},expression:"addDWC"}},[e._v("Get the latest stable Duet Web Control version")]),r("b-checkbox",{model:{value:e.addRRF,callback:function(t){e.addRRF=t},expression:"addRRF"}},[e._v("Get the latest stable RepRapFirmware version")])],1),r("b-card",{staticClass:"mt-3",attrs:{header:"Miscellaneous"}},[r("b-checkbox",{staticClass:"mb-3",model:{value:e.panelDue,callback:function(t){e.panelDue=t},expression:"panelDue"}},[e._v("Enable support for PanelDue")]),r("label",{attrs:{for:"custom_settings"}},[e._v("Custom Settings for config.g:")]),r("label",{staticClass:"float-right"},[r("a",{attrs:{href:"https://duet3d.com/wiki/G-code",target:"_blank"}},[e._v("Full list of all available G-codes")])]),r("b-form-textarea",{attrs:{id:"custom_settings",rows:"4","max-rows":"8"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:(t.preventDefault(),e.onTextareaTab(t))}},model:{value:e.customSettings,callback:function(t){e.customSettings=t},expression:"customSettings"}})],1)],1)},pr=[],dr={computed:Object(m["b"])({addDWC:"addDWC",addRRF:"addRRF",panelDue:"template.panelDue",customSettings:"template.custom_settings",standalone:"template.standalone"}),methods:{onTextareaTab(e){const t=e.target.selectionStart,r=e.target.value.slice(0,t),a=e.target.value.slice(t);this.custom_settings=`${r}\t${a}`,e.target.value=this.custom_settings,e.target.selectionEnd=e.target.selectionStart=t+1}}},mr=dr,ur=(r("c64b"),Object(S["a"])(mr,lr,pr,!1,null,null,null)),cr=ur.exports;a["default"].use(y["a"]);var hr=new y["a"]({mode:"history",base:"/LPCConfigurator/",routes:[{path:"/Start",component:M},{path:"/General",component:j},{path:"/Mapping",component:ee},{path:"/Motors",component:Te},{path:"/Endstops",component:$e},{path:"/Heaters",component:rt},{path:"/Fans",component:lt},{path:"/Tools",component:St},{path:"/Compensation",component:It},{path:"/Display",component:tr},{path:"/Network",component:nr},{path:"/Finish",component:cr},{path:"*",redirect:"/Start"}]}),br={computed:{...Object(d["e"])(["board","template","addDWC","addRRF"]),isFirstPage(){return"/Start"===this.$route.path},isLastPage(){return"/Finish"===this.$route.path}},data(){return{configLink:"#",files:[],generatingZIP:!1,message:"Loading...",rrfVersion:null,rrfLink:null,rrfFile:null,iapLink:null,iapFile:null,dwcVersion:null,dwcLink:null,dwcFile:null}},methods:{...Object(d["d"])(["setTemplate"]),goToPreviousPage(){let e=this.$router.options.routes.findIndex(e=>e.path===this.$route.path);if(e>0){let t=this.$router.options.routes[--e];"/Network"!==t.path||this.template.standalone||(t=this.$router.options.routes[--e]),"/Display"!==t.path||this.board.supportsDisplay||(t=this.$router.options.routes[--e]),this.$router.push(t)}},goToNextPage(){let e=this.$router.options.routes.findIndex(e=>e.path===this.$route.path);if(e+2<this.$router.options.routes.length){let t=this.$router.options.routes[++e];"/Display"!==t.path||this.board.supportsDisplay||(t=this.$router.options.routes[++e]),"/Network"!==t.path||this.template.standalone||(t=this.$router.options.routes[++e]),this.$router.push(t)}else if(this.$refs.mainForm&&this.$refs.mainForm.checkValidity()&&null===this.$refs.mainForm.querySelector(".is-invalid")){const e=JSON.parse(JSON.stringify(this.$store.state.template));g.validatePins(e)?this.$refs.finishModal.show():this.$refs.ioErrorModal.show()}else this.$refs.errorModal.show()},highlightErrors(){this.$refs.mainForm.reportValidity()},async finishShow(){if(this.rrfVersion=this.rrfLink=this.rrfFile=null,this.iapLink=this.iapFile=null,this.dwcVersion=this.dwcLink=this.dwcFile=null,this.message="Loading...",this.files=[],this.configLink="data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.template)),this.addRRF&&this.template.standalone)try{const t=await w.downloadFile("https://api.github.com/repos/dc42/RepRapFirmware/releases","json"),r=this.template.firmware;let a=null;if(t.forEach((function(e){e.draft||e.prerelease||a&&!(e.created_at>a.created_at)||(r<2&&-1!==e.name.indexOf("1.")||r>=2&&r<3&&-1!==e.name.indexOf("2.")||r>=3&&-1!==e.name.indexOf("3."))&&(a=e)})),!a)throw"Could not find suitable RepRapFirmware version on GitHub";{try{this.rrfFile=await w.downloadFile(`assets/RepRapFirmware-${a.tag_name}/${this.board.firmwareFile}`,"blob","application/octet-stream"),this.rrfFile.name=this.board.firmwareFile}catch{this.rrfFile=null}const t=!this.template.board.startsWith("duet3")||this.template.standalone?this.board.iapFile:null;try{this.iapFile=await w.downloadFile(`assets/RepRapFirmware-${a.tag_name}/${t}`,"blob","application/octet-stream"),this.iapFile.name=t}catch{this.iapFile=null}for(let r=0;r<a.assets.length;r++){const s=a.assets[r];let i=null,o=null;try{null===this.rrfFile&&s.name===this.board.firmwareFile?(i=s.browser_download_url,this.rrfVersion=a.tag_name,this.rrfFile=await w.downloadFile(`assets/RepRapFirmware-${a.tag_name}/${s.name}`,"blob","application/octet-stream"),this.rrfFile.name=s.name):null===this.iapFile&&s.name===t&&(o=s.browser_download_url,this.iapFile=await w.downloadFile(`assets/RepRapFirmware-${a.tag_name}/${s.name}`,"blob","application/octet-stream"),this.iapFile.name=s.name)}catch(e){i&&null===this.rrfFile&&(this.rrfLink=i),o&&null===this.iapFile&&(this.iapLink=o)}}}}catch(e){console.warn("Failed to load RRF: "+e)}if(this.addDWC&&this.template.standalone)try{const t=await w.downloadFile("https://api.github.com/repos/chrishamm/DuetWebControl/releases","json");let r=null;if(t.forEach((function(e){e.draft||e.prerelease||r&&!(e.created_at>r.created_at)||(r=e)})),r)for(let a=0;a<r.assets.length;a++){const t=r.assets[a];let s=null;try{if(-1!==t.name.indexOf("SD")){s=t.browser_download_url,this.dwcVersion=r.tag_name,this.dwcFile=await w.downloadFile(`assets/DuetWebControl-${r.tag_name}.zip`,"blob","application/octet-stream");break}}catch(e){this.dwcLink=s}}}catch(e){console.warn("Failed to load DWC: "+e)}try{const e=await w.compileFile("templates/files.ejs",{template:this.template});this.files=e.trim().split("\n")}catch(e){this.message="Failed to load template from server:<br><br>"+e}},async generateZIP(){this.generatingZIP=!0;try{const e=await w.compileZIP(this.files,this.template,this.board,this.rrfFile,this.iapFile,this.dwcFile);w.canDownloadFiles?c()(e,"config.zip"):alert("Error: This browser does not support blobs! Save your configuration template and try another one.")}catch(e){throw alert("Failed to generate ZIP bundle:\n\n"+e),e}this.generatingZIP=!1},async showFile(e){try{const t=await w.compileTemplate(e,this.template,this.board);let r=window.open("about:blank","_blank");null==r?alert("Could not open a new tab!\n\nPlease allow pop-ups for this page and try again."):(r.document.write(t.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")),r.document.body.style="font-family: monospace;",r.document.title=e,r.document.close())}catch(t){alert(`Failed to generate file ${e}:\n\n${t}`)}}},mounted(){const e=this.$refs.mainForm,t=this.$refs.errorModal;this.$router.beforeEach((r,a,s)=>{"/Mapping"===a.path||e.checkValidity()&&null===e.querySelector(".is-invalid")?s():(t.show(),s(!1))}),window.jsonTemplate&&(this.setTemplate({name:"existing",data:window.jsonTemplate}),this.$router.push("/General"))}},vr=br,fr=(r("034f"),Object(S["a"])(vr,l,p,!1,null,null,null)),gr=fr.exports,_r=r("59350");a["default"].use(d["a"]);var xr=new d["a"].Store({strict:!0,state:{board:_.getBoard(g.getDefaultTemplate().board),machine:"custom",preset:g.getDefaultTemplate(),customTemplate:g.getDefaultTemplate(),template:g.getDefaultTemplate(),addRRF:!0,addDWC:!0},getters:{getField:m["a"],canAddExpansionBoard(e){return e.template.expansion_boards.length<e.board.maxExpansionBoards},canAddExtruder(e){return e.template.drives.length<g.getMaxDrives(e.template)},canRemoveExtruder(e){return e.template.drives.length>3},canAddNozzle(e){const t=g.getMaxHeaters(e.template)-(e.template.bed.present?1:0)-(e.template.chamber.present?1:0)-("bltouch"===e.template.probe.type&&e.template.probe.pwm_channel<e.board.heaterPorts.length?1:0);return e.template.num_nozzles<t},canRemoveNozzle(e){return e.template.num_nozzles>0},canRemoveTool(e){return e.template.tools.length>0},canAddFan(e){return e.template.fans.length<g.getMaxFans(e.template)},canRemoveFan(e){return e.template.fans.length>0}},actions:{setBoard({commit:e},t){e("setBoard",t),"duet06"===t||"duet085"===t?e("setFirmware",1.21):t.startsWith("duet3")&&e("setFirmware",3)}},mutations:{updateField:m["d"],setTemplate(e,{name:t,data:r}){"custom"===e.machine&&(e.customTemplate=g.copy(e.template)),"custom"!==t?g.update(r):r=e.customTemplate,e.board=_.getBoard(r.board);const a=r.heaters.length>1&&r.heaters[1]?r.heaters[1].series:r.heaters.length>0&&r.heaters[0]?r.heaters[0].series:null;a&&(e.board.seriesResistor=a),e.machine=t,e.preset=g.copy(r),e.template=r},setBoard(e,t){const r=_.getBoard(t);e.template.expansion_boards=e.template.expansion_boards.filter(e=>-1!==r.expansionBoards.indexOf(e)),e.board.microstepping==r.microstepping&&e.board.microsteppingInterpolation==r.microsteppingInterpolation||e.template.drives.forEach((function(e){r.microstepping?e.microstepping_interpolation=16==e.microstepping||e.microstepping_interpolation&&r.microsteppingInterpolation:(e.microstepping=16,e.microstepping_interpolation=!1)})),e.preset.heaters.forEach((function(e){null!==e&&(e.series=r.seriesResistor)})),e.template.heaters.forEach((function(t){null!==t&&t.series===e.board.seriesResistor&&(t.series=r.seriesResistor)})),t.startsWith("duet3")?(e.template.standalone=!1,e.addDWC=!1):e.template.standalone=!0,e.board=r,e.template.board=t,g.validatePins(e.template)},setBoardSeriesResistor(e,t){e.board.seriesResistor=t,e.preset.heaters.forEach((function(e){e.series=t})),e.template.heaters.forEach((function(e){(1e3===e.series&&4700===t||4700===e.series&&1e3===t)&&(e.series=t)}))},setFirmware(e,t){t<2&&(e.template.display.spi_frequency=2e6),t<2.01&&e.template.fans.forEach(e=>e.name=""),t>=3&&(e.template.bed_is_nozzle=!1),e.template.firmware=t,g.fixNozzles(e.template,e.preset),g.validatePins(e.template)},setGeometry(e,t){e.template.geometry.type=t,"delta"===t?(e.template.drives.forEach((function(e,t){(e.steps_per_mm===t<2||(2===t||420))&&(e.steps_per_mm=t<3?80:663),(e.instant_dv===t<2||(2===t||2))&&(e.instant_dv=20),(e.max_speed===t<2||(2===t||20))&&(e.max_speed=t<3?300:20),(e.acceleration===t<2||(2===t||250))&&(e.acceleration=1e3),800==e.current&&(e.current=t<3?1e3:800)})),3==e.template.drives[2].endstop_type&&(e.template.drives[2].endstop_type=1),e.preset.drives[2].endstop_type=1,e.preset.drives.forEach((function(e,t){e.steps_per_mm=t<3?80:663,e.instant_dv=20,e.max_speed=t<3?300:20,e.acceleration=1e3,e.current=t<3?1e3:800})),e.template.probe.points.length!==e.peripheral_points+e.halfway_points+1&&g.updateProbePoints(e.template)):(e.template.drives.forEach((function(e,t){(e.steps_per_mm===t<3||663)&&(e.steps_per_mm=t<2?80:2===t?400:420),20===e.instant_dv&&(e.instant_dv=t<2?15:2===t?1:2),(e.max_speed===t<3||20)&&(e.max_speed=t<2?100:2===t?3:20),1e3===e.acceleration&&(e.acceleration=t<2?500:2===t?20:250),(e.current===t<3||800)&&(e.current=800)})),1==e.template.drives[2].endstop_type&&(e.template.drives[2].endstop_type=3),e.preset.drives[2].endstop_type=3,e.preset.drives.forEach((function(e,t){e.steps_per_mm=t<2?80:2===t?400:420,e.instant_dv=t<2?15:2===t?1:2,e.max_speed=t<2?100:2===t?3:20,e.acceleration=t<2?500:2===t?20:250,e.current=800})))},addExpansionBoard(e,t){let r=1;for(let a=1;a<16;a++)if(!e.template.expansion_boards.some(e=>e.id===a)){r=a;break}e.template.expansion_boards.push(t)},removeExpansionBoard(e,t){e.template.expansion_boards.splice(t,1),g.fixNozzles(e.template),g.validatePins(e.template)},addExtruder(e){const t=Object.assign({},e.template.drives.length>3?e.template.drives[e.template.drives.length-1]:e.preset.drives[e.preset.drives.length-1]);t.driver=e.template.drives.length,e.board.microstepping||(t.microstepping=16,t.microstepping_interpolation=!1),e.template.drives.push(t)},removeExtruder(e){e.template.drives.pop()},setAxisMinimum(e,{axis:t,value:r}){0===t&&e.template.mesh.x_min==e.template.geometry.mins[0]+e.template.compensation_x_offset?e.template.mesh.x_min=r+e.template.compensation_x_offset:1===t&&e.template.mesh.y_min==e.template.geometry.mins[1]+e.template.compensation_y_offset&&(e.template.mesh.y_min=r+e.template.compensation_y_offset),e.template.geometry.mins[t]=r},setAxisMaximum(e,{axis:t,value:r}){e.template.geometry.maxes[t]=r},setPrintRadius(e,t){e.template.probe_radius==e.template.geometry.print_radius&&(e.template.probe_radius=t),e.template.geometry.print_radius=t},updateDrive(e,{drive:t,forwards:r,microstepping:a,interpolated:s,stepsPerMm:i,instantDv:o,maxSpeed:n,acceleration:l,current:p,driver:d,et:m,el:u,ep:c,stepperDriver:h,stepperDriverTimings:b}){void 0!==r&&(e.template.drives[t].direction=r?1:0),void 0!==a&&(e.template.drives[t].microstepping=a),void 0!==s&&(e.template.drives[t].microstepping_interpolation=s),void 0!==i&&(e.template.drives[t].steps_per_mm=i),void 0!==o&&(e.template.drives[t].instant_dv=o),void 0!==n&&(e.template.drives[t].max_speed=n),void 0!==l&&(e.template.drives[t].acceleration=l),void 0!==p&&(e.template.drives[t].current=p),void 0!==d&&(e.template.drives[t].driver=d),void 0!==m&&(e.template.drives[t].endstop_type=m),void 0!==u&&(e.template.drives[t].endstop_location=u),void 0!==c&&(e.template.drives[t].endstop_pin=c,e.template.firmware>=3&&(2===e.template.drives[t].endstop_type||3===e.template.drives[t].endstop_type)&&(e.template.drives[t].endstop_type=0)),void 0!==h&&(e.template.drives[t].stepperDriver=h),void 0!==b&&(e.template.drives[t].stepperDriverTimings=b)},setProbeType(e,t){"effector"==t?e.template.probe.speed=20:"effector"===e.template.probe.type&&(e.template.probe.speed=e.preset.probe.speed),"noprobe"===t&&e.template.drives.forEach((function(e){3===e.endstop_type&&(e.endstop_type=0)})),"bltouch"===t?e.template.probe.deploy=!0:"bltouch"===e.template.probe.type&&(e.template.probe.deploy=e.preset.probe.deploy),e.template.probe.type=t},setProbePin(e,{inputPin:t,pwmPin:r}){void 0!==t&&(e.template.probe.input_pin=t,null===t&&(e.template.probe.type="noprobe")),void 0!==r&&(e.template.probe.pwm_pin=r,null===r&&"bltouch"===e.template.probe.type&&(e.template.probe.type="noprobe"))},addNozzle(e){e.template.num_nozzles++,g.fixNozzles(e.template,e.preset);const t=1===e.template.num_nozzles&&e.template.bed_is_nozzle?0:e.template.heaters.length-1;e.template.fans.forEach((function(e){e.thermostatic&&e.heaters.push(t)}))},removeNozzle(e){const t=1===e.template.num_nozzles&&e.template.bed_is_nozzle?0:e.template.heaters.length-1;e.template.num_nozzles--,g.fixNozzles(e.template,e.preset),e.template.fans.forEach((function(e){e.thermostatic&&(e.heaters=e.heaters.filter(e=>e!==t))}))},updateBed(e,{present:t,heater:r,isNozzle:a}){void 0!==t&&(e.template.bed.present=t),void 0!==r&&(e.template.bed.heater=r),void 0!==a&&(!e.template.bed_is_nozzle&&a?e.template.num_nozzles++:e.template.bed_is_nozzle&&!a&&e.template.num_nozzles--,e.template.bed_is_nozzle=a,a&&(0===e.template.bed.heater&&(e.template.bed.heater=e.template.chamber.present&&1===e.template.chamber.heater?2:1),0===e.template.chamber.heater&&(e.template.chamber.heater=e.template.bed.present&&1===e.template.bed.heater?2:1))),g.fixNozzles(e.template,e.preset)},updateChamber(e,{present:t,heater:r}){void 0!==t&&(e.template.chamber.present=t),void 0!==r&&(e.template.chamber.heater=r),g.fixNozzles(e.template,e.preset)},updateHeater(e,{heater:t,tempLimit:r,pwmLimit:a,thermistor:s,beta:i,c:o,channel:n,output_pin:l,sensor_pin:p,sensor_type:d}){void 0!==r&&(e.template.heaters[t].temp_limit=r),void 0!==a&&(e.template.heaters[t].scale_factor=a),void 0!==s&&(e.template.heaters[t].thermistor=s),void 0!==i&&(e.template.heaters[t].beta=i),void 0!==o&&(e.template.heaters[t].c=o),void 0!==n&&(e.template.heaters[t].channel=n),void 0!==l&&(e.template.heaters[t].output_pin=l),void 0!==p&&(e.template.heaters[t].sensor_pin=p),void 0!==d&&(e.template.heaters[t].sensor_type=d),g.fixNozzles(e.template,e.preset)},addFan(e){const t=Object.assign({},e.preset.fans[Math.min(e.template.fans.length,e.preset.fans.length-1)]);t.thermostatic&&(t.heaters=[],e.template.heaters.forEach((function(r,a){e.template.bed.present&&e.template.bed.heater===a||e.template.chamber.present&&e.template.chamber.heater===a||t.heaters.push(a)}))),t.output_pin=null,e.template.fans.push(t)},removeFan(e){e.template.fans.pop()},updateFan(e,{fan:t,output_pin:r}){void 0!==r&&(e.template.fans[t].output_pin=r)},addTool(e){const t=Object.assign({},e.preset.tools[0]);if(t.number=e.template.tools.length,e.template.bed_is_nozzle&&0===t.number)t.heaters=[0];else{t.heaters=[];let r=0;for(let a=0;a<e.template.heaters.length;a++)if((!e.template.bed.present||e.template.bed.heater!==a)&&(!e.template.chamber.present||e.template.chamber.heater!==a)){if(t.number===r){t.heaters.push(a);break}r++}}t.number+3<e.template.drives.length?t.extruders=[t.number]:t.extruders=[],e.template.tools.push(t)},removeTool(e){e.template.tools.pop()},setToolExtruders(e,{index:t,extruders:r}){const a=e.template.tools[t];if(a.extruders=r,Math.max(a.mix_ratio.length,1)!==Math.max(a.extruders.length,1)&&(a.mix_ratio=[],a.extruders.length>1)){let e=1;for(let t=1;t<a.extruders.length;t++){const t=parseFloat((1/a.extruders.length).toFixed(2));e-=t,a.mix_ratio.push(t)}a.mix_ratio.push(parseFloat(e.toFixed(2)))}const s=a.extruders.filter(t=>t+3<e.template.drives.length);s.length!=a.extruders.length&&(a.extruders=s);const i=a.heaters.filter(t=>0==t&&e.template.bed_is_nozzle||t>0&&(!e.template.bed.present||e.template.bed.heater!==t)&&(!e.template.chamber.present||e.template.chamber.heater!==t)&&t<e.template.heaters.length&&null!==e.template.heaters[t]);i.length!==a.heaters.length&&(a.heaters=i)},updateProbePoints(e){g.updateProbePoints(e.template)},setOrthogonalDeviation(e,{axis:t,value:r}){e.template.orthogonal.deviations[t]=r},setDisplayMenu(e,{name:t,value:r}){for(let a=0;a<e.template.display.menus.length;a++){const s=e.template.display.menus[a];if(s.name===t)return void(s.value=r)}e.template.display.menus.push({name:t,value:r})},removeDisplayMenu(e,t){for(let r=0;r<e.template.display.menus.length;r++)if(e.template.display.menus[r].name===t)return void e.template.display.menus.splice(r,1)},setDisplayImage(e,{name:t,value:r}){for(let a=0;a<e.template.display.images.length;a++){const s=e.template.display.images[a];if(s.name===t)return void(s.value=r)}e.template.display.images.push({name:t,value:r})},removeDisplayImage(e,t){for(let r=0;r<e.template.display.images.length;r++)if(e.template.display.images[r].name===t)return void e.template.display.images.splice(r,1)}}});function wr(e){const t=e.checkValidity();e.classList.toggle("is-valid",t),e.classList.toggle("is-invalid",!t)}let yr=new MutationObserver((function(e){e.forEach((function(e){"attributes"===e.type&&"disabled"===e.attributeName&&(e.target.disabled?(e.target.classList.remove("is-valid"),e.target.classList.remove("is-invalid")):wr(e.target))}))}));var Pr={mounted(){if("b-form-input"===this.$options._componentTag&&null==this.$state){if(!this.$el.disabled){const e=this.$el.checkValidity();this.$el.classList.toggle("is-valid",e),this.$el.classList.toggle("is-invalid",!e)}yr.observe(this.$el,{attributes:!0}),this.$on("input",(function(){this.$el.disabled||wr(this.$el)}))}}};a["default"].config.productionTip=!1,a["default"].directive("preset",_r["a"]),a["default"].mixin(Pr),a["default"].use(s["a"]),window.isNumber=function(e){return void 0!==e&&null!==e&&e.constructor==Number&&!isNaN(e)&&isFinite(e)};new a["default"]({el:"#app",render:e=>e(gr),router:hr,store:xr})},59350:function(module,__webpack_exports__,__webpack_require__){"use strict";var bootstrap_vue_src_directives_tooltip_tooltip_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a9ff");function getTitle(preset,el,binding,vnode){if(void 0===preset){if(!vnode.data.model)return console.warn("Failed to get preset, no model binding present"),console.warn(el),"unknown";{let expression=vnode.data.model.expression.replace("template","preset");-1===expression.indexOf("preset")&&(expression="preset."+expression),preset=eval("vnode.context.$store.state."+expression)}}let unit="",defaultValue;if(el.parentElement)for(let e=0;e<el.parentElement.children.length;e++){const t=el.parentElement.children[e];if(t.classList.contains("input-group-append")){unit=" "+t.textContent;break}}if("SELECT"===el.tagName)for(let e=0;e<el.options.length;e++){const t=el.options[e],r=t.hasOwnProperty("_value")?t._value:t.value;if(r.constructor===Object){let e=!0;for(let t in preset)if(preset[t]!=r[t]){e=!1;break}if(e){defaultValue=t.textContent;break}}else if(r==preset){defaultValue=t.textContent;break}}else if(""===preset&&"INPUT"===el.tagName&&""!==el.placeholder)defaultValue=el.placeholder;else if(el.classList.contains("btn-group-toggle")){for(let e=0;e<el.children.length;e++){const t=el.children[e];if(t.children.length>0){const e=t.children[0];if("INPUT"===e.tagName)if(preset.constructor===Array)preset.forEach((function(r){r.toString()==e.value&&(void 0==defaultValue?defaultValue=t.textContent:defaultValue+=", "+t.textContent)}));else if(e.value==preset.toString()){defaultValue=t.textContent;break}}}void 0==defaultValue&&preset.constructor===Array&&(defaultValue="None")}else defaultValue=preset.constructor===Boolean?preset?"Enabled":"Disabled":preset+unit;let range="<br>";"INPUT"===el.tagName&&(""!=el.min&&""!=el.max?range+="<br>Allowed Range: "+el.min+" - "+el.max+unit:""!=el.min?range+="<br>Minimum Value: "+el.min+unit:""!=el.max&&(range+="<br>Maximum Value: "+el.max+unit));let title=el.dataset.originalTitle;if(!title)for(let e=0;e<el.children.length;e++){const t=el.children[e];if(t.title){title=t.title;break}}return title+range+"<br>Default Value: "+defaultValue}__webpack_exports__["a"]={bind(e,t,r){const a=t.value;t.modifiers.hover=!0,t.modifiers.html=!0,t.value=()=>getTitle(a,e,t,r),bootstrap_vue_src_directives_tooltip_tooltip_js__WEBPACK_IMPORTED_MODULE_0__["a"].bind(e,t,r)},componentUpdated(e,t,r){t.modifiers.html=!0,bootstrap_vue_src_directives_tooltip_tooltip_js__WEBPACK_IMPORTED_MODULE_0__["a"].componentUpdated(e,t,r)},unbind(e){bootstrap_vue_src_directives_tooltip_tooltip_js__WEBPACK_IMPORTED_MODULE_0__["a"].unbind(e)}}},"5e6e":function(e,t,r){"use strict";var a=r("84f6"),s=r.n(a);s.a},8309:function(e,t,r){},"84f6":function(e,t,r){},"85e1":function(e,t,r){"use strict";var a=r("cbc3"),s=r.n(a);s.a},"85ec":function(e,t,r){},8644:function(e,t,r){},"8c8b":function(e,t,r){},9224:function(e){e.exports=JSON.parse('{"a":"3.1.9-LPC+2"}')},c64b:function(e,t,r){"use strict";var a=r("dc31"),s=r.n(a);s.a},c79f:function(e,t,r){"use strict";var a=r("eb62"),s=r.n(a);s.a},cbc3:function(e,t,r){},d606:function(e,t,r){"use strict";var a=r("8644"),s=r.n(a);s.a},d69d:function(e,t,r){},dc31:function(e,t,r){},dd4c:function(e,t,r){"use strict";var a=r("ee15"),s=r.n(a);s.a},e92e:function(e,t,r){},eb62:function(e,t,r){},ee15:function(e,t,r){},f80c:function(e,t,r){"use strict";var a=r("25d9"),s=r.n(a);s.a}});
//# sourceMappingURL=app.7b0ac2eb.js.map